{"version":3,"file":"static/js/app.a1ee73da.chunk.js","mappings":"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","sources":["D2App/utils/final-form.js","D2App/pages/EventImport/csv-converter.js","D2App/pages/EventImport/form-helper.js","webpack://@dhis2/app-shell/./src/D2App/App.module.css?d7f2","D2App/components/Icon/Icon.js","D2App/utils/options.js","D2App/components/ElementSchemes/DataElementIdScheme.js","D2App/components/DatePicker/DatePicker.js","D2App/components/DatePicker/DatePickerField.js","D2App/components/ElementSchemes/EventIdScheme.js","D2App/components/FileUpload/FileUpload.js","D2App/components/FormAlerts/FormAlerts.js","webpack://@dhis2/app-shell/./src/D2App/components/FormField/FormField.module.css?9be0","D2App/components/FormField/FormField.js","D2App/components/ElementSchemes/IdScheme.js","webpack://@dhis2/app-shell/./src/D2App/components/ImportButtonStrip/ImportButtonStrip.module.css?0b74","D2App/components/ImportButtonStrip/ImportButtonStrip.js","D2App/contexts/User.js","D2App/contexts/Task.js","D2App/utils/tasks.js","webpack://@dhis2/app-shell/./src/D2App/components/JobOverview/JobOverview.module.css?766f","D2App/components/JobOverview/ChipContainer.js","D2App/components/JobOverview/helper.js","webpack://@dhis2/app-shell/./src/D2App/components/JobOverview/MenuLabel/MenuLabel.module.css?d472","D2App/components/JobOverview/MenuLabel/MenuLabel.js","D2App/components/JobOverview/JobOverview.js","D2App/components/JobSummary/Details/Details.js","webpack://@dhis2/app-shell/./src/D2App/components/JobSummary/JobSummary.module.css?26a3","D2App/components/JobSummary/Log/Log.js","D2App/components/JobSummary/helper.js","D2App/components/JobSummary/SingleStatusTable/SingleStatusTable.js","D2App/components/JobSummary/SingleSummary/SingleSummary.js","D2App/components/JobSummary/Messages/Messages.js","D2App/components/JobSummary/TypeCount/TypeCount.js","D2App/components/JobSummary/TypeReportSummary/TypeReportSummary.js","webpack://@dhis2/app-shell/./src/D2App/components/JobSummary/Summary/Summary.module.css?590f","D2App/components/JobSummary/Summary/Summary.js","D2App/components/JobSummary/JobSummary.js","D2App/components/JobSummary/MiniJobSummary/MiniJobSummary.js","webpack://@dhis2/app-shell/./src/D2App/components/MoreOptions/MoreOptions.module.css?a77b","D2App/components/MoreOptions/MoreOptions.js","D2App/components/ElementSchemes/OrgUnitIdScheme.js","webpack://@dhis2/app-shell/./src/D2App/components/OrgUnitTree/OrgUnitTreeField.module.css?64bc","D2App/components/OrgUnitTree/OrgUnitTreeField.js","webpack://@dhis2/app-shell/./src/D2App/components/Page/Page.module.css?f438","D2App/components/Page/Page.js","D2App/hooks/useTasks.js","D2App/hooks/useUser.js","D2App/hooks/useProgramStages.js","D2App/hooks/useClassKeys.js","webpack://@dhis2/app-shell/./src/D2App/components/ProgramStages/ProgramStages.module.css?6b11","D2App/components/ProgramStages/ProgramStages.js","webpack://@dhis2/app-shell/./src/D2App/components/RadioGroup/RadioGroup.module.css?7000","D2App/components/RadioGroup/RadioGroup.js","D2App/components/RadioGroup/RadioGroupField.js","D2App/components/Inputs/FileUpload.js","D2App/components/Inputs/ImportButtonStrip.js","D2App/components/Inputs/FormAlerts.js","D2App/components/Inputs/Format.js","D2App/components/Inputs/FirstRowIsHeader.js","D2App/components/Inputs/ClassKey.js","D2App/components/Inputs/Strategy.js","D2App/components/Inputs/PreheatCache.js","D2App/components/Inputs/SkipAudit.js","D2App/components/Inputs/SkipExistingCheck.js","D2App/components/Inputs/Identifier.js","D2App/components/Inputs/ImportReportMode.js","D2App/components/Inputs/PreheatMode.js","D2App/components/Inputs/ImportStrategy.js","D2App/components/Inputs/AtomicMode.js","D2App/components/Inputs/MergeMode.js","D2App/components/Inputs/FlushMode.js","D2App/components/Inputs/InclusionStrategy.js","D2App/components/Inputs/SkipSharing.js","D2App/components/Inputs/SkipValidation.js","D2App/components/Inputs/IsAsync.js","D2App/components/Inputs/OrgUnitTree.js","D2App/components/ResourcePicker/resourceTypes.js","D2App/components/Inputs/DataSetPicker.js","D2App/components/Inputs/ProgramPicker.js","D2App/components/Inputs/IncludeChildren.js","D2App/components/Inputs/IncludeDeleted.js","D2App/components/Inputs/Compression.js","D2App/components/Inputs/Inclusion.js","D2App/components/Inputs/StartDate.js","D2App/components/Inputs/EndDate.js","D2App/components/Inputs/ExportButton.js","D2App/components/Inputs/ProgramStages.js","D2App/components/Schemas/SchemasField.js","D2App/components/Inputs/Schemas.js","D2App/components/Inputs/ObjectType.js","D2App/components/Inputs/Objects.js","D2App/hooks/useObjects.js","D2App/components/Inputs/DataElementIdScheme.js","D2App/components/Inputs/EventIdScheme.js","D2App/components/Inputs/IdScheme.js","D2App/components/Inputs/OrgUnitIdScheme.js","D2App/components/Inputs/OrgUnitIdSchemeCore.js","D2App/components/WithAuthority/predicates.js","D2App/components/Inputs/OrgUnitMode.js","D2App/components/Inputs/TEITypeFilter.js","D2App/components/Inputs/ProgramStatus.js","D2App/components/Inputs/FollowUpStatus.js","D2App/components/Inputs/ProgramStartDate.js","D2App/components/Inputs/ProgramEndDate.js","D2App/components/Inputs/TETypePicker.js","D2App/components/Inputs/LastUpdatedFilter.js","D2App/components/Inputs/LastUpdatedStartDate.js","D2App/components/Inputs/LastUpdatedEndDate.js","D2App/components/Duration/DurationField.js","D2App/components/Inputs/LastUpdatedDuration.js","D2App/components/Inputs/AssignedUserMode.js","D2App/components/Inputs/UserPicker.js","D2App/components/Inputs/IncludeAllAttributes.js","D2App/components/Inputs/Dates.js","D2App/components/Inputs/ProjectHierarchy.js","D2App/pages/MetadataImport/form-helper.js","D2App/pages/MetadataImport/MetadataImport.js","D2App/pages/MetadataExport/MetadataExport.js","D2App/pages/MetadataExport/form-helper.js","D2App/pages/MetadataDependencyExport/MetadataDependencyExport.js","D2App/pages/MetadataDependencyExport/form-helper.js","webpack://@dhis2/app-shell/./src/D2App/pages/JobOverview/JobOverview.module.css?4ac3","D2App/pages/JobOverview/JobOverview.js","webpack://@dhis2/app-shell/./src/D2App/components/Geometry/GeometryFormat.module.css?f7cf","D2App/components/Geometry/GeometryFormat.js","webpack://@dhis2/app-shell/./src/D2App/components/Geometry/GeometryPropertyMatch.module.css?d7dc","D2App/components/Geometry/GeometryPropertyMatch.js","webpack://@dhis2/app-shell/./src/D2App/components/Geometry/GeometryAttributePicker.module.css?a4c3","D2App/components/Geometry/GeometryAttributePicker.js","D2App/pages/GeometryImport/geojson-helper.js","D2App/pages/GeometryImport/GeometryImport.js","D2App/pages/GeometryImport/GMLImport.js","D2App/pages/GeometryImport/gml-helper.js","D2App/pages/EventImport/EventImport.js","D2App/pages/EarthEngineImport/util/CachedQueryProvider.js","D2App/pages/EarthEngineImport/util/formFieldConstants.js","D2App/pages/EarthEngineImport/components/AssociatedGeometry.js","D2App/pages/EarthEngineImport/util/earthEngines.js","webpack://@dhis2/app-shell/./src/D2App/pages/EarthEngineImport/components/styles/BandCocMappingTable.module.css?4ac7","D2App/pages/EarthEngineImport/components/BandCocMappingTable.js","D2App/pages/EarthEngineImport/components/DataElements.js","webpack://@dhis2/app-shell/./src/D2App/pages/EarthEngineImport/components/styles/DataPreview.module.css?de44","D2App/pages/EarthEngineImport/components/useFetchCurrentValues.js","D2App/pages/EarthEngineImport/components/PopulationAgegroupsDataPreview.js","D2App/pages/EarthEngineImport/components/PopulationDataPreview.js","D2App/pages/EarthEngineImport/components/DataPreview.js","D2App/pages/EarthEngineImport/components/EarthEngineId.js","webpack://@dhis2/app-shell/./src/D2App/pages/EarthEngineImport/components/styles/OrgUnitDimension.module.css?e888","D2App/pages/EarthEngineImport/components/OrgUnitDimension.js","D2App/pages/EarthEngineImport/components/OrganisationUnits.js","D2App/pages/EarthEngineImport/util/earthEngineHelper.js","D2App/pages/EarthEngineImport/components/usePeriods.js","D2App/pages/EarthEngineImport/components/Periods.js","D2App/pages/EarthEngineImport/components/Rounding.js","D2App/pages/EarthEngineImport/util/toGeoJson.js","D2App/pages/EarthEngineImport/util/getEarthEngineConfig.js","D2App/pages/EarthEngineImport/util/getStructuredData.js","D2App/pages/EarthEngineImport/util/getPrecisionFn.js","D2App/pages/EarthEngineImport/components/useEeData.js","webpack://@dhis2/app-shell/./src/D2App/pages/EarthEngineImport/EarthEngineImportForm.module.css?ac51","D2App/pages/EarthEngineImport/form-helper.js","D2App/pages/EarthEngineImport/EarthEngineImportForm.js","D2App/pages/EarthEngineImport/EarthEngineImport.js","D2App/pages/EventExport/form-helper.js","D2App/pages/EventExport/EventExport.js","D2App/pages/DataImport/form-helper.js","D2App/pages/DataImport/DataImport.js","D2App/pages/DataExport/form-helper.js","D2App/pages/DataExport/DataExport.js","D2App/pages/TEIExport/form-helper.js","D2App/pages/TEIExport/TEIExport.js","D2App/pages/TEIImport/form-helper.js","D2App/pages/TEIImport/TEIImport.js","D2App/pages/Home/HomeCard.js","D2App/pages/Home/pages.js","D2App/components/Router/ScrollToTop.js","D2App/pages/Home/Home.js","D2App/components/Router/Router.js","D2App/components/Schemas/helper.js","webpack://@dhis2/app-shell/./src/D2App/components/Schemas/Schemas.module.css?fb04","D2App/components/Schemas/SchemaGroup.js","D2App/components/Schemas/Schemas.js","D2App/components/Select/SelectField.js","webpack://@dhis2/app-shell/./src/D2App/components/Sidebar/MenuSectionHeader.module.css?ea10","D2App/components/Sidebar/MenuSectionHeader.js","D2App/components/Sidebar/ExportMenuSectionHeader.js","D2App/components/Sidebar/ImportMenuSectionHeader.js","webpack://@dhis2/app-shell/./src/D2App/components/Sidebar/Sidebar.module.css?0b32","D2App/components/Sidebar/Sidebar.js","D2App/components/Switch/Switch.js","D2App/components/WithAuthority/WithAuthority.js","D2App/components/ResourcePicker/queries.js","webpack://@dhis2/app-shell/./src/D2App/components/ResourcePicker/ResourcePicker.module.css?7328","D2App/components/ResourcePicker/ResourcePicker.js","D2App/components/ResourcePicker/ResourcePickerField.js","webpack://@dhis2/app-shell/./src/D2App/components/BasicOptions/BasicOptions.module.css?619d","D2App/components/BasicOptions/BasicOptions.js","webpack://@dhis2/app-shell/./src/D2App/components/ElementSchemes/SchemeContainer.module.css?16ae","D2App/components/ElementSchemes/SchemeContainer.js","webpack://@dhis2/app-shell/./src/D2App/components/StyledField/StyledField.module.css?a6f5","D2App/components/StyledField/StyledField.js","webpack://@dhis2/app-shell/./src/D2App/components/Tooltip/Tooltip.module.css?205c","D2App/components/Tooltip/Tooltip.js","webpack://@dhis2/app-shell/./src/D2App/components/ValidationSummary/ValidationSummary.module.css?f2fe","D2App/components/ValidationSummary/ValidationSummary.js","D2App/components/MergeOperation/MergeOperation.js","webpack://@dhis2/app-shell/./src/D2App/components/ImportProgress/ImportProgress.module.css?6d60","D2App/components/ImportProgress/ImportProgress.js","D2App/components/DataElementConfirmationModal/DataElementConfirmationModal.js","D2App/locales/index.js","D2App/App.js","D2App/utils/cacheBuster.js","D2App/Main.js","D2App/utils/helper.js","D2App/utils/mime.js","D2App/utils/xhr.js"],"sourcesContent":["import i18n from '@dhis2/d2-i18n';\nexport const FORM_ERROR = 'FINAL_FORM/form-error';\nexport const ARRAY_ERROR = 'FINAL_FORM/array-error';\nexport const jobStartedMessage = {\n  [FORM_ERROR]: [{\n    id: `job-started`,\n    info: true,\n    message: i18n.t('Job started.')\n  }]\n};","/**\n * Converts CSV data to DHIS2 Tracker Event JSON format\n *\n * This module handles conversion of CSV files with custom columns to the format\n * expected by the DHIS2 Tracker API for event import.\n */\n\n/**\n * Parse CSV line respecting quotes and commas\n * @param {string} line - A single line from CSV\n * @returns {string[]} Array of parsed values\n */\nconst parseCSVLine = line => {\n  const result = [];\n  let current = '';\n  let inQuotes = false;\n  for (let i = 0; i < line.length; i++) {\n    const char = line[i];\n    if (char === '\"') {\n      if (inQuotes && line[i + 1] === '\"') {\n        current += '\"';\n        i++;\n      } else {\n        inQuotes = !inQuotes;\n      }\n    } else if (char === ',' && !inQuotes) {\n      result.push(current.trim());\n      current = '';\n    } else {\n      current += char;\n    }\n  }\n  result.push(current.trim());\n  return result;\n};\n\n/**\n * Parse date string to ISO 8601 format\n * @param {string} dateString - Date string in various formats (M/D/YYYY, etc.)\n * @returns {string} ISO 8601 formatted date (YYYY-MM-DD)\n */\nconst parseDateToISO = dateString => {\n  if (!dateString) {\n    // Return DHIS2-compliant ISO 8601 format with time\n    return new Date().toISOString();\n  }\n  try {\n    // Handle D/M/YYYY or M/D/YYYY format\n    const parts = dateString.split('/');\n    if (parts.length === 3) {\n      let day, month;\n\n      // Parse the parts as numbers\n      const part1 = parseInt(parts[0], 10);\n      const part2 = parseInt(parts[1], 10);\n      const year = parts[2];\n\n      // Determine if it's D/M/YYYY or M/D/YYYY\n      // If first part > 12, it must be day (D/M/YYYY format)\n      // If second part > 12, it must be day (M/D/YYYY format)\n      if (part1 > 12) {\n        // D/M/YYYY format\n        day = part1;\n        month = part2;\n      } else if (part2 > 12) {\n        // M/D/YYYY format\n        month = part1;\n        day = part2;\n      } else {\n        // Ambiguous - assume D/M/YYYY (international standard)\n        day = part1;\n        month = part2;\n      }\n\n      // Validate month and day ranges\n      if (month < 1 || month > 12 || day < 1 || day > 31) {\n        throw new Error(`Invalid date components: day=${day}, month=${month}, year=${year}`);\n      }\n\n      // Pad with zeros\n      const monthStr = month.toString().padStart(2, '0');\n      const dayStr = day.toString().padStart(2, '0');\n\n      // Validate the date is actually valid (e.g., not Feb 30, Nov 31, etc.)\n      const testDate = new Date(Date.UTC(parseInt(year, 10), month - 1, day, 0, 0, 0, 0));\n      // Check if the date components match what we input (Date auto-corrects invalid dates)\n      if (testDate.getUTCFullYear() === parseInt(year, 10) && testDate.getUTCMonth() === month - 1 && testDate.getUTCDate() === day) {\n        return `${year}-${monthStr}-${dayStr}T00:00:00.000Z`;\n      } else {\n        console.warn(`Invalid date detected: ${day}/${month}/${year} - skipping to fallback parsing`);\n      }\n    }\n\n    // Fallback to Date parsing\n    const date = new Date(dateString);\n    if (!isNaN(date.getTime())) {\n      return date.toISOString();\n    }\n  } catch (error) {\n    console.error('Error parsing date:', dateString, error);\n  }\n\n  // Return current date as fallback (with time!)\n  return new Date().toISOString();\n};\n\n/**\n * Create a case-insensitive lookup for data elements\n * @param {Object} dataElementMap - Map of data element names to IDs\n * @returns {Object} Map with lowercase keys pointing to { originalName, id }\n */\nconst createCaseInsensitiveLookup = dataElementMap => {\n  const lookup = {};\n  for (const [name, id] of Object.entries(dataElementMap)) {\n    // Normalize: trim and replace multiple spaces with single space, then lowercase\n    const normalizedKey = name.trim().replace(/\\s+/g, ' ').toLowerCase();\n    lookup[normalizedKey] = {\n      originalName: name,\n      id\n    };\n  }\n  return lookup;\n};\n\n/**\n * Create data element mapping from CSV headers\n * @param {string[]} headers - CSV column headers\n * @param {Object} dataElementMap - Map of column names to data element IDs\n * @returns {Object} Mapping of column index to data element info\n */\nconst createColumnMapping = (headers, dataElementMap) => {\n  const mapping = {};\n  const matchedCount = {\n    dataElements: 0,\n    unknown: 0\n  };\n\n  // Create case-insensitive lookup for data elements\n  const ciLookup = createCaseInsensitiveLookup(dataElementMap);\n  headers.forEach((header, index) => {\n    // Normalize header: trim and replace multiple spaces with single space\n    const normalizedHeader = header.trim().replace(/\\s+/g, ' ');\n    const lowerHeader = normalizedHeader.toLowerCase();\n\n    // Check if it's a data element\n    if (ciLookup[lowerHeader]) {\n      const match = ciLookup[lowerHeader];\n      // DATE is both a data element AND used for occurredAt\n      if (lowerHeader === 'date') {\n        mapping[index] = {\n          type: 'dateDataElement',\n          name: normalizedHeader,\n          id: match.id\n        };\n      } else {\n        mapping[index] = {\n          type: 'dataElement',\n          name: normalizedHeader,\n          id: match.id\n        };\n      }\n      matchedCount.dataElements++;\n    } else if (lowerHeader === 'date') {\n      // DATE column without a matching data element - just use for occurredAt\n      mapping[index] = {\n        type: 'date',\n        name: normalizedHeader\n      };\n      matchedCount.unknown++;\n    } else {\n      // Unknown column, treat as potential data element\n      mapping[index] = {\n        type: 'unknown',\n        name: normalizedHeader\n      };\n      matchedCount.unknown++;\n    }\n  });\n  return mapping;\n};\n\n/**\n * Convert a CSV row to a DHIS2 tracker event\n * @param {string[]} rowValues - Values from a CSV row\n * @param {Object} columnMapping - Mapping of columns to data elements\n * @param {string} programId - DHIS2 Program ID\n * @param {string} programStageId - DHIS2 Program Stage ID\n * @param {string} orgUnitId - DHIS2 Organisation Unit ID\n * @returns {Object} DHIS2 tracker event object\n */\nconst convertRowToEvent = ({\n  rowValues,\n  columnMapping,\n  programId,\n  programStageId,\n  orgUnitId\n}) => {\n  const dataValues = [];\n  let occurredAt = new Date().toISOString();\n\n  // Simple email validation regex\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\n  // Process each column value\n  rowValues.forEach((value, index) => {\n    const column = columnMapping[index];\n    if (!column) {\n      return;\n    }\n    const trimmedValue = value.trim();\n    if (!trimmedValue) {\n      return; // Skip empty values\n    }\n    if (column.type === 'date') {\n      // Just use for occurredAt, not a data element\n      occurredAt = parseDateToISO(trimmedValue);\n    } else if (column.type === 'dateDataElement' && column.id) {\n      // DATE is both a data element AND used for occurredAt\n      occurredAt = parseDateToISO(trimmedValue);\n      dataValues.push({\n        dataElement: column.id,\n        value: trimmedValue\n      });\n    } else if (column.type === 'dataElement' && column.id) {\n      // Validate EMAIL fields\n      const columnNameLower = column.name.toLowerCase();\n      if (columnNameLower === 'email' || columnNameLower.includes('email')) {\n        // Only add if valid email\n        if (emailRegex.test(trimmedValue)) {\n          dataValues.push({\n            dataElement: column.id,\n            value: trimmedValue\n          });\n        }\n        // Skip invalid emails silently\n      } else {\n        // Add as data value\n        dataValues.push({\n          dataElement: column.id,\n          value: trimmedValue\n        });\n      }\n    }\n    // region, district, chps are informational and don't become data values\n    // unless they have corresponding data elements\n  });\n\n  // Create the event object\n  const event = {\n    program: programId,\n    programStage: programStageId,\n    orgUnit: orgUnitId,\n    occurredAt: occurredAt,\n    status: 'COMPLETED',\n    dataValues: dataValues\n  };\n  return event;\n};\n\n/**\n * Main function to convert CSV data to DHIS2 Tracker format\n *\n * Mapping of form fields to DHIS2 entities:\n * - projectArea = DHIS2 Program ID (the actual program)\n * - programmeArea = Organisation Unit ID (Level 3 org unit)\n * - thematicArea = Level 2 Organisation Unit (parent of programmeArea)\n *\n * @param {string} csvText - Raw CSV text content\n * @param {Object} formData - Form data containing hierarchy selections\n * @param {string} formData.projectArea - DHIS2 Program ID\n * @param {string} formData.programmeArea - Organisation Unit ID (Level 3)\n * @param {string} formData.thematicArea - Level 2 Organisation Unit\n * @param {Object} dataElementMap - Map of CSV column names to DHIS2 data element IDs\n * @param {string} programStageId - DHIS2 Program Stage ID\n * @returns {Object} DHIS2 Tracker import payload\n */\nexport const convertCsvToTrackerFormat = ({\n  csvText,\n  formData,\n  dataElementMap,\n  programStageId\n}) => {\n  const {\n    projectArea,\n    programmeArea,\n    thematicArea\n  } = formData;\n  if (!projectArea || !programmeArea || !thematicArea) {\n    throw new Error('Project Area (Program), Programme Area (Org Unit), and Thematic Area are required');\n  }\n  if (!dataElementMap || Object.keys(dataElementMap).length === 0) {\n    throw new Error('Data element mapping is required');\n  }\n  if (!programStageId) {\n    throw new Error('Program Stage ID is required');\n  }\n\n  // Parse CSV\n  const lines = csvText.split('\\n').filter(line => line.trim());\n  if (lines.length < 2) {\n    throw new Error('CSV file must contain headers and at least one data row');\n  }\n  const headers = parseCSVLine(lines[0]);\n  const columnMapping = createColumnMapping(headers, dataElementMap);\n\n  // Convert data rows to events\n  const events = [];\n  for (let i = 1; i < lines.length; i++) {\n    const line = lines[i].trim();\n    if (!line) {\n      continue;\n    }\n    try {\n      const rowValues = parseCSVLine(line);\n\n      // Correct mapping:\n      // projectArea = Program ID (DHIS2 Program)\n      // programmeArea = Org Unit ID (Level 3 Organisation Unit)\n      const event = convertRowToEvent({\n        rowValues,\n        columnMapping,\n        programId: projectArea,\n        programStageId,\n        orgUnitId: programmeArea\n      });\n\n      // Only add events with data values\n      if (event.dataValues && event.dataValues.length > 0) {\n        events.push(event);\n      }\n    } catch (error) {\n      console.error(`Error processing row ${i + 1}:`, error);\n      // Continue processing other rows\n    }\n  }\n  if (events.length === 0) {\n    throw new Error('No valid events were created from the CSV data');\n  }\n\n  // Create the DHIS2 Tracker import payload\n  const trackerPayload = {\n    events: events\n  };\n  return trackerPayload;\n};\n\n/**\n * Convert the tracker payload to a File/Blob for upload\n * @param {Object} trackerPayload - DHIS2 Tracker import payload\n * @returns {Blob} Blob containing the JSON payload\n */\nexport const convertPayloadToFile = trackerPayload => {\n  const jsonString = JSON.stringify(trackerPayload, null, 2);\n  return new Blob([jsonString], {\n    type: 'application/json'\n  });\n};\n\n/**\n * Helper function to get data element IDs from CSV headers\n * This is used to determine which data elements need to be created\n * @param {string} csvText - Raw CSV text content\n * @returns {string[]} Array of unique column names (potential data elements)\n */\nexport const extractDataElementNamesFromCsv = csvText => {\n  const lines = csvText.split('\\n').filter(line => line.trim());\n  if (lines.length < 1) {\n    return [];\n  }\n  const headers = parseCSVLine(lines[0]);\n\n  // All columns are potential data elements\n  return headers.map(h => h.trim()).filter(h => h.length > 0);\n};","import { FORM_ERROR, jobStartedMessage } from '../../utils/final-form.js';\nimport { uploadFile } from '../../utils/helper.js';\nimport { convertCsvToTrackerFormat, convertPayloadToFile } from './csv-converter.js';\nconst isAsync = true;\n\n/**\n * Parse CSV line respecting quotes\n * @param {string} line - CSV line\n * @returns {string[]} Parsed values\n */\nconst parseCSVLine = line => {\n  const result = [];\n  let current = '';\n  let inQuotes = false;\n  for (let i = 0; i < line.length; i++) {\n    const char = line[i];\n    if (char === '\"') {\n      if (inQuotes && line[i + 1] === '\"') {\n        current += '\"';\n        i++;\n      } else {\n        inQuotes = !inQuotes;\n      }\n    } else if (char === ',' && !inQuotes) {\n      result.push(current.trim());\n      current = '';\n    } else {\n      current += char;\n    }\n  }\n  result.push(current.trim());\n  return result;\n};\n\n/**\n * Normalize data element name - remove extra spaces, trim, uppercase for matching\n * @param {string} name - Raw name from CSV or system\n * @returns {string} Normalized name\n */\nconst normalizeDataElementName = name => {\n  return name.trim().replace(/\\s+/g, ' ') // Replace multiple spaces with single space\n  .toUpperCase();\n};\n\n// Analyze CSV columns and check against existing data elements\nconst analyzeCSVForDataElements = async (fileContent, baseUrl) => {\n  const lines = fileContent.split('\\n').filter(line => line.trim());\n  if (lines.length < 2) {\n    return {\n      dataElementColumns: [],\n      missingDataElements: [],\n      existingDataElements: {}\n    };\n  }\n  const headers = parseCSVLine(lines[0]);\n\n  // Clean and normalize headers\n  const cleanHeaders = headers.map(h => h.trim().replace(/\\s+/g, ' '));\n\n  // All columns except DATE are potential data elements\n  const dataElementColumns = cleanHeaders.filter(h => h.toUpperCase() !== 'DATE');\n\n  // Pre-scan to detect value types\n  const parsedLines = lines.slice(1).filter(l => l.trim()).map(l => parseCSVLine(l));\n  const columnValueTypes = {};\n  dataElementColumns.forEach(header => {\n    const colIdx = cleanHeaders.indexOf(header);\n    const hasText = parsedLines.some(vals => {\n      const v = (vals[colIdx] || '').trim();\n      return v !== '' && isNaN(v);\n    });\n    // Use TEXT for all columns to avoid type mismatches\n    // DHIS2 is strict about INTEGER values - only use if all values are truly integers\n    columnValueTypes[header] = 'TEXT';\n  });\n\n  // Fetch existing data elements\n  const deUrl = `${baseUrl}/api/dataElements.json?fields=id,displayName,name,valueType,aggregationType,categoryCombo[id,categoryOptionCombos[id]]&paging=false`;\n  let dataElementsList = [];\n  try {\n    const resp = await fetch(deUrl, {\n      credentials: 'include'\n    });\n    const data = await resp.json();\n    dataElementsList = data.dataElements || [];\n  } catch (e) {\n    console.error('Failed to fetch data elements:', e);\n    dataElementsList = [];\n  }\n\n  // Build lookup map - match by normalized name (case-insensitive, no extra spaces)\n  const existingDataElements = {};\n  dataElementsList.forEach(de => {\n    const displayName = de.displayName || de.name;\n    const normalizedDisplay = normalizeDataElementName(displayName);\n    const normalizedName = normalizeDataElementName(de.name);\n    existingDataElements[normalizedDisplay] = de;\n    existingDataElements[normalizedName] = de;\n  });\n\n  // Find missing data elements using normalized names\n  const missingDataElements = dataElementColumns.filter(h => {\n    const normalized = normalizeDataElementName(h);\n    return !existingDataElements[normalized];\n  }).map(name => ({\n    name,\n    valueType: columnValueTypes[name]\n  }));\n  return {\n    dataElementColumns,\n    missingDataElements,\n    existingDataElements,\n    columnValueTypes,\n    cleanHeaders\n  };\n};\n\n// Create missing data elements and add them to the program stage\nconst createMissingDataElements = async (missingDataElements, baseUrl, programStageId, onProgress) => {\n  const createdElements = {};\n\n  // Fetch default category combo\n  let defaultCatComboId = null;\n  try {\n    var _ccData$categoryCombo;\n    const ccResp = await fetch(`${baseUrl}/api/categoryCombos.json?filter=name:eq:default&fields=id&paging=false`, {\n      credentials: 'include'\n    });\n    const ccData = await ccResp.json();\n    if (((_ccData$categoryCombo = ccData.categoryCombos) === null || _ccData$categoryCombo === void 0 ? void 0 : _ccData$categoryCombo.length) > 0) {\n      defaultCatComboId = ccData.categoryCombos[0].id;\n    }\n  } catch (e) {\n    console.warn('Could not fetch default category combo:', e);\n  }\n  const createdDataElementIds = [];\n  const total = missingDataElements.length;\n\n  // Create each data element\n  for (let i = 0; i < missingDataElements.length; i++) {\n    const {\n      name,\n      valueType\n    } = missingDataElements[i];\n    if (onProgress) {\n      onProgress({\n        current: i + 1,\n        total,\n        message: `Creating data element: ${name}`,\n        percent: Math.round((i + 1) / total * 100)\n      });\n    }\n    try {\n      const newDe = {\n        name: name,\n        shortName: name.substring(0, 50),\n        domainType: 'TRACKER',\n        valueType: valueType,\n        aggregationType: valueType === 'TEXT' ? 'NONE' : 'SUM',\n        categoryCombo: defaultCatComboId ? {\n          id: defaultCatComboId\n        } : undefined\n      };\n      const createResp = await fetch(`${baseUrl}/api/dataElements`, {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newDe)\n      });\n      if (createResp.ok) {\n        var _createData$response, _createData$response2;\n        const createData = await createResp.json();\n        const createdId = ((_createData$response = createData.response) === null || _createData$response === void 0 ? void 0 : _createData$response.uid) || ((_createData$response2 = createData.response) === null || _createData$response2 === void 0 ? void 0 : _createData$response2.lastImported);\n        if (createdId) {\n          createdDataElementIds.push(createdId);\n          const fetchResp = await fetch(`${baseUrl}/api/dataElements/${createdId}.json?fields=id,displayName,name,valueType,categoryCombo[id,categoryOptionCombos[id]]`, {\n            credentials: 'include'\n          });\n          if (fetchResp.ok) {\n            const fullDe = await fetchResp.json();\n            createdElements[name] = fullDe;\n            createdElements[name.toLowerCase()] = fullDe;\n          }\n        }\n      } else {\n        const errorText = await createResp.text();\n        console.error(`Failed to create data element ${name}:`, errorText);\n      }\n    } catch (e) {\n      console.error(`Error creating data element ${name}:`, e);\n    }\n  }\n\n  // Now add all created data elements to the program stage\n  if (createdDataElementIds.length > 0 && programStageId) {\n    if (onProgress) {\n      onProgress({\n        current: total,\n        total,\n        message: `Adding data elements to program stage...`,\n        percent: 95\n      });\n    }\n    try {\n      // Fetch full program stage object with sections\n      const psResp = await fetch(`${baseUrl}/api/programStages/${programStageId}.json?fields=:all,programStageSections[id,name,dataElements[id]]`, {\n        credentials: 'include'\n      });\n      if (psResp.ok) {\n        const psData = await psResp.json();\n        const existingPSDEs = psData.programStageDataElements || [];\n\n        // Build updated list of program stage data elements\n        const updatedPSDEs = [...existingPSDEs];\n\n        // Add new data elements\n        createdDataElementIds.forEach(deId => {\n          // Check if not already in the program stage\n          const exists = existingPSDEs.some(psde => {\n            var _psde$dataElement;\n            return ((_psde$dataElement = psde.dataElement) === null || _psde$dataElement === void 0 ? void 0 : _psde$dataElement.id) === deId;\n          });\n          if (!exists) {\n            updatedPSDEs.push({\n              dataElement: {\n                id: deId\n              },\n              compulsory: false,\n              displayInReports: true\n            });\n          }\n        });\n\n        // Update program stage with full object\n        psData.programStageDataElements = updatedPSDEs;\n\n        // Also add to program stage sections if sections exist\n        if (psData.programStageSections && psData.programStageSections.length > 0) {\n          // Build a set of all data element IDs that are already in ANY section\n          const allSectionDeIds = new Set();\n          psData.programStageSections.forEach(section => {\n            (section.dataElements || []).forEach(de => {\n              allSectionDeIds.add(de.id);\n            });\n          });\n\n          // Find created data elements that are NOT in any section\n          const missingFromSections = createdDataElementIds.filter(deId => !allSectionDeIds.has(deId));\n          if (missingFromSections.length > 0) {\n            // Find or use the first section\n            let targetSection = psData.programStageSections.find(s => s.name === 'Imported Data');\n            if (!targetSection) {\n              targetSection = psData.programStageSections[0];\n            }\n            if (!targetSection.dataElements) {\n              targetSection.dataElements = [];\n            }\n\n            // Add all missing data elements to the section\n            missingFromSections.forEach(deId => {\n              targetSection.dataElements.push({\n                id: deId\n              });\n            });\n            console.log(`Added ${missingFromSections.length} data elements to section \"${targetSection.name}\"`);\n          }\n        }\n        const updateResp = await fetch(`${baseUrl}/api/programStages/${programStageId}`, {\n          method: 'PUT',\n          credentials: 'include',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(psData)\n        });\n        if (!updateResp.ok) {\n          const errorText = await updateResp.text();\n          console.error(`Failed to update program stage:`, errorText);\n          throw new Error(`Failed to link data elements to program stage: ${errorText}`);\n        } else {\n          console.log(`Successfully linked ${createdDataElementIds.length} data elements to program stage ${programStageId} and sections`);\n        }\n      }\n    } catch (e) {\n      console.error(`Error adding data elements to program stage:`, e);\n    }\n  }\n  return createdElements;\n};\n\n/**\n * Check if a string is a valid DHIS2 UID (11 alphanumeric characters)\n * @param {string} str - String to check\n * @returns {boolean} True if valid UID format\n */\nconst isValidDhis2Id = str => {\n  return /^[a-zA-Z0-9]{11}$/.test(str);\n};\n\n/**\n * Fetch program metadata including data elements and program stages\n * @param {string} baseUrl - DHIS2 base URL\n * @param {string} programIdOrName - Program ID or name to fetch data elements from\n * @returns {Object} Object containing dataElementMap and programStageId\n */\nconst fetchProgramMetadata = async (baseUrl, programIdOrName) => {\n  try {\n    // Clean up the input - remove any path or extra characters\n    const cleanInput = typeof programIdOrName === 'string' ? programIdOrName.split('/').pop().trim() : programIdOrName;\n    let programData;\n\n    // Check if it's a valid DHIS2 ID format\n    if (isValidDhis2Id(cleanInput)) {\n      // It's an ID, fetch directly\n      const url = `${baseUrl}/api/programs/${cleanInput}.json?fields=id,name,displayName,programStages[id,name,displayName,programStageDataElements[dataElement[id,name,displayName]]]`;\n      const response = await fetch(url, {\n        credentials: 'include',\n        headers: {\n          'Accept': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        const errorMsg = response.statusText || `HTTP ${response.status}`;\n        const errorText = await response.text().catch(() => '');\n        console.error('Program fetch by ID failed:', {\n          status: response.status,\n          errorMsg,\n          errorText\n        });\n        throw new Error(`Failed to fetch program metadata: ${errorMsg}${errorText ? ` - ${errorText}` : ''}`);\n      }\n      programData = await response.json();\n    } else {\n      // It's likely a name/displayName, search for it\n      // Use 'ilike' for case-insensitive partial matching\n      // Note: We search all program types (WITH_REGISTRATION and WITHOUT_REGISTRATION)\n      // to support both tracker and event programs\n      const searchUrl = `${baseUrl}/api/programs.json?fields=id,name,displayName,programType,programStages[id,name,displayName,programStageDataElements[dataElement[id,name,displayName]]]&filter=displayName:ilike:${encodeURIComponent(cleanInput)}&paging=false`;\n      const response = await fetch(searchUrl, {\n        credentials: 'include',\n        headers: {\n          'Accept': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        const errorMsg = response.statusText || `HTTP ${response.status}`;\n        const errorText = await response.text().catch(() => '');\n        console.error('Program search failed:', {\n          status: response.status,\n          errorMsg,\n          errorText\n        });\n        throw new Error(`Failed to search for program: ${errorMsg}${errorText ? ` - ${errorText}` : ''}`);\n      }\n      const searchResult = await response.json();\n      if (!searchResult.programs || searchResult.programs.length === 0) {\n        // Try searching by name instead of displayName\n        const nameSearchUrl = `${baseUrl}/api/programs.json?fields=id,name,displayName,programType,programStages[id,name,displayName,programStageDataElements[dataElement[id,name,displayName]]]&filter=name:ilike:${encodeURIComponent(cleanInput)}&paging=false`;\n        const nameResponse = await fetch(nameSearchUrl, {\n          credentials: 'include',\n          headers: {\n            'Accept': 'application/json'\n          }\n        });\n        if (nameResponse.ok) {\n          const nameSearchResult = await nameResponse.json();\n          if (nameSearchResult.programs && nameSearchResult.programs.length > 0) {\n            programData = nameSearchResult.programs[0];\n          }\n        }\n        if (!programData) {\n          throw new Error(`Program not found with name or displayName: \"${cleanInput}\"`);\n        }\n      } else {\n        programData = searchResult.programs[0];\n      }\n    }\n\n    // Extract data elements\n    const dataElementMap = {};\n    if (programData.programStages && Array.isArray(programData.programStages)) {\n      programData.programStages.forEach(stage => {\n        if (stage.programStageDataElements && Array.isArray(stage.programStageDataElements)) {\n          stage.programStageDataElements.forEach(psde => {\n            if (psde.dataElement) {\n              const de = psde.dataElement;\n              const name = de.displayName || de.name;\n              dataElementMap[name] = de.id;\n            }\n          });\n        }\n      });\n    }\n\n    // Get the first program stage ID\n    if (!programData.programStages || programData.programStages.length === 0) {\n      throw new Error('No program stages found for the selected program');\n    }\n    const programStageId = programData.programStages[0].id;\n    return {\n      dataElementMap,\n      programStageId\n    };\n  } catch (error) {\n    console.error('Error fetching program metadata:', error);\n    throw new Error(error.message || 'Failed to fetch program metadata');\n  }\n};\n\n/**\n * Symbol to indicate that missing data elements were found and user confirmation is needed\n */\nconst MISSING_DATA_ELEMENTS = Symbol('MISSING_DATA_ELEMENTS');\nconst onImport = ({\n  baseUrl,\n  setProgress,\n  addTask,\n  setShowFullSummaryTask,\n  setLoadingMessage,\n  setMissingDataElements,\n  setShowDataElementModal,\n  setPendingImport\n}) => async (values, preReadContent = null, skipAnalysis = false) => {\n  const {\n    dryRun,\n    files,\n    format,\n    dataElementIdScheme,\n    orgUnitIdScheme,\n    idScheme,\n    projectArea,\n    programmeArea,\n    thematicArea\n  } = values;\n  let fileToUpload = files[0];\n  let uploadFormat = format;\n\n  // If CSV format, check columns FIRST before any conversion\n  if (format === 'csv' && !skipAnalysis && setMissingDataElements) {\n    try {\n      // Read the CSV file\n      const csvText = preReadContent || (await new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = e => resolve(e.target.result);\n        reader.onerror = reject;\n        reader.readAsText(files[0]);\n      }));\n      const analysis = await analyzeCSVForDataElements(csvText, baseUrl);\n      if (analysis.missingDataElements.length > 0) {\n        // Store pending import data and show modal\n        setPendingImport({\n          values,\n          fileContent: csvText\n        });\n        setMissingDataElements(analysis.missingDataElements);\n        setShowDataElementModal(true);\n        return; // Don't proceed until user confirms\n      }\n    } catch (error) {\n      console.error('Error analyzing CSV:', error);\n      // Continue with normal flow if analysis fails\n    }\n  }\n\n  // If CSV format, convert to JSON for tracker API\n  if (format === 'csv') {\n    try {\n      if (setLoadingMessage) {\n        setLoadingMessage('Reading CSV file...');\n      }\n      setProgress(10);\n\n      // Read the CSV file (reuse if already read)\n      const csvText = preReadContent || (await new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = e => resolve(e.target.result);\n        reader.onerror = reject;\n        reader.readAsText(files[0]);\n      }));\n      if (setLoadingMessage) {\n        setLoadingMessage('Building data element mapping from CSV columns...');\n      }\n      setProgress(30);\n\n      // Build data element map from CSV columns (not from program)\n      // This ensures we use the actual columns as data elements\n      const lines = csvText.split('\\n').filter(line => line.trim());\n      const rawHeaders = parseCSVLine(lines[0]);\n\n      // Clean headers - normalize spaces\n      const headers = rawHeaders.map(h => h.trim().replace(/\\s+/g, ' '));\n\n      // Get ALL data elements from system to build the map\n      const deUrl = `${baseUrl}/api/dataElements.json?fields=id,displayName,name,valueType&paging=false`;\n      const deResp = await fetch(deUrl, {\n        credentials: 'include'\n      });\n      const deData = await deResp.json();\n      const allDataElements = deData.dataElements || [];\n\n      // Build dataElementMap: { columnName: dataElementId }\n      const dataElementMap = {};\n      headers.forEach(header => {\n        if (header.toUpperCase() === 'DATE') return;\n\n        // Find matching data element using normalized names\n        const normalizedHeader = normalizeDataElementName(header);\n        const de = allDataElements.find(d => {\n          const normalizedDisplay = normalizeDataElementName(d.displayName || d.name);\n          const normalizedName = normalizeDataElementName(d.name);\n          return normalizedDisplay === normalizedHeader || normalizedName === normalizedHeader;\n        });\n        if (de) {\n          dataElementMap[header] = de.id;\n        }\n      });\n\n      // Fetch program stage ID from the program\n      if (setLoadingMessage) {\n        setLoadingMessage('Fetching program stage...');\n      }\n      const {\n        programStageId\n      } = await fetchProgramMetadata(baseUrl, projectArea);\n\n      // Ensure all data elements are linked to the program stage\n      if (setLoadingMessage) {\n        setLoadingMessage('Linking data elements to program stage...');\n      }\n      setProgress(45);\n      const dataElementIds = Object.values(dataElementMap);\n      if (dataElementIds.length > 0 && programStageId) {\n        try {\n          // Fetch full program stage with sections\n          const psResp = await fetch(`${baseUrl}/api/programStages/${programStageId}.json?fields=:all,programStageSections[id,name,dataElements[id]]`, {\n            credentials: 'include'\n          });\n          if (psResp.ok) {\n            const psData = await psResp.json();\n            const existingPSDEs = psData.programStageDataElements || [];\n            const existingDeIds = new Set(existingPSDEs.map(psde => {\n              var _psde$dataElement2;\n              return (_psde$dataElement2 = psde.dataElement) === null || _psde$dataElement2 === void 0 ? void 0 : _psde$dataElement2.id;\n            }).filter(Boolean));\n\n            // Find data elements not yet in program stage\n            const missingFromProgramStage = dataElementIds.filter(deId => !existingDeIds.has(deId));\n\n            // Add missing data elements to programStageDataElements\n            if (missingFromProgramStage.length > 0) {\n              console.log(`Adding ${missingFromProgramStage.length} data elements to programStageDataElements`);\n              const updatedPSDEs = [...existingPSDEs];\n              missingFromProgramStage.forEach(deId => {\n                updatedPSDEs.push({\n                  dataElement: {\n                    id: deId\n                  },\n                  compulsory: false,\n                  displayInReports: true\n                });\n              });\n              psData.programStageDataElements = updatedPSDEs;\n            }\n\n            // ALWAYS ensure ALL CSV data elements are in a section\n            // This is separate from adding to programStageDataElements\n            let needsSectionUpdate = false;\n            if (psData.programStageSections && psData.programStageSections.length > 0) {\n              // Build a set of all data element IDs that are already in ANY section\n              const allSectionDeIds = new Set();\n              psData.programStageSections.forEach(section => {\n                (section.dataElements || []).forEach(de => {\n                  allSectionDeIds.add(de.id);\n                });\n              });\n\n              // Find data elements from CSV that are NOT in any section\n              const missingFromSections = dataElementIds.filter(deId => !allSectionDeIds.has(deId));\n              if (missingFromSections.length > 0) {\n                console.log(`Adding ${missingFromSections.length} data elements to program stage section`);\n                needsSectionUpdate = true;\n\n                // Find or use the first section\n                let targetSection = psData.programStageSections.find(s => s.name === 'Imported Data');\n                if (!targetSection) {\n                  // Use the first section\n                  targetSection = psData.programStageSections[0];\n                }\n                if (!targetSection.dataElements) {\n                  targetSection.dataElements = [];\n                }\n\n                // Add all missing data elements to the section\n                missingFromSections.forEach(deId => {\n                  targetSection.dataElements.push({\n                    id: deId\n                  });\n                });\n              }\n            }\n\n            // Only update if there are changes\n            if (missingFromProgramStage.length > 0 || needsSectionUpdate) {\n              const updateResp = await fetch(`${baseUrl}/api/programStages/${programStageId}`, {\n                method: 'PUT',\n                credentials: 'include',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(psData)\n              });\n              if (!updateResp.ok) {\n                const errorText = await updateResp.text();\n                console.error('Failed to update program stage:', errorText);\n              } else {\n                console.log(`Successfully updated program stage: ${missingFromProgramStage.length} added to programStageDataElements, ${needsSectionUpdate ? 'sections updated' : 'no section changes'}`);\n              }\n            }\n          }\n        } catch (e) {\n          console.error('Error linking data elements to program stage:', e);\n        }\n      }\n      if (setLoadingMessage) {\n        setLoadingMessage('Converting CSV to tracker format...');\n      }\n      setProgress(50);\n\n      // Convert CSV to tracker format\n      // projectArea = Program ID, programmeArea = Org Unit (Level 3)\n      const trackerPayload = convertCsvToTrackerFormat({\n        csvText,\n        formData: {\n          projectArea,\n          programmeArea,\n          thematicArea\n        },\n        dataElementMap,\n        programStageId\n      });\n      if (setLoadingMessage) {\n        setLoadingMessage('Preparing data for upload...');\n      }\n      setProgress(70);\n\n      // Convert to file/blob\n      const jsonBlob = convertPayloadToFile(trackerPayload);\n\n      // Create a File object from the blob\n      fileToUpload = new File([jsonBlob], 'converted-events.json', {\n        type: 'application/json'\n      });\n      uploadFormat = 'json';\n    } catch (error) {\n      console.error('Error converting CSV:', error);\n      setProgress(0);\n      if (setLoadingMessage) {\n        setLoadingMessage('');\n      }\n      return {\n        [FORM_ERROR]: [`Failed to convert CSV: ${error.message || 'Unknown error occurred'}`]\n      };\n    }\n  }\n\n  // send xhr\n  const apiBaseUrl = `${baseUrl}/api/tracker`;\n  const params = [`async=${isAsync}`, `importMode=${dryRun ? 'validate' : 'commit'}`, `dataElementIdScheme=${dataElementIdScheme}`, `orgUnitIdScheme=${orgUnitIdScheme}`, `idScheme=${idScheme}`].join('&');\n  const url = `${apiBaseUrl}?${params}`;\n  if (setLoadingMessage) {\n    const mode = dryRun ? 'validation' : 'import';\n    setLoadingMessage(`Starting ${mode}...`);\n  }\n  try {\n    await uploadFile({\n      url,\n      file: fileToUpload,\n      format: uploadFormat,\n      type: 'TRACKER_IMPORT_JOB',\n      isAsync,\n      setProgress,\n      addEntry: (id, entry) => addTask('event', id, {\n        ...entry,\n        jobDetails: values\n      })\n    });\n    if (setLoadingMessage) {\n      setLoadingMessage('');\n    }\n    return jobStartedMessage;\n  } catch (e) {\n    const errors = [e.message || e.toString() || 'An error occurred during upload'];\n    if (setLoadingMessage) {\n      setLoadingMessage('');\n    }\n    return {\n      [FORM_ERROR]: errors\n    };\n  } finally {\n    setShowFullSummaryTask(true);\n    setProgress(0);\n  }\n};\nexport { onImport, analyzeCSVForDataElements, createMissingDataElements, fetchProgramMetadata };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"App_container__KkHQY\",\"sidebar\":\"App_sidebar__EbNVl\",\"content\":\"App_content__MxC6Z\",\"corelytics_sidebar\":\"App_corelytics_sidebar__UQ+q2\",\"ant-menu-item\":\"App_ant-menu-item__XNXWL\",\"heading\":\"App_heading__21opY\",\"titBar\":\"App_titBar__B1vNp\",\"ant-menu-item-selected\":\"App_ant-menu-item-selected__jWI03\",\"logo\":\"App_logo__h5EGN\",\"menu\":\"App_menu__Y4oQE\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nconst createStyle = (width, height) => ({\n  width: width || 24,\n  height: height || 24,\n  display: 'inline-block',\n  fill: 'currentColor',\n  color: 'currentColor',\n  userSelect: 'none'\n});\nexport const MetadataImportIcon = ({\n  width,\n  height\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  style: createStyle(width, height),\n  \"data-test\": \"icon-metadataimport\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.039 8.968l-3.961-3.968h1.968s.991-3.178-2.985-5c6.191.222 6.972 5 6.972 5h1.967l-3.961 3.968zm6.461 5.575l-.342.195v1.717l.342-.195v-1.717zm-.844.481l-.35.199v1.717l.35-.199v-1.717zm.906-10.024l-1.306 1.55 1.62.919-6.859 3.698-8.86-5.138 4.436-2.685c-.234-.5-.626-.989-1.313-1.338l-5.124 2.978-3.156 5.487 2 1.106v5.445l12.25 6.978 9.75-5.551v-11.508l-3.438-1.941zm-16.624 2.688l7.897 4.54-1.192 2.091-7.872-4.605 1.167-2.026zm9.062 13.298l-9-5.126v-3.112l7.377 4.319 1.623-2.845v6.764zm9-3.7l-7 3.985v-8.361l7-3.773v8.149zm-4.907-.802l-.349.199v1.713l.349-.195v-1.717zm.584-.333l-.343.195v1.717l.343-.195v-1.717zm1.395-.794l-.343.195v1.717l.343-.195v-1.717zm-.574.327l-.344.196v1.717l.344-.196v-1.717z\"\n}));\nexport const MetadataExportIcon = ({\n  width,\n  height\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  style: createStyle(width, height),\n  \"data-test\": \"icon-metadataexport\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13.904 9c-3.514-3.984-.1-7.598-.1-7.598l-1.393-1.389 5.589-.013v5.607l-1.372-1.391c0 .001-3.581.706-2.724 4.784zm5.752 6.024l-.35.199v1.717l.35-.199v-1.717zm.844-.481l-.342.195v1.717l.342-.195v-1.717zm-3.407 1.941l-.349.199v1.713l.349-.195v-1.717zm1.979-1.127l-.343.195v1.717l.343-.195v-1.717zm.949-10.673v2.295l.855.489-6.859 3.698-8.86-5.138 6.374-3.654-1.5-1.406-6.864 3.97-3.167 5.533 2 1.106v5.445l12.25 6.978 9.75-5.551v-11.508l-3.979-2.257zm-16.083 3.004l7.897 4.54-1.193 2.091-7.871-4.605 1.167-2.026zm9.062 13.298l-9-5.126v-3.112l5.632 3.297 1.746 1.022 1.002-1.757.62-1.088v6.764zm9-3.7l-7 3.985v-8.361l7-3.773v8.149zm-4.323-1.135l-.343.195v1.717l.343-.195v-1.717zm.821-.467l-.344.196v1.717l.344-.196v-1.717z\"\n}));\nexport const MetadataDependencyExportIcon = ({\n  width,\n  height\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  style: createStyle(width, height),\n  \"data-test\": \"icon-metadatadependencyexport\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.949 16.132h2.332c-1.092 1.728-3.605 3.638-6.281 3.852v-8.984h3v-2h-3v-1.103c0-2.39 2-2.619 2-4.897 0-1.654-1.346-3-3-3s-3 1.346-3 3c0 2.297 2 2.487 2 4.897v1.103h-3v2h3v9c-2.639-.18-5.133-2.053-6.281-3.868h2.332l-5.051-3.132v5.912l1.269-1.8c2.702 4.503 6.379 4.305 8.731 6.888 2.352-2.583 6.029-2.385 8.731-6.889l1.269 1.8v-5.911l-5.051 3.132zm-5.949-13.132c0-.551.449-1 1-1s1 .449 1 1-.448 1-1 1-1-.449-1-1z\"\n}));\nexport const DataIcon = ({\n  width,\n  height\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  style: createStyle(width, height),\n  \"data-test\": \"icon-data\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6.083 4c1.38 1.612 2.578 3 4.917 3h11v13h-20v-16h4.083zm.917-2h-7v20h24v-17h-13c-1.629 0-2.305-1.058-4-3z\"\n}));\nexport const EventIcon = ({\n  width,\n  height\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  style: createStyle(width, height),\n  \"data-test\": \"icon-event\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20 20h-4v-4h4v4zm-6-10h-4v4h4v-4zm6 0h-4v4h4v-4zm-12 6h-4v4h4v-4zm6 0h-4v4h4v-4zm-6-6h-4v4h4v-4zm16-8v22h-24v-22h3v1c0 1.103.897 2 2 2s2-.897 2-2v-1h10v1c0 1.103.897 2 2 2s2-.897 2-2v-1h3zm-2 6h-20v14h20v-14zm-2-7c0-.552-.447-1-1-1s-1 .448-1 1v2c0 .552.447 1 1 1s1-.448 1-1v-2zm-14 2c0 .552-.447 1-1 1s-1-.448-1-1v-2c0-.552.447-1 1-1s1 .448 1 1v2z\"\n}));\nexport const GeometryIcon = ({\n  width,\n  height\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  style: createStyle(width, height),\n  \"data-test\": \"icon-gml\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13.144 8.171c-.035-.066.342-.102.409-.102.074.009-.196.452-.409.102zm-2.152-3.072l.108-.031c.064.055-.072.095-.051.136.086.155.021.248.008.332-.014.085-.104.048-.149.093-.053.066.258.075.262.085.011.033-.375.089-.304.171.096.136.824-.195.708-.176.225-.113.029-.125-.097-.19-.043-.215-.079-.547-.213-.68l.088-.102c-.206-.299-.36.362-.36.362zm13.008 6.901c0 6.627-5.373 12-12 12-6.628 0-12-5.373-12-12s5.372-12 12-12c6.627 0 12 5.373 12 12zm-8.31-5.371c-.006-.146-.19-.284-.382-.031-.135.174-.111.439-.184.557-.104.175.567.339.567.174.025-.277.732-.063.87-.025.248.069.643-.226.211-.381-.355-.13-.542-.269-.574-.523 0 0 .188-.176.106-.166-.218.027-.614.786-.614.395zm6.296 5.371c0-1.035-.177-2.08-.357-2.632-.058-.174-.189-.312-.359-.378-.256-.1-1.337.597-1.5.254-.107-.229-.324.146-.572.008-.12-.066-.454-.515-.605-.46-.309.111.474.964.688 1.076.201-.152.852-.465.992-.038.268.804-.737 1.685-1.251 2.149-.768.694-.624-.449-1.147-.852-.275-.211-.272-.66-.55-.815-.124-.07-.693-.725-.688-.813l-.017.166c-.094.071-.294-.268-.315-.321 0 .295.48.765.639 1.001.271.405.416.995.748 1.326.178.178.858.914 1.035.898.193-.017.803-.458.911-.433.644.152-1.516 3.205-1.721 3.583-.169.317.138 1.101.113 1.476-.029.433-.37.573-.693.809-.346.253-.265.745-.556.925-.517.318-.889 1.353-1.623 1.348-.216-.001-1.14.36-1.261.007-.094-.256-.22-.45-.353-.703-.13-.248-.015-.505-.173-.724-.109-.152-.475-.497-.508-.677-.002-.155.117-.626.28-.708.229-.117.044-.458.016-.656-.048-.354-.267-.646-.53-.851-.389-.299-.188-.537-.097-.964 0-.204-.124-.472-.398-.392-.564.164-.393-.44-.804-.413-.296.021-.538.209-.813.292-.346.104-.7-.082-1.042-.125-1.407-.178-1.866-1.786-1.499-2.946.037-.19-.114-.542-.048-.689.158-.352.48-.747.762-1.014.158-.15.361-.112.547-.229.287-.181.291-.553.572-.781.4-.325.946-.318 1.468-.388.278-.037 1.336-.266 1.503-.06 0 .038.191.604-.019.572.433.023 1.05.749 1.461.579.211-.088.134-.736.567-.423.262.188 1.436.272 1.68.069.15-.124.234-.93.052-1.021.116.115-.611.124-.679.098-.12-.044-.232.114-.425.025.116.055-.646-.354-.218-.667-.179.131-.346-.037-.539.107-.133.108.062.18-.128.274-.302.153-.53-.525-.644-.602-.116-.076-1.014-.706-.77-.295l.789.785c-.039.025-.207-.286-.207-.059.053-.135.02.579-.104.347-.055-.089.09-.139.006-.268 0-.085-.228-.168-.272-.226-.125-.155-.457-.497-.637-.579-.05-.023-.764.087-.824.11-.07.098-.13.201-.179.311-.148.055-.287.126-.419.214l-.157.353c-.068.061-.765.291-.769.3.029-.075-.487-.171-.453-.321.038-.165.213-.68.168-.868-.048-.197 1.074.284 1.146-.235.029-.225.046-.487-.313-.525.068.008.695-.246.799-.36.146-.168.481-.442.724-.442.284 0 .223-.413.354-.615.131.053-.07.376.087.507-.01-.103.445.057.489.033.104-.054.684-.022.594-.294-.1-.277.051-.195.181-.253-.022.009.34-.619.402-.413-.043-.212-.421.074-.553.063-.305-.024-.176-.52-.061-.665.089-.115-.243-.256-.247-.036-.006.329-.312.627-.241 1.064.108.659-.735-.159-.809-.114-.28.17-.509-.214-.364-.444.148-.235.505-.224.652-.476.104-.178.225-.385.385-.52.535-.449.683-.09 1.216-.041.521.048.176.124.104.324-.069.19.286.258.409.099.07-.092.229-.323.298-.494.089-.222.901-.197.334-.536-.374-.223-2.004-.672-3.096-.672-.236 0-.401.263-.581.412-.356.295-1.268.874-1.775.698-.519-.179-1.63.66-1.808.666-.065.004.004-.634.358-.681-.153.023 1.247-.707 1.209-.859-.046-.18-2.799.822-2.676 1.023.059.092.299.092-.016.294-.18.109-.372.801-.541.801-.505.221-.537-.435-1.099.409l-.894.36c-1.328 1.411-2.247 3.198-2.58 5.183-.013.079.334.226.379.28.112.134.112.712.167.901.138.478.479.744.74 1.179.154.259.41.914.329 1.186.108-.178 1.07.815 1.246 1.022.414.487.733 1.077.061 1.559-.217.156.33 1.129.048 1.368l-.361.093c-.356.219-.195.756.021.982 1.818 1.901 4.38 3.087 7.22 3.087 5.517 0 9.989-4.472 9.989-9.989zm-11.507-6.357c.125-.055.293-.053.311-.22.015-.148.044-.046.08-.1.035-.053-.067-.138-.11-.146-.064-.014-.108.069-.149.104l-.072.019-.068.087.008.048-.087.106c-.085.084.002.139.087.102z\"\n}));\nexport const LogoIcon = ({\n  width,\n  height\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  style: createStyle(width, height),\n  \"data-test\": \"icon-logo\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9 3L5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}));\nexport const PlusIcon = ({\n  width,\n  height\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  style: createStyle(width, height),\n  \"data-test\": \"icon-plus\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}));\nexport const MinusIcon = ({\n  width,\n  height\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  style: createStyle(width, height),\n  \"data-test\": \"icon-minus\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13H5v-2h14v2z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}));\nexport const TasksIcon = ({\n  width,\n  height\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  style: createStyle(width, height),\n  \"data-test\": \"icon-tasks\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 2h-4.2C14.4.8 13.3 0 12 0c-1.3 0-2.4.8-2.8 2H5C4 2 3 3 3 4v16c0 1 1 2 2 2h14c1 0 2-1 2-2V4c0-1-1-2-2-2zm-7 0c.6 0 1 .5 1 1s-.5 1-1 1-1-.5-1-1 .5-1 1-1zm7 18H5V4h2v3h10V4h2v16z\"\n}));\nexport const TEIIcon = ({\n  width,\n  height\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  style: createStyle(width, height)\n}, /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13 1l.001 3.062A8.004 8.004 0 0 1 19.938 11H23v2l-3.062.001a8.004 8.004 0 0 1-6.937 6.937L13 23h-2v-3.062a8.004 8.004 0 0 1-6.938-6.937L1 13v-2h3.062A8.004 8.004 0 0 1 11 4.062V1h2zm-1 9a2 2 0 1 0 0 4 2 2 0 0 0 0-4z\"\n}));\nexport const ImportIcon = ({\n  width,\n  height\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  style: createStyle(width, height)\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m18 13c1.1045695 0 2 .8954305 2 2v3c0 1.1045695-.8954305 2-2 2h-3c-1.1045695 0-2-.8954305-2-2v-3c0-1.1045695.8954305-2 2-2zm-9 0c1.1045695 0 2 .8954305 2 2v3c0 1.1045695-.8954305 2-2 2h-3c-1.1045695 0-2-.8954305-2-2v-3c0-1.1045695.8954305-2 2-2zm9 2h-3v3h3zm-9 0h-3v3h3zm-1.38710056-12.29029539.09420734.08318861 3.50000002 3.5c.3604839.36048396.3882135.92771502.0831886 1.32000622l-.0831886.09420734-3.50000002 3.50000002c-.39052429.3905243-1.02368927.3905243-1.41421356 0-.36048396-.360484-.3882135-.927715-.08318861-1.32000624l.08318861-.09420734 1.79210678-1.79289322h-5.085c-.55228475 0-1-.44771525-1-1 0-.51283584.38604019-.93550716.88337887-.99327227l.11662113-.00672773h5.085l-1.79210678-1.79289322c-.36048396-.36048396-.3882135-.92771502-.08318861-1.32000622l.08318861-.09420734c.36048396-.36048396.92771502-.3882135 1.32000622-.08318861zm10.38710056 1.29029539c1.1045695 0 2 .8954305 2 2v3c0 1.1045695-.8954305 2-2 2h-3c-1.1045695 0-2-.8954305-2-2v-3c0-1.1045695.8954305-2 2-2zm0 2h-3v3h3z\"\n}));\nexport const ExportIcon = ({\n  width,\n  height\n}) => /*#__PURE__*/React.createElement(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  style: createStyle(width, height)\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m18.6128994 12.7097046.0942074.0831886 3.5 3.5c.3604839.360484.3882135.927715.0831886 1.3200062l-.0831886.0942074-3.5 3.5c-.3905243.3905243-1.0236893.3905243-1.4142136 0-.3604839-.360484-.3882135-.927715-.0831886-1.3200062l.0831886-.0942074 1.7921068-1.7928932h-5.085c-.5522847 0-1-.4477153-1-1 0-.5128358.3860402-.9355072.8833789-.9932723l.1166211-.0067277h5.085l-1.7921068-1.7928932c-.3604839-.360484-.3882135-.927715-.0831886-1.3200062l.0831886-.0942074c.360484-.3604839.927715-.3882135 1.3200062-.0831886zm-9.6128994.2902954c1.1045695 0 2 .8954305 2 2v3c0 1.1045695-.8954305 2-2 2h-3c-1.1045695 0-2-.8954305-2-2v-3c0-1.1045695.8954305-2 2-2zm0 2h-3v3h3zm0-11c1.1045695 0 2 .8954305 2 2v3c0 1.1045695-.8954305 2-2 2h-3c-1.1045695 0-2-.8954305-2-2v-3c0-1.1045695.8954305-2 2-2zm9 0c1.1045695 0 2 .8954305 2 2v3c0 1.1045695-.8954305 2-2 2h-3c-1.1045695 0-2-.8954305-2-2v-3c0-1.1045695.8954305-2 2-2zm-9 2h-3v3h3zm9 0h-3v3h3z\"\n}));\nconst iconPropTypes = {\n  height: PropTypes.number,\n  width: PropTypes.number\n};\nDataIcon.propTypes = iconPropTypes;\nEventIcon.propTypes = iconPropTypes;\nGeometryIcon.propTypes = iconPropTypes;\nLogoIcon.propTypes = iconPropTypes;\nMetadataDependencyExportIcon.propTypes = iconPropTypes;\nMetadataExportIcon.propTypes = iconPropTypes;\nMetadataImportIcon.propTypes = iconPropTypes;\nMinusIcon.propTypes = iconPropTypes;\nPlusIcon.propTypes = iconPropTypes;\nTasksIcon.propTypes = iconPropTypes;\nTEIIcon.propTypes = iconPropTypes;\nImportIcon.propTypes = iconPropTypes;\nExportIcon.propTypes = iconPropTypes;","import PropTypes from 'prop-types';\nconst optionPropType = PropTypes.exact({\n  value: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired\n});\nconst optionsPropType = PropTypes.arrayOf(optionPropType);\nexport { optionPropType, optionsPropType };","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectFieldFF } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { fetchAttributes } from '../../utils/helper.js';\nimport { optionsPropType } from '../../utils/options.js';\nimport { StyledField } from '../index.js';\nconst DataElementIdScheme = ({\n  name,\n  label,\n  dataElementIdSchemeOptions,\n  dataTest\n}) => {\n  const {\n    baseUrl\n  } = useConfig();\n  const [loading, setLoading] = useState(true);\n  const [schemes, setSchemes] = useState([]);\n  const [error, setError] = useState(undefined);\n  useEffect(() => {\n    fetchAttributes(`${baseUrl}/api/`, 'dataElementAttribute').then(attributes => setSchemes(attributes)).catch(error => setError(error)).finally(() => setLoading(false));\n  }, []);\n  const validationText = error && `${i18n.t('Something went wrong when loading the additional data element ID schemes')} : ${error.message}`;\n  const options = [...dataElementIdSchemeOptions, ...schemes];\n  return /*#__PURE__*/React.createElement(StyledField, {\n    component: SingleSelectFieldFF,\n    name: name,\n    label: label,\n    options: options,\n    dataTest: dataTest,\n    loading: loading,\n    validationText: validationText,\n    error: !!error\n  });\n};\nDataElementIdScheme.propTypes = {\n  dataElementIdSchemeOptions: optionsPropType.isRequired,\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired\n};\nexport { DataElementIdScheme };","import { InputField } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst DatePicker = ({\n  name,\n  error,\n  label,\n  date,\n  onChange,\n  dataTest\n}) => {\n  const onChangeHelper = ({\n    value\n  }) => onChange(value);\n  return /*#__PURE__*/React.createElement(InputField, {\n    type: \"date\",\n    name: name,\n    value: date,\n    label: label,\n    onChange: onChangeHelper,\n    inputWidth: \"200px\",\n    error: !!error,\n    validationText: error,\n    dataTest: dataTest\n  });\n};\nDatePicker.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  date: PropTypes.oneOfType([PropTypes.instanceOf(Date), PropTypes.string]).isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  error: PropTypes.string\n};\nexport { DatePicker };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { DatePicker } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst OPTIONAL_DATE_VALIDATOR = date => date ? DATE_VALIDATOR(date) : undefined;\nconst DATE_VALIDATOR = date => new Date(date) == 'Invalid Date' ? i18n.t('Invalid date') : undefined;\nconst DATE_BEFORE_VALIDATOR = (date1, date2) => date1 > date2 ? i18n.t('Start date must be before end date') : undefined;\nconst DATE_AFTER_VALIDATOR = (date2, date1) => date2 < date1 ? i18n.t('End date must be after start date') : undefined;\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta: {\n    error\n  },\n  inputName,\n  ...rest\n}) => /*#__PURE__*/React.createElement(DatePicker, _extends({\n  name: inputName,\n  error: error,\n  date: value,\n  onChange: onChange\n}, rest));\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.string,\n    onChange: PropTypes.func\n  }).isRequired,\n  inputName: PropTypes.string.isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\nconst DatePickerField = ({\n  name,\n  validator,\n  ...rest\n}) => /*#__PURE__*/React.createElement(Field, _extends({\n  component: Wrapper,\n  name: name,\n  validate: validator,\n  inputName: name\n}, rest));\nDatePickerField.propTypes = {\n  name: PropTypes.string.isRequired,\n  validator: PropTypes.func\n};\nexport { DatePickerField, DATE_VALIDATOR, DATE_BEFORE_VALIDATOR, DATE_AFTER_VALIDATOR, OPTIONAL_DATE_VALIDATOR };","import { SingleSelectFieldFF } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { optionsPropType } from '../../utils/options.js';\nimport { StyledField } from '../index.js';\nconst EventIdScheme = ({\n  name,\n  label,\n  eventIdSchemeOptions,\n  dataTest\n}) => {\n  return /*#__PURE__*/React.createElement(StyledField, {\n    component: SingleSelectFieldFF,\n    name: name,\n    label: label,\n    options: eventIdSchemeOptions,\n    dataTest: dataTest\n  });\n};\nEventIdScheme.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  eventIdSchemeOptions: optionsPropType.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired\n};\nexport { EventIdScheme };","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, FileInputFieldFF } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { FormField } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst SINGLE_FILE_VALIDATOR = files => !files || files.length == 0 ? i18n.t('Please select a file') : undefined;\nconst FileUpload = ({\n  initialValue,\n  required,\n  name,\n  label,\n  helpText,\n  accept = '*',\n  validator,\n  dataTest\n}) => {\n  return /*#__PURE__*/React.createElement(FormField, {\n    label: label,\n    required: required,\n    dataTest: dataTest\n  }, /*#__PURE__*/React.createElement(Field, {\n    component: FileInputFieldFF,\n    name: name,\n    accept: accept,\n    required: required,\n    initialValue: initialValue,\n    validate: validator,\n    dataTest: `${dataTest}-fileinput`,\n    helpText: helpText\n  }));\n};\nFileUpload.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  accept: PropTypes.string,\n  helpText: PropTypes.string,\n  initialValue: PropTypes.instanceOf(File),\n  required: PropTypes.bool,\n  validator: PropTypes.func\n};\nexport { FileUpload, SINGLE_FILE_VALIDATOR };","import { AlertStack, AlertBar } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst FormAlerts = ({\n  alerts,\n  dataTest\n}) => /*#__PURE__*/React.createElement(AlertStack, {\n  \"data-test\": dataTest\n}, alerts && alerts.map(a => /*#__PURE__*/React.createElement(AlertBar, {\n  key: `alert-${a.id}`,\n  warning: a.warning,\n  info: a.info,\n  critical: a.critical,\n  success: a.success,\n  duration: 5000\n}, a.message)));\nFormAlerts.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  alerts: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    message: PropTypes.string.isRequired,\n    critical: PropTypes.bool,\n    info: PropTypes.bool,\n    warning: PropTypes.bool\n  }))\n};\nexport { FormAlerts };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"FormField_container__6QIDT\",\"label\":\"FormField_label__NMiRO\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './FormField.module.css';\nconst FormField = ({\n  dataTest,\n  label,\n  required = false,\n  children\n}) => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.label\n  }, label, required && /*#__PURE__*/React.createElement(\"span\", null, \" *\")), children);\n};\nFormField.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  children: PropTypes.node,\n  required: PropTypes.bool\n};\nexport { FormField };","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectFieldFF } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { fetchAttributes } from '../../utils/helper.js';\nimport { optionsPropType } from '../../utils/options.js';\nimport { StyledField } from '../index.js';\nconst attributeFoundIn = (attribute, collection) => !!collection.find(({\n  value\n}) => value === attribute.value);\nconst IdScheme = ({\n  name,\n  label,\n  idSchemeOptions,\n  dataTest\n}) => {\n  const {\n    baseUrl\n  } = useConfig();\n  const [loading, setLoading] = useState(true);\n  const [schemes, setSchemes] = useState([]);\n  const [error, setError] = useState(undefined);\n  useEffect(() => {\n    const f = async () => {\n      let err;\n      const dataElementAttributes = await fetchAttributes(`${baseUrl}/api/`, 'dataElementAttribute').catch(error => err = error);\n      const organisationUnitAttributes = await fetchAttributes(`${baseUrl}/api/`, 'organisationUnitAttribute').catch(error => err = error);\n      setError(err);\n      if (!err) {\n        const sharedAttributes = dataElementAttributes.reduce((shared, attribute) => {\n          const foundInOrgUnits = attributeFoundIn(attribute, organisationUnitAttributes);\n          return foundInOrgUnits ? [...shared, attribute] : shared;\n        }, []);\n        setSchemes(sharedAttributes);\n      }\n      setLoading(false);\n    };\n    f();\n  }, []);\n  const validationText = error && `${i18n.t('Something went wrong when loading the additional ID schemes')} : ${error.message}`;\n  const options = [...idSchemeOptions, ...schemes];\n  return /*#__PURE__*/React.createElement(StyledField, {\n    component: SingleSelectFieldFF,\n    name: name,\n    label: label,\n    options: options,\n    dataTest: dataTest,\n    loading: loading,\n    validationText: validationText,\n    error: !!error\n  });\n};\nIdScheme.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  idSchemeOptions: optionsPropType.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired\n};\nexport { IdScheme };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ImportButtonStrip_container__uUrJQ\",\"dryRun\":\"ImportButtonStrip_dryRun__MG8gz\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip, Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './ImportButtonStrip.module.css';\nconst DRYRUN_HELPTEXT = i18n.t('A dry run tests the import settings without importing any data');\nconst ImportButtonStrip = ({\n  dryRunDataTest,\n  importDataTest,\n  form,\n  dataTest\n}) => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(ButtonStrip, {\n    dataTest: `${dataTest}-button-strip`\n  }, /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    type: \"submit\",\n    onClick: () => form.change('dryRun', true),\n    dataTest: dryRunDataTest,\n    className: styles.dryRun\n  }, i18n.t('Start dry run')), /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    type: \"submit\",\n    onClick: () => form.change('dryRun', false),\n    dataTest: importDataTest\n  }, i18n.t('Start import'))), /*#__PURE__*/React.createElement(Help, {\n    dataTest: `${dataTest}-help`\n  }, DRYRUN_HELPTEXT));\n};\nImportButtonStrip.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  dryRunDataTest: PropTypes.string.isRequired,\n  form: PropTypes.object.isRequired,\n  importDataTest: PropTypes.string.isRequired\n};\nexport { ImportButtonStrip };","import React from 'react';\nconst UserContext = /*#__PURE__*/React.createContext(undefined);\nexport { UserContext };","import React from 'react';\nconst TaskContext = /*#__PURE__*/React.createContext(undefined);\nconst getNewestTask = tasks => Object.keys(tasks).map(k => tasks[k]).sort((a, b) => a.created < b.created ? 1 : -1)[0];\nexport { TaskContext, getNewestTask };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { DataIcon, EventIcon, GeometryIcon, MetadataImportIcon, TEIIcon } from '../components/Icon/Icon.js';\nconst categoryTypes = [{\n  key: 'data',\n  importType: 'DATAVALUE_IMPORT',\n  icon: /*#__PURE__*/React.createElement(DataIcon, null),\n  label: i18n.t('Data')\n}, {\n  key: 'event',\n  importType: 'EVENT_IMPORT',\n  icon: /*#__PURE__*/React.createElement(EventIcon, null),\n  label: i18n.t('Event')\n}, {\n  key: 'geojson',\n  importType: 'GEOJSON_IMPORT',\n  icon: /*#__PURE__*/React.createElement(GeometryIcon, null),\n  label: i18n.t('GeoJSON')\n}, {\n  key: 'gml',\n  importType: 'GML_IMPORT',\n  icon: /*#__PURE__*/React.createElement(GeometryIcon, null),\n  label: i18n.t('GML')\n}, {\n  key: 'metadata',\n  importType: 'METADATA_IMPORT',\n  icon: /*#__PURE__*/React.createElement(MetadataImportIcon, null),\n  label: i18n.t('Metadata')\n}, {\n  key: 'tei',\n  importType: 'TEI_IMPORT',\n  icon: /*#__PURE__*/React.createElement(TEIIcon, null),\n  label: i18n.t('Tracked entity')\n}];\nconst allCategories = categoryTypes.map(({\n  importType\n}) => importType);\nexport { categoryTypes, allCategories };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"JobOverview_container__dtx-5\",\"chips\":\"JobOverview_chips__svCo8\",\"Menu\":\"JobOverview_Menu__JZPBX\",\"items\":\"JobOverview_items__v1umQ\",\"summary\":\"JobOverview_summary__nq2zO\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './JobOverview.module.css';\nconst ChipContainer = ({\n  children\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.chips,\n  \"data-test\": \"job-overview-chips\"\n}, children);\nChipContainer.propTypes = {\n  children: PropTypes.node\n};\nexport { ChipContainer };","import { categoryTypes } from '../../utils/tasks.js';\nconst categoryTypesObj = categoryTypes.reduce((acc, cur) => {\n  acc[cur.importType] = cur;\n  return acc;\n}, {});\nconst jobToPath = job => {\n  var _categoryTypesObj$job;\n  return {\n    pathname: `/import/${(_categoryTypesObj$job = categoryTypesObj[job.importType]) === null || _categoryTypesObj$job === void 0 ? void 0 : _categoryTypesObj$job.key}`,\n    query: {\n      id: job.id\n    }\n  };\n};\nexport { categoryTypesObj, jobToPath };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"MenuLabel_container__mlQrR\",\"filename\":\"MenuLabel_filename__nDhZl\",\"subtitle\":\"MenuLabel_subtitle__CR5af\",\"date\":\"MenuLabel_date__Gpvam\"};","import i18n from '@dhis2/d2-i18n';\nimport { Tag } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { jsDateToString } from '../../../utils/helper.js';\nimport styles from './MenuLabel.module.css';\nconst MenuLabel = ({\n  task\n}) => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    \"data-test\": `job-overview-menu-label-${task.id}`\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filename\n  }, task.jobDetails.files[0].name), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.subtitle\n  }, task.completed ? /*#__PURE__*/React.createElement(Tag, {\n    positive: true\n  }, i18n.t('Completed')) : /*#__PURE__*/React.createElement(Tag, null, i18n.t('In progress')), ' ', /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.date\n  }, jsDateToString(task.created))));\n};\nMenuLabel.propTypes = {\n  task: PropTypes.shape({\n    completed: PropTypes.bool.isRequired,\n    created: PropTypes.instanceOf(Date).isRequired,\n    id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n    jobDetails: PropTypes.object.isRequired\n  }).isRequired\n};\nexport { MenuLabel };","import i18n from '@dhis2/d2-i18n';\nimport { Button, Chip, Menu, MenuItem } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useContext, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { TaskContext } from '../../contexts/index.js';\nimport { categoryTypes } from '../../utils/tasks.js';\nimport { JobSummary } from '../index.js';\nimport { ChipContainer } from './ChipContainer.js';\nimport { jobToPath } from './helper.js';\nimport styles from './JobOverview.module.css';\nimport { MenuLabel } from './MenuLabel/MenuLabel.js';\nconst JobOverview = ({\n  activeTypes,\n  setActiveTypes,\n  selectedJob,\n  setSelectedJob\n}) => {\n  const {\n    tasks\n  } = useContext(TaskContext);\n  const onChipClick = key => {\n    if (activeTypes.includes(key)) {\n      setActiveTypes([...activeTypes].filter(k => k != key));\n    } else {\n      setActiveTypes([...activeTypes, key]);\n    }\n  };\n\n  // all tasks sorted by type, createdAt (descending)\n  const allTasks = categoryTypes.map(({\n    key: type\n  }) => Object.keys(tasks[type]).map(id => tasks[type][id])).flat().sort((a, b) => {\n    if (a.importType > b.importType) {\n      return -1;\n    }\n    if (a.createdAt > b.createdAt) {\n      return -1;\n    }\n  });\n  const filteredTasks = allTasks.filter(t => activeTypes.includes(t.importType));\n\n  // set selected job to first job if\n  // first time user visits the job overview page\n  useEffect(() => {\n    if (selectedJob === undefined && allTasks.length > 0) {\n      setSelectedJob(allTasks[0]);\n    }\n  }, []);\n  if (allTasks.length === 0) {\n    return /*#__PURE__*/React.createElement(\"p\", null, i18n.t('No jobs started yet.'));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    \"data-test\": \"job-overview-container\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.items,\n    \"data-test\": \"job-overview-tasks\"\n  }, /*#__PURE__*/React.createElement(Menu, {\n    className: styles.Menu\n  }, /*#__PURE__*/React.createElement(ChipContainer, null, categoryTypes.map(({\n    key,\n    importType,\n    label\n  }) => /*#__PURE__*/React.createElement(Chip, {\n    dense: true,\n    onClick: () => onChipClick(importType),\n    selected: activeTypes.includes(importType),\n    key: key,\n    dataTest: `job-overview-chips-${key}`\n  }, label))), filteredTasks.map(t => /*#__PURE__*/React.createElement(MenuItem, {\n    key: `job-overview-tasks-${t.id}`,\n    active: selectedJob && selectedJob.id === t.id,\n    label: /*#__PURE__*/React.createElement(MenuLabel, {\n      task: t\n    }),\n    onClick: () => setSelectedJob(t)\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.summary,\n    \"data-test\": \"job-overview-summary\"\n  }, selectedJob && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(JobSummary, {\n    task: selectedJob,\n    dataTest: \"job-summary-container\",\n    showFileDetails: false,\n    showJobDetails: true\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: jobToPath(selectedJob)\n  }, /*#__PURE__*/React.createElement(Button, {\n    primary: true\n  }, i18n.t('Recreate job'))))));\n};\nJobOverview.propTypes = {\n  activeTypes: PropTypes.arrayOf(PropTypes.string).isRequired,\n  setActiveTypes: PropTypes.func.isRequired,\n  setSelectedJob: PropTypes.func.isRequired,\n  selectedJob: PropTypes.object\n};\nexport { JobOverview, categoryTypes };","import i18n from '@dhis2/d2-i18n';\nimport { Table, TableBody, TableCell, TableHead, TableRow, TableRowHead, TableCellHead } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { FormField } from '../../index.js';\nconst valueToString = value => {\n  if (value instanceof File) {\n    return value.name;\n  } else if (Array.isArray(value)) {\n    return value.map(v => valueToString(v)).join(',');\n  } else if (value instanceof Object) {\n    return value.label;\n  }\n  return `${value}`;\n};\nconst Details = ({\n  details\n}) => {\n  return /*#__PURE__*/React.createElement(FormField, {\n    label: `${i18n.t('Job details')}`,\n    dataTest: \"job-summary-job-details\",\n    name: \"details\"\n  }, /*#__PURE__*/React.createElement(Table, null, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Key')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Value')))), /*#__PURE__*/React.createElement(TableBody, null, Object.keys(details).map(key => /*#__PURE__*/React.createElement(TableRow, {\n    key: `job-summary-job-details-${key}`\n  }, /*#__PURE__*/React.createElement(TableCell, null, key), /*#__PURE__*/React.createElement(TableCell, null, valueToString(details[key])))))));\n};\nDetails.propTypes = {\n  details: PropTypes.object.isRequired\n};\nexport { Details };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"JobSummary_container__Sc44L\",\"title\":\"JobSummary_title__xmv8y\",\"taskDetails\":\"JobSummary_taskDetails__MKmj+\",\"tags\":\"JobSummary_tags__R--jE\"};","import i18n from '@dhis2/d2-i18n';\nimport { Table, TableBody, TableCell, TableHead, TableRow, TableRowHead, TableCellHead } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { jsDateToString } from '../../../utils/helper.js';\nimport { FormField } from '../../index.js';\nconst Log = ({\n  events\n}) => {\n  return /*#__PURE__*/React.createElement(FormField, {\n    label: `${i18n.t('Log')}`,\n    dataTest: \"job-summary-log\",\n    name: \"log\"\n  }, /*#__PURE__*/React.createElement(Table, null, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Time')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Message')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('ID')))), /*#__PURE__*/React.createElement(TableBody, null, (events || null) && events.map((e, i) => /*#__PURE__*/React.createElement(TableRow, {\n    key: `job-summary-log-${e.id}-${i}`\n  }, /*#__PURE__*/React.createElement(TableCell, null, jsDateToString(e.date)), /*#__PURE__*/React.createElement(TableCell, null, e.text), /*#__PURE__*/React.createElement(TableCell, null, e.id))))));\n};\nconst eventPropType = PropTypes.shape({\n  date: PropTypes.instanceOf(Date).isRequired,\n  id: PropTypes.string.isRequired,\n  text: PropTypes.string.isRequired\n});\nLog.propTypes = {\n  events: PropTypes.arrayOf(eventPropType)\n};\nexport { Log };","import PropTypes from 'prop-types';\nconst statsPropTypeObj = {\n  deleted: PropTypes.number.isRequired,\n  ignored: PropTypes.number.isRequired,\n  total: PropTypes.number.isRequired,\n  updated: PropTypes.number.isRequired,\n  imported: PropTypes.number,\n  created: PropTypes.number\n};\nconst statsPropType = PropTypes.exact(statsPropTypeObj);\nconst getClassName = c => {\n  const s = c.split('.');\n  return s[s.length - 1];\n};\nconst typeReportParse = report => {\n  let allStats = [];\n  const allMessages = [];\n  Object.keys(report).forEach(i => {\n    const {\n      klass,\n      objectReports,\n      stats\n    } = report[i];\n    allStats = [...allStats, {\n      ...stats,\n      type: getClassName(klass)\n    }];\n    objectReports && objectReports.forEach(r => {\n      const {\n        uid,\n        errorReports\n      } = r;\n      errorReports && errorReports.forEach(e => {\n        allMessages.push({\n          uid,\n          type: getClassName(e.mainKlass),\n          property: e.errorProperty,\n          message: e.message\n        });\n      });\n    });\n  });\n  return {\n    stats: allStats,\n    messages: allMessages\n  };\n};\nconst messagesPropType = PropTypes.arrayOf(PropTypes.exact({\n  uid: PropTypes.string,\n  type: PropTypes.string,\n  property: PropTypes.string,\n  message: PropTypes.string\n}));\nexport { typeReportParse, statsPropType, statsPropTypeObj, messagesPropType };","import i18n from '@dhis2/d2-i18n';\nimport { Table, TableBody, TableCell, TableHead, TableRow, TableRowHead, TableCellHead } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst SingleStatusTable = ({\n  status,\n  description\n}) => /*#__PURE__*/React.createElement(Table, null, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Status')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Description')))), /*#__PURE__*/React.createElement(TableBody, null, /*#__PURE__*/React.createElement(TableRow, null, /*#__PURE__*/React.createElement(TableCell, null, status), /*#__PURE__*/React.createElement(TableCell, null, description))));\nSingleStatusTable.propTypes = {\n  description: PropTypes.string,\n  status: PropTypes.string\n};\nexport { SingleStatusTable };","import i18n from '@dhis2/d2-i18n';\nimport { Table, TableBody, TableCell, TableHead, TableRow, TableRowHead, TableCellHead } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { FormField } from '../../index.js';\nimport { statsPropType } from '../helper.js';\nimport { SingleStatusTable } from '../SingleStatusTable/SingleStatusTable.js';\nconst SingleSummary = ({\n  importType,\n  importCount,\n  status,\n  description,\n  conflicts,\n  validationReport,\n  id\n}) => {\n  var _ref, _importCount$imported, _validationReport$err;\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(FormField, {\n    label: id ? `${i18n.t('Summary')} #${id}` : i18n.t('Summary'),\n    dataTest: \"job-summary-single-summary\",\n    name: \"summary\"\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, status && description && /*#__PURE__*/React.createElement(SingleStatusTable, {\n    description: description,\n    status: status\n  }), /*#__PURE__*/React.createElement(Table, null, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Created')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Deleted')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Ignored')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Updated')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Total')))), /*#__PURE__*/React.createElement(TableBody, null, /*#__PURE__*/React.createElement(TableRow, null, /*#__PURE__*/React.createElement(TableCell, null, (_ref = (_importCount$imported = importCount === null || importCount === void 0 ? void 0 : importCount.imported) !== null && _importCount$imported !== void 0 ? _importCount$imported : importCount === null || importCount === void 0 ? void 0 : importCount.created) !== null && _ref !== void 0 ? _ref : '0'), /*#__PURE__*/React.createElement(TableCell, null, importCount === null || importCount === void 0 ? void 0 : importCount.deleted), /*#__PURE__*/React.createElement(TableCell, null, importCount === null || importCount === void 0 ? void 0 : importCount.ignored), /*#__PURE__*/React.createElement(TableCell, null, importCount === null || importCount === void 0 ? void 0 : importCount.updated), /*#__PURE__*/React.createElement(TableCell, null, importCount === null || importCount === void 0 ? void 0 : importCount.total)))))), !!(validationReport !== null && validationReport !== void 0 && (_validationReport$err = validationReport.errorReports) !== null && _validationReport$err !== void 0 && _validationReport$err.length) && /*#__PURE__*/React.createElement(FormField, {\n    label: `${i18n.t('Reports')}`,\n    dataTest: \"tracker-summary-reports\",\n    name: \"tracker-reports\"\n  }, /*#__PURE__*/React.createElement(Table, null, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('UID')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Error Code')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Message')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Tracker Type')))), /*#__PURE__*/React.createElement(TableBody, null, validationReport.errorReports.map((c, i) => {\n    var _c$warningCode;\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: `job-summary-report-${c.object}-${i}`\n    }, /*#__PURE__*/React.createElement(TableCell, null, c.uid), /*#__PURE__*/React.createElement(TableCell, null, /*#__PURE__*/React.createElement(\"a\", {\n      target: \"_blank\",\n      rel: \"noreferrer\",\n      href: \"https://docs.dhis2.org/en/develop/using-the-api/dhis-core-version-master/tracker.html#webapi_nti_error_codes\"\n    }, (_c$warningCode = c.warningCode) !== null && _c$warningCode !== void 0 ? _c$warningCode : c.errorCode)), /*#__PURE__*/React.createElement(TableCell, null, c.message), /*#__PURE__*/React.createElement(TableCell, null, c.trackerType));\n  })))), conflicts && /*#__PURE__*/React.createElement(FormField, {\n    label: `${i18n.t('Conflicts')}`,\n    dataTest: \"job-summary-conflicts\",\n    name: \"conflicts\"\n  }, /*#__PURE__*/React.createElement(Table, null, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, null, importType !== 'GEOJSON_IMPORT' ? i18n.t('Object') : i18n.t('Indexes')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Value')))), /*#__PURE__*/React.createElement(TableBody, null, conflicts.map((c, i) => /*#__PURE__*/React.createElement(TableRow, {\n    key: `job-summary-conflicts-${c.object}-${i}`\n  }, /*#__PURE__*/React.createElement(TableCell, null, importType !== 'GEOJSON_IMPORT' ? c.object : (c.indexes || []).join(',')), /*#__PURE__*/React.createElement(TableCell, null, c.value)))))));\n};\nSingleSummary.propTypes = {\n  importCount: statsPropType.isRequired,\n  conflicts: PropTypes.arrayOf(PropTypes.shape({\n    value: PropTypes.string.isRequired,\n    indexes: PropTypes.arrayOf(PropTypes.number),\n    object: PropTypes.string\n  })),\n  description: PropTypes.string,\n  id: PropTypes.string,\n  importType: PropTypes.string,\n  status: PropTypes.string,\n  validationReport: PropTypes.shape({\n    errorReports: PropTypes.arrayOf(PropTypes.shape({\n      errorCode: PropTypes.string,\n      message: PropTypes.string,\n      trackerType: PropTypes.string,\n      uid: PropTypes.string\n    })),\n    warningReports: PropTypes.arrayOf(PropTypes.shape({\n      errorCode: PropTypes.string,\n      message: PropTypes.string,\n      trackerType: PropTypes.string,\n      uid: PropTypes.string\n    }))\n  })\n};\nexport { SingleSummary };","import i18n from '@dhis2/d2-i18n';\nimport { Table, TableBody, TableCell, TableHead, TableRow, TableRowHead, TableCellHead } from '@dhis2/ui';\nimport React from 'react';\nimport { FormField } from '../../index.js';\nimport { messagesPropType } from '../helper.js';\nconst Messages = ({\n  messages\n}) => {\n  if (messages.length == 0) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(FormField, {\n    label: `${i18n.t('Messages')}`,\n    dataTest: \"job-summary-messages\",\n    name: \"messages\"\n  }, /*#__PURE__*/React.createElement(Table, null, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('UID')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Type')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Property')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Message')))), /*#__PURE__*/React.createElement(TableBody, null, messages.map((m, i) => /*#__PURE__*/React.createElement(TableRow, {\n    key: `job-summary-messages-${i}`\n  }, /*#__PURE__*/React.createElement(TableCell, null, m.uid), /*#__PURE__*/React.createElement(TableCell, null, m.type), /*#__PURE__*/React.createElement(TableCell, null, m.property), /*#__PURE__*/React.createElement(TableCell, null, m.message))))));\n};\nMessages.propTypes = {\n  messages: messagesPropType.isRequired\n};\nexport { Messages, messagesPropType };","import i18n from '@dhis2/d2-i18n';\nimport { Table, TableBody, TableCell, TableHead, TableRow, TableRowHead, TableCellHead } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { FormField } from '../../index.js';\nimport { statsPropTypeObj } from '../helper.js';\nconst TypeCount = ({\n  stats\n}) => {\n  if (stats.length == 0) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(FormField, {\n    label: `${i18n.t('Details by type')}`,\n    dataTest: \"job-summary-type-count\",\n    name: \"typeCount\"\n  }, /*#__PURE__*/React.createElement(Table, null, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Type')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Created')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Deleted')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Ignored')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Updated')), /*#__PURE__*/React.createElement(TableCellHead, null, i18n.t('Total')))), /*#__PURE__*/React.createElement(TableBody, null, stats.map((s, i) => /*#__PURE__*/React.createElement(TableRow, {\n    key: `job-summary-type-count-${i}`\n  }, /*#__PURE__*/React.createElement(TableCell, null, s.type), /*#__PURE__*/React.createElement(TableCell, null, s.created), /*#__PURE__*/React.createElement(TableCell, null, s.deleted), /*#__PURE__*/React.createElement(TableCell, null, s.ignored), /*#__PURE__*/React.createElement(TableCell, null, s.updated), /*#__PURE__*/React.createElement(TableCell, null, s.total))))));\n};\nconst typeCountStatsPropTypeObj = {\n  ...statsPropTypeObj,\n  type: PropTypes.string.isRequired\n};\nTypeCount.propTypes = {\n  stats: PropTypes.arrayOf(PropTypes.shape(typeCountStatsPropTypeObj)).isRequired\n};\nexport { TypeCount, typeCountStatsPropTypeObj };","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { statsPropType, messagesPropType } from '../helper.js';\nimport { Messages } from '../Messages/Messages.js';\nimport { SingleSummary } from '../SingleSummary/SingleSummary.js';\nimport { TypeCount, typeCountStatsPropTypeObj } from '../TypeCount/TypeCount.js';\nconst TypeReportSummary = ({\n  overviewStats,\n  stats,\n  messages\n}) => {\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(SingleSummary, {\n    importCount: overviewStats\n  }), /*#__PURE__*/React.createElement(TypeCount, {\n    stats: stats\n  }), /*#__PURE__*/React.createElement(Messages, {\n    messages: messages\n  }));\n};\nTypeReportSummary.propTypes = {\n  messages: messagesPropType.isRequired,\n  overviewStats: statsPropType.isRequired,\n  stats: PropTypes.arrayOf(PropTypes.exact(typeCountStatsPropTypeObj)).isRequired\n};\nexport { TypeReportSummary };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Summary_container__tHRWI\",\"rest\":\"Summary_rest__vtp39\",\"typeReportSummary\":\"Summary_typeReportSummary__lIle3\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { typeReportParse } from '../helper.js';\nimport { SingleSummary } from '../SingleSummary/SingleSummary.js';\nimport { TypeReportSummary } from '../TypeReportSummary/TypeReportSummary.js';\nimport styles from './Summary.module.css';\nconst extractStats = summary => {\n  if (summary.responseType == 'ImportSummaries') {\n    const {\n      imported,\n      deleted,\n      ignored,\n      updated,\n      total\n    } = summary;\n    return {\n      imported,\n      deleted,\n      ignored,\n      updated,\n      total\n    };\n  } else if (summary.importCount) {\n    const {\n      imported,\n      deleted,\n      ignored,\n      updated\n    } = summary.importCount;\n    const total = imported + deleted + ignored + updated;\n    return {\n      imported,\n      deleted,\n      ignored,\n      updated,\n      total\n    };\n  } else if (summary.stats) {\n    return summary.stats;\n  }\n};\nconst Summary = ({\n  summary,\n  importType\n}) => {\n  // gml import type object return\n  if (summary.typeReports) {\n    const overviewStats = {\n      ...summary.stats,\n      imported: summary.stats.created\n    };\n    const {\n      stats,\n      messages\n    } = typeReportParse(summary.typeReports);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      \"data-test\": \"job-summary-summary\",\n      className: styles.typeReportSummary\n    }, /*#__PURE__*/React.createElement(TypeReportSummary, {\n      overviewStats: overviewStats,\n      stats: stats,\n      messages: messages\n    }));\n  }\n  const importCount = extractStats(summary);\n  const overviewSummary = /*#__PURE__*/React.createElement(SingleSummary, {\n    importType: importType,\n    importCount: importCount,\n    status: summary.status,\n    description: summary.description,\n    validationReport: summary.validationReport,\n    conflicts: summary.conflicts && (summary.conflicts.length || null) && summary.conflicts\n  });\n  const allSummaries = summary.responseType == 'ImportSummaries' && summary.importSummaries ? summary.importSummaries.map((s, i) => {\n    const importCount = extractStats(s);\n    return /*#__PURE__*/React.createElement(SingleSummary, {\n      key: `single-summary-${i}`,\n      importType: importType,\n      importCount: importCount,\n      status: s.status,\n      description: s.description,\n      conflicts: s.conflicts,\n      id: `${i + 1}`\n    });\n  }) : null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"job-summary-summary\",\n    className: styles.container\n  }, overviewSummary, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.rest,\n    \"data-test\": \"job-summary-summary-rest\"\n  }, allSummaries));\n};\nSummary.propTypes = {\n  summary: PropTypes.object.isRequired,\n  importType: PropTypes.string\n};\nexport { Summary };","import i18n from '@dhis2/d2-i18n';\nimport { Divider, Tag } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { jsDateToString } from '../../utils/helper.js';\nimport { Details } from './Details/Details.js';\nimport styles from './JobSummary.module.css';\nimport { Log } from './Log/Log.js';\nimport { Summary } from './Summary/Summary.js';\nconst Header = ({\n  jobDetails,\n  task,\n  showFileDetails\n}) => {\n  var _jobDetails$files;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.header\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: styles.title\n  }, `${i18n.t('Job summary')}`), showFileDetails && (jobDetails === null || jobDetails === void 0 ? void 0 : (_jobDetails$files = jobDetails.files) === null || _jobDetails$files === void 0 ? void 0 : _jobDetails$files.length) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.taskDetails\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"data-test\": \"job-summary-filename\"\n  }, jobDetails.files[0].name), ' ', \"-\", ' ', /*#__PURE__*/React.createElement(\"span\", {\n    \"data-test\": \"job-summary-date\"\n  }, jsDateToString(task.created), ' ')));\n};\nHeader.propTypes = {\n  jobDetails: PropTypes.object.isRequired,\n  task: PropTypes.object.isRequired,\n  showFileDetails: PropTypes.bool\n};\nconst Tags = ({\n  jobDetails,\n  task\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.tags,\n  \"data-test\": \"job-summary-tags\"\n}, task.completed ? /*#__PURE__*/React.createElement(Tag, {\n  positive: true\n}, i18n.t('Completed')) : /*#__PURE__*/React.createElement(Tag, {\n  neutral: true\n}, i18n.t('In progress')), task.error && /*#__PURE__*/React.createElement(Tag, {\n  negative: true,\n  bold: true\n}, i18n.t('Error')), task.summary && task.summary.conflicts && (task.summary.conflicts.length || null) && /*#__PURE__*/React.createElement(Tag, {\n  negative: true\n}, i18n.t('Conflicts')), jobDetails.dryRun && /*#__PURE__*/React.createElement(Tag, {\n  neutral: true,\n  bold: true\n}, i18n.t('Dry run')));\nTags.propTypes = {\n  jobDetails: PropTypes.object.isRequired,\n  task: PropTypes.object.isRequired\n};\nconst JobSummary = ({\n  task,\n  showFileDetails = true,\n  showJobDetails = false,\n  dataTest\n}) => {\n  if (!task) {\n    return null;\n  }\n  const {\n    jobDetails\n  } = task;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(Header, {\n    jobDetails: jobDetails,\n    task: task,\n    showFileDetails: showFileDetails\n  }), /*#__PURE__*/React.createElement(Tags, {\n    jobDetails: jobDetails,\n    task: task\n  }), /*#__PURE__*/React.createElement(Divider, null), task.completed && task.summary && /*#__PURE__*/React.createElement(Summary, {\n    summary: task.summary,\n    importType: task.importType\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.events\n  }, /*#__PURE__*/React.createElement(Log, {\n    events: task.events\n  })), showJobDetails && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.jobDetails\n  }, /*#__PURE__*/React.createElement(Details, {\n    details: task.jobDetails\n  })));\n};\nJobSummary.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  showFileDetails: PropTypes.bool,\n  showJobDetails: PropTypes.bool,\n  task: PropTypes.object\n};\nexport { JobSummary };","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { MoreOptions } from '../../index.js';\nimport { JobSummary } from '../JobSummary.js';\nconst MiniJobSummary = ({\n  task,\n  dataTest\n}) => {\n  if (!task) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(MoreOptions, {\n    label: i18n.t('View summary of recently started import job'),\n    dataTest: `${dataTest}-MoreOptions`,\n    noBottomMargin: true\n  }, /*#__PURE__*/React.createElement(JobSummary, {\n    task: task,\n    dataTest: `${dataTest}-JobSummary`\n  })));\n};\nMiniJobSummary.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  task: PropTypes.object\n};\nexport { MiniJobSummary };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"MoreOptions_container__CWfQn\",\"header\":\"MoreOptions_header__QONmT\",\"label\":\"MoreOptions_label__0GSpv\",\"children\":\"MoreOptions_children__MLC8H\",\"hidden\":\"MoreOptions_hidden__DJB9i\",\"chevronHidden\":\"MoreOptions_chevronHidden__4yICN\",\"chevronVisible\":\"MoreOptions_chevronVisible__g-zwu\"};","import i18n from '@dhis2/d2-i18n';\nimport { Divider, IconChevronRight24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport styles from './MoreOptions.module.css';\n\n/**\n * If not initially visible, doesn't render children. After opening the first\n * time, however, children are instead hidden by CSS on toggle to preserve\n * state\n */\nconst MoreOptions = ({\n  children,\n  initiallyVisible,\n  noBottomMargin,\n  label = i18n.t('Advanced options'),\n  dataTest = 'interaction-more-options'\n}) => {\n  const [hidden, setHidden] = useState(!initiallyVisible);\n  const [hasOpened, setHasOpened] = useState(initiallyVisible);\n  const onToggle = () => {\n    if (!hasOpened) {\n      setHasOpened(true);\n    }\n    setHidden(!hidden);\n  };\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: cx({\n      [styles.container]: !noBottomMargin\n    }),\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: styles.header,\n    onClick: onToggle,\n    \"data-test\": `${dataTest}-header`\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx({\n      [styles.chevronHidden]: hidden,\n      [styles.chevronVisible]: !hidden\n    })\n  }, /*#__PURE__*/React.createElement(IconChevronRight24, null)), /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.label\n  }, label)), !hidden && /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.children, {\n      [styles.hidden]: hidden\n    }),\n    \"data-test\": `${dataTest}-children`\n  }, hasOpened && children));\n};\nMoreOptions.defaultProps = {\n  initiallyVisible: false,\n  noBottomMargin: false\n};\nMoreOptions.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  dataTest: PropTypes.string,\n  initiallyVisible: PropTypes.bool,\n  label: PropTypes.string,\n  noBottomMargin: PropTypes.bool\n};\nexport { MoreOptions };","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { SingleSelectFieldFF } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { fetchAttributes } from '../../utils/helper.js';\nimport { optionsPropType } from '../../utils/options.js';\nimport { StyledField } from '../index.js';\nconst OrgUnitIdScheme = ({\n  name,\n  label,\n  orgUnitIdSchemeOptions,\n  dataTest\n}) => {\n  const {\n    baseUrl\n  } = useConfig();\n  const [loading, setLoading] = useState(true);\n  const [schemes, setSchemes] = useState([]);\n  const [error, setError] = useState(undefined);\n  useEffect(() => {\n    fetchAttributes(`${baseUrl}/api/`, 'organisationUnitAttribute').then(attributes => setSchemes(attributes)).catch(error => setError(error)).finally(() => setLoading(false));\n  }, []);\n  const validationText = error && `${i18n.t('Something went wrong when loading the additional organisation unit ID schemes')} : ${error.message}`;\n  const options = [...orgUnitIdSchemeOptions, ...schemes];\n  return /*#__PURE__*/React.createElement(StyledField, {\n    component: SingleSelectFieldFF,\n    name: name,\n    label: label,\n    options: options,\n    dataTest: dataTest,\n    loading: loading,\n    validationText: validationText,\n    error: !!error\n  });\n};\nOrgUnitIdScheme.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  orgUnitIdSchemeOptions: optionsPropType.isRequired\n};\nexport { OrgUnitIdScheme };","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"OrgUnitTreeField_wrapper__eX25k\"};","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CircularLoader, Help, ReactFinalForm, OrganisationUnitTree } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './OrgUnitTreeField.module.css';\nconst {\n  Field\n} = ReactFinalForm;\nconst rootQuery = {\n  roots: {\n    resource: 'organisationUnits',\n    params: {\n      filter: 'level:eq:1',\n      fields: 'id',\n      paging: 'false'\n    }\n  }\n};\nconst SINGLE_ORG_VALIDATOR = selectedOrgUnits => selectedOrgUnits.length == 0 ? i18n.t('At least one organisation unit must be selected') : undefined;\nconst SINGLE_EXACT_ORG_VALIDATOR = selectedOrgUnits => selectedOrgUnits.length != 1 ? i18n.t('One organisation unit must be selected') : undefined;\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta,\n  multiSelect,\n  ...rest\n}) => {\n  const {\n    loading,\n    data,\n    error\n  } = useDataQuery(rootQuery);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, loading && /*#__PURE__*/React.createElement(CircularLoader, null), error && /*#__PURE__*/React.createElement(Help, {\n    error: true\n  }, i18n.t('Something went wrong when loading the organisation units!')), data && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.wrapper\n  }, /*#__PURE__*/React.createElement(OrganisationUnitTree, _extends({\n    onChange: ({\n      selected\n    }) => {\n      onChange(selected);\n    },\n    selected: value,\n    roots: data.roots.organisationUnits.map(ou => ou.id)\n  }, rest, {\n    singleSelection: !multiSelect\n  }))), (meta.touched || !meta.pristine) && meta.error && /*#__PURE__*/React.createElement(Help, {\n    error: true\n  }, meta.error));\n};\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.arrayOf(PropTypes.string).isRequired,\n    onChange: PropTypes.func\n  }).isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired,\n  multiSelect: PropTypes.bool\n};\nconst OrgUnitTreeField = ({\n  name,\n  validator,\n  ...rest\n}) => {\n  return /*#__PURE__*/React.createElement(Field, _extends({\n    component: Wrapper,\n    name: name,\n    validate: validator\n  }, rest));\n};\nOrgUnitTreeField.propTypes = {\n  name: PropTypes.string.isRequired,\n  validator: PropTypes.func\n};\nexport { OrgUnitTreeField, SINGLE_ORG_VALIDATOR, SINGLE_EXACT_ORG_VALIDATOR };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Page_container__uuxzX\",\"limitedWidth\":\"Page_limitedWidth__pUAt6\",\"content\":\"Page_content__gCqpz\",\"preBody\":\"Page_preBody__q77A8\",\"header\":\"Page_header__GACJQ\",\"title\":\"Page_title__nkXsQ\",\"desc\":\"Page_desc__eb-0r\",\"loading\":\"Page_loading__2h8Ym\",\"transparent\":\"Page_transparent__xvLml\"};","import { Card, CenteredContent, CircularLoader, ComponentCover, LinearLoader } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { JobSummary, MiniJobSummary } from '../index.js';\nimport styles from './Page.module.css';\nconst Page = ({\n  title,\n  desc,\n  summaryTask,\n  showFullSummaryTask = false,\n  limitWidth = true,\n  children,\n  loading = false,\n  dataTest,\n  transparent = false\n}) => {\n  const loadingEl = typeof loading == 'number' ? /*#__PURE__*/React.createElement(LinearLoader, {\n    amount: loading\n  }) : /*#__PURE__*/React.createElement(CircularLoader, null);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.container, {\n      [styles.limitedWidth]: limitWidth,\n      [styles.transparent]: transparent\n    }),\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: styles.header\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.title\n  }, title), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.desc\n  }, desc)), summaryTask && /*#__PURE__*/React.createElement(Card, {\n    className: styles.preBody\n  }, showFullSummaryTask ? /*#__PURE__*/React.createElement(JobSummary, {\n    task: summaryTask,\n    dataTest: \"job-summary-container\"\n  }) : /*#__PURE__*/React.createElement(MiniJobSummary, {\n    task: summaryTask,\n    dataTest: \"mini-job-summary-container\"\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, !!loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loading\n  }, /*#__PURE__*/React.createElement(ComponentCover, {\n    translucent: true\n  }, /*#__PURE__*/React.createElement(CenteredContent, null, loadingEl))), children));\n};\nPage.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  dataTest: PropTypes.string.isRequired,\n  desc: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  limitWidth: PropTypes.bool,\n  loading: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n  showFullSummaryTask: PropTypes.bool,\n  summaryTask: PropTypes.object,\n  transparent: PropTypes.bool\n};\nexport { Page };","import { useDataEngine } from '@dhis2/app-runtime';\nimport { useState } from 'react';\nimport { allCategories } from '../utils/tasks.js';\nconst jobEventQuery = {\n  events: {\n    resource: 'system/tasks/',\n    id: ({\n      type,\n      taskId\n    }) => `${type}/${taskId}`\n  }\n};\nconst jobSummaryQuery = {\n  summary: {\n    resource: 'system/taskSummaries/',\n    id: ({\n      type,\n      taskId\n    }) => `${type}/${taskId}`\n  }\n};\nconst trackerEventQuery = {\n  events: {\n    resource: 'tracker/jobs/',\n    id: ({\n      taskId\n    }) => `${taskId}`\n  }\n};\nconst trackerSummaryQuery = {\n  summary: {\n    resource: 'tracker/jobs/',\n    id: ({\n      taskId\n    }) => `${taskId}/report`\n  }\n};\nconst defaultTasks = {\n  data: {},\n  event: {},\n  gml: {},\n  earthengine: {},\n  geojson: {},\n  metadata: {},\n  tei: {}\n};\nconst defaultJobOverview = {\n  activeTypes: allCategories,\n  selectedJob: undefined\n};\nconst defaultRefetchPeriod = 2000;\nconst createFetchEvents = (engine, setTasks, fetchSummary) => (type, id, task) => {\n  const fetchEvents = async () => {\n    if (task.completed) {\n      return;\n    }\n    const newTask = {\n      ...task\n    };\n    const query = task.importType === 'TRACKER_IMPORT_JOB' ? trackerEventQuery : jobEventQuery;\n    const response = await engine.query(query, {\n      variables: {\n        type: task.importType,\n        taskId: task.id\n      }\n    });\n    const {\n      events,\n      error\n    } = response;\n    if (error) {\n      console.error('fetchEvents error: ', error);\n      return;\n    }\n    if (events && events.length) {\n      const newEvents = events.filter(e => !task.events.some(te => te.id == e.uid)).map(e => ({\n        id: e.uid,\n        level: e.level,\n        text: e.message,\n        date: new Date(e.time)\n      }));\n      const errorEvent = newEvents.find(e => e.level == 'ERROR');\n      if (errorEvent) {\n        newTask.error = errorEvent.text;\n      }\n      newTask.events = [...newTask.events, ...newEvents.reverse()];\n      newTask.completed = events[0].completed;\n    }\n    newTask.lastUpdated = new Date();\n    if (!newTask.completed) {\n      // Add timeout handling for stuck jobs\n      const timeSinceCreated = new Date() - new Date(newTask.created);\n      const maxWaitTime = 1 * 30 * 1000;\n      if (timeSinceCreated > maxWaitTime && newTask.events.length === 1 && newTask.events[0].id === 'init') {\n        // Job has been stuck at init for too long\n        console.warn(`Job ${id} has been stuck at init for ${Math.round(timeSinceCreated / 1000)} seconds`);\n        newTask.error = 'Job appears to be stuck.';\n        newTask.completed = true;\n        newTask.events.push({\n          id: 'timeout',\n          level: 'ERROR',\n          text: 'Job timeout: Import job stuck at initialization.',\n          date: new Date()\n        });\n      } else {\n        setTimeout(() => fetchEvents(type, id, newTask), defaultRefetchPeriod);\n      }\n    } else {\n      fetchSummary(type, id, newTask);\n    }\n    setTasks(tasks => ({\n      ...tasks,\n      [type]: {\n        ...tasks[type],\n        [id]: newTask\n      }\n    }));\n  };\n  fetchEvents();\n};\nconst createFetchSummary = (engine, setTasks) => async (type, id, task) => {\n  const newTask = {\n    ...task\n  };\n\n  // we could still keep one query here (the jobs query), but tracker provides a facade to these\n  // and even though this branches the logic unnecessarily, we should stick to\n  // trackers' endpoint for tracker imports and they could abstract some job-related details\n  // more details here: https://docs.dhis2.org/en/develop/using-the-api/dhis-core-version-master/tracker.html#webapi_nti_import_summary\n  const query = task.importType === 'TRACKER_IMPORT_JOB' ? trackerSummaryQuery : jobSummaryQuery;\n  const response = await engine.query(query, {\n    variables: {\n      type: task.importType,\n      taskId: task.id\n    }\n  });\n  const {\n    summary,\n    error\n  } = response;\n  if (error) {\n    console.error('fetchSummary error: ', error);\n    return;\n  }\n  if (summary && summary.status == 'ERROR' && !newTask.error) {\n    newTask.error = true;\n  }\n  newTask.summary = summary;\n  setTasks(tasks => ({\n    ...tasks,\n    [type]: {\n      ...tasks[type],\n      [id]: newTask\n    }\n  }));\n};\nconst createAddTask = (setTasks, fetchEvents) => (type, id, entry) => {\n  setTasks(tasks => ({\n    ...tasks,\n    [type]: {\n      ...tasks[type],\n      [id]: entry\n    }\n  }));\n  fetchEvents(type, id, entry);\n};\nconst createUpdateJobOverview = setJobOverview => val => {\n  setJobOverview(jobOverview => ({\n    ...jobOverview,\n    ...val\n  }));\n};\nconst useTasks = () => {\n  const engine = useDataEngine();\n  const [tasks, setTasks] = useState(defaultTasks);\n  const [jobOverview, setJobOverview] = useState(defaultJobOverview);\n  const fetchSummary = createFetchSummary(engine, setTasks);\n  const fetchEvents = createFetchEvents(engine, setTasks, fetchSummary);\n  const addTask = createAddTask(setTasks, fetchEvents);\n  const updateJobOverview = createUpdateJobOverview(setJobOverview);\n  return {\n    tasks,\n    addTask,\n    jobOverview,\n    updateJobOverview\n  };\n};\nexport { useTasks };","import { useDataQuery } from '@dhis2/app-runtime';\nconst userQuery = {\n  user: {\n    resource: 'me'\n  }\n};\nconst useUser = () => {\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(userQuery);\n  if (error) {\n    console.log('useUser error: ', error);\n  }\n  return {\n    loading,\n    error,\n    user: data && data.user\n  };\n};\nexport { useUser };","import { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { useState, useEffect } from 'react';\nconst programStageQuery = {\n  data: {\n    resource: 'programs',\n    fields: 'id,displayName',\n    id: ({\n      id\n    }) => `${id}`,\n    params: {\n      fields: 'programStages[id,displayName]',\n      paging: 'false'\n    }\n  }\n};\nconst ALL_VALUE = 'ALL';\nconst ALL_LABEL = i18n.t('All program stages');\nconst useProgramStages = (program, setSelected) => {\n  const engine = useDataEngine();\n  const [error, setError] = useState(undefined);\n  const [loading, setLoading] = useState(true);\n  const [stages, setStages] = useState([]);\n  useEffect(() => {\n    if (program) {\n      setLoading(true);\n      setSelected(undefined);\n    } else {\n      setLoading(false);\n    }\n    if (program) {\n      engine.query(programStageQuery, {\n        variables: {\n          id: program\n        },\n        onComplete: data => {\n          const list = data.data.programStages;\n          const formattedList = list.map(e => ({\n            value: e.id,\n            label: e.displayName\n          }));\n          setStages([{\n            value: ALL_VALUE,\n            label: ALL_LABEL\n          }, ...formattedList]);\n          setSelected(ALL_VALUE);\n          setLoading(false);\n        },\n        onError: error => {\n          setError(error);\n          console.error('useProgramStages error: ', error);\n        }\n      });\n    }\n  }, [program]);\n  const validationText = error && `${i18n.t('Something went wrong when loading the program stages')} : ${error.message}`;\n  return {\n    loading,\n    error,\n    validationText,\n    programStages: stages\n  };\n};\nexport { useProgramStages, ALL_VALUE };","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { useState } from 'react';\nconst classKeyQuery = {\n  keys: {\n    resource: 'metadata/csvImportClasses'\n  }\n};\nconst useClassKeys = (setValue, prevValue) => {\n  const [classKeys, setClassKeys] = useState([]);\n  const {\n    loading,\n    error\n  } = useDataQuery(classKeyQuery, {\n    onComplete: classData => {\n      setClassKeys(classData.keys.map(k => ({\n        value: k,\n        label: k\n      })));\n      if (prevValue) {\n        setValue(prevValue);\n      } else {\n        setValue(classData.keys[0]);\n      }\n    },\n    onError: error => {\n      console.error('useClassKeys error: ', error);\n    }\n  });\n  const validationText = error && `${i18n.t('Something went wrong when loading the class keys')} : ${error.message}`;\n  return {\n    loading,\n    error,\n    validationText,\n    classKeys\n  };\n};\nexport { useClassKeys };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ProgramStages_container__y4ozC\"};","import i18n from '@dhis2/d2-i18n';\nimport { SingleSelectFieldFF } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useProgramStages } from '../../hooks/index.js';\nimport { StyledField } from '../index.js';\nimport styles from './ProgramStages.module.css';\nconst SINGLE_EXACT_PROGRAMSTAGE_VALIDATOR = programStage => !programStage ? i18n.t('One program stage must be selected') : undefined;\nconst ProgramStages = ({\n  name,\n  label,\n  selectedProgram,\n  form,\n  validator,\n  dataTest\n}) => {\n  const setProgramStage = val => form.change(name, val);\n  const {\n    loading: programStagesLoading,\n    error: programStagesError,\n    validationText: programStagesValidationText,\n    programStages\n  } = useProgramStages(selectedProgram, setProgramStage);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(StyledField, {\n    component: SingleSelectFieldFF,\n    name: name,\n    loading: programStagesLoading,\n    label: label,\n    validate: validator,\n    dataTest: dataTest,\n    options: programStages,\n    validationText: programStagesValidationText,\n    error: !!programStagesError\n  }));\n};\nProgramStages.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  form: PropTypes.object.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  selectedProgram: PropTypes.string.isRequired,\n  validator: PropTypes.func\n};\nexport { ProgramStages, SINGLE_EXACT_PROGRAMSTAGE_VALIDATOR };","// extracted by mini-css-extract-plugin\nexport default {\"horizontal\":\"RadioGroup_horizontal__Qf7+S\",\"vertical\":\"RadioGroup_vertical__fZnq5\",\"children\":\"RadioGroup_children__4ju7+\",\"prefix\":\"RadioGroup_prefix__pVAEI\",\"prefixCritical\":\"RadioGroup_prefixCritical__MQbZi\"};","import { Help, Radio } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { FormField } from '../index.js';\nimport styles from './RadioGroup.module.css';\nconst Label = ({\n  label,\n  prefix,\n  type\n}) => {\n  if (!prefix) {\n    return label;\n  }\n  return /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(\"span\", {\n    className: cx(styles.prefix, {\n      [styles.prefixCritical]: type === 'critical'\n    })\n  }, prefix), label);\n};\nLabel.propTypes = {\n  label: PropTypes.string.isRequired,\n  prefix: PropTypes.string,\n  type: PropTypes.oneOf(['critical'])\n};\nconst RadioGroup = ({\n  name,\n  label,\n  options,\n  checked,\n  setValue,\n  vertical,\n  helpText,\n  children,\n  dataTest\n}) => {\n  return /*#__PURE__*/React.createElement(FormField, {\n    label: label,\n    dataTest: dataTest,\n    name: name\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx({\n      [styles.vertical]: vertical,\n      [styles.horizontal]: !vertical\n    })\n  }, options.map(o => /*#__PURE__*/React.createElement(\"div\", {\n    key: o.value\n  }, /*#__PURE__*/React.createElement(Radio, {\n    name: name,\n    value: o.value,\n    label: /*#__PURE__*/React.createElement(Label, {\n      label: o.label,\n      prefix: o.prefix,\n      type: o.type\n    }),\n    checked: o.value == checked,\n    onChange: () => setValue(o.value),\n    dataTest: `${dataTest}-${o.value}`\n  }), o.help && /*#__PURE__*/React.createElement(Help, null, o.help)))), helpText && /*#__PURE__*/React.createElement(Help, null, helpText), children && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.children\n  }, children));\n};\nRadioGroup.propTypes = {\n  checked: PropTypes.string.isRequired,\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  options: PropTypes.arrayOf(PropTypes.shape({\n    label: PropTypes.string.isRequired,\n    value: PropTypes.string.isRequired,\n    prefix: PropTypes.string,\n    type: PropTypes.oneOf(['critical'])\n  })).isRequired,\n  setValue: PropTypes.func.isRequired,\n  children: PropTypes.node,\n  helpText: PropTypes.string,\n  vertical: PropTypes.bool\n};\nexport { RadioGroup };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { ReactFinalForm } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { RadioGroup } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta: {\n    error\n  },\n  inputName,\n  ...rest\n}) => /*#__PURE__*/React.createElement(RadioGroup, _extends({\n  name: inputName,\n  error: error,\n  checked: value,\n  setValue: onChange\n}, rest));\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.string.isRequired,\n    onChange: PropTypes.func\n  }).isRequired,\n  inputName: PropTypes.string.isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\nconst RadioGroupField = ({\n  name,\n  ...rest\n}) => {\n  return /*#__PURE__*/React.createElement(Field, _extends({\n    component: Wrapper,\n    name: name,\n    inputName: name\n  }, rest));\n};\nRadioGroupField.propTypes = {\n  name: PropTypes.string.isRequired\n};\nexport { RadioGroupField };","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SINGLE_FILE_VALIDATOR } from '../FileUpload/FileUpload.js';\nimport { FileUpload as FileUploadGeneric } from '../index.js';\nconst NAME = 'files';\nconst LABEL = i18n.t('Select a file to import values from');\nconst DATATEST = 'input-file-upload';\nconst VALIDATOR = SINGLE_FILE_VALIDATOR;\nconst FileUpload = ({\n  helpText\n}) => /*#__PURE__*/React.createElement(FileUploadGeneric, {\n  name: NAME,\n  label: LABEL,\n  validator: VALIDATOR,\n  dataTest: DATATEST,\n  helpText: helpText\n});\nFileUpload.propTypes = {\n  helpText: PropTypes.string\n};\nexport { FileUpload };","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { ImportButtonStrip as ImportButtonStripGeneric } from '../index.js';\nconst DRYRUNDATATEST = 'input-dry-run';\nconst IMPORTDATATEST = 'input-import-submit';\nconst DATATEST = 'input-import-button-strip';\nconst ImportButtonStrip = ({\n  form\n}) => /*#__PURE__*/React.createElement(ImportButtonStripGeneric, {\n  form: form,\n  dryRunDataTest: DRYRUNDATATEST,\n  importDataTest: IMPORTDATATEST,\n  dataTest: DATATEST\n});\nImportButtonStrip.propTypes = {\n  form: PropTypes.object.isRequired\n};\nexport { ImportButtonStrip };","import React from 'react';\nimport { FormAlerts as FormAlertsGeneric } from '../index.js';\nconst DATATEST = 'input-form-alerts';\nconst FormAlerts = ({\n  alerts\n}) => /*#__PURE__*/React.createElement(FormAlertsGeneric, {\n  alerts: alerts,\n  dataTest: DATATEST\n});\nFormAlerts.propTypes = {\n  alerts: FormAlertsGeneric.propTypes.alerts\n};\nexport { FormAlerts };","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { optionsPropType } from '../../utils/options.js';\nimport { RadioGroupField } from '../index.js';\nconst formatOptions = [{\n  value: 'json',\n  label: i18n.t('JSON')\n}, {\n  value: 'csv',\n  label: i18n.t('CSV')\n}, {\n  value: 'xml',\n  label: i18n.t('DXF2 (XML)')\n}];\nconst formatNoCsvOptions = formatOptions.filter(f => f.value != 'csv');\nconst formatNoXmlOptions = formatOptions.filter(f => f.value != 'xml');\nconst formatNoXmlNoCsvOptions = formatOptions.filter(f => !['xml', 'csv'].includes(f.value));\nconst formatAdxOptions = [...formatOptions, {\n  value: 'adx',\n  label: i18n.t('ADX (XML)')\n}];\nconst formatAdxXMLOptions = [...formatOptions, {\n  value: 'adx+xml',\n  label: i18n.t('ADX (XML)')\n}];\nconst formatAdxPdfOptions = [...formatAdxOptions, {\n  value: 'pdf',\n  label: i18n.t('PDF')\n}];\nconst formatJsonpOptions = [...formatOptions, {\n  value: 'jsonp',\n  label: i18n.t('JSONP')\n}];\nconst defaultFormatOption = formatOptions[0].value;\nconst NAME = 'format';\nconst DATATEST = 'input-format';\nconst IMPORT_LABEL = i18n.t('What format is the data to import?');\nconst EXPORT_LABEL = i18n.t('What format should the data be exported as?');\nconst typeToLabel = type => type === 'import' ? IMPORT_LABEL : EXPORT_LABEL;\nconst Format = ({\n  availableFormats,\n  type\n}) => /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: typeToLabel(type),\n  options: availableFormats,\n  dataTest: DATATEST\n});\nFormat.propTypes = {\n  availableFormats: optionsPropType.isRequired,\n  type: PropTypes.oneOf(['import', 'export'])\n};\nexport { Format, formatOptions, formatNoCsvOptions, formatNoXmlOptions, formatNoXmlNoCsvOptions, formatAdxOptions, formatAdxXMLOptions, formatAdxPdfOptions, formatJsonpOptions, defaultFormatOption };","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, CheckboxFieldFF } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { FormField } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst defaultFirstRowIsHeaderOption = false;\nconst NAME = 'firstRowIsHeader';\nconst DATATEST = 'input-first-row-is-header';\nconst SHORT_LABEL = i18n.t('Is the first row a header row?');\nconst LABEL = i18n.t('First row is header');\nconst HELPTEXT = i18n.t('A header row will be ignored during import');\nconst FirstRowIsHeader = ({\n  show\n}) => show && /*#__PURE__*/React.createElement(FormField, {\n  label: SHORT_LABEL,\n  dataTest: DATATEST\n}, /*#__PURE__*/React.createElement(Field, {\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  name: NAME,\n  label: LABEL,\n  helpText: HELPTEXT,\n  dataTest: `${DATATEST}-sf`\n}));\nFirstRowIsHeader.propTypes = {\n  show: PropTypes.bool.isRequired\n};\nexport { FirstRowIsHeader, defaultFirstRowIsHeaderOption };","import i18n from '@dhis2/d2-i18n';\nimport { SingleSelectFieldFF } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useClassKeys } from '../../hooks/index.js';\nimport { StyledField } from '../index.js';\nconst NAME = 'classKey';\nconst LABEL = i18n.t('Class key');\nconst DATATEST = 'input-class-key';\nconst ClassKey = ({\n  form,\n  prevValue,\n  show = true\n}) => {\n  const setClassKey = val => form.change(NAME, val);\n  const {\n    loading: classKeysLoading,\n    error: classKeysError,\n    validationText: classKeysValidationText,\n    classKeys\n  } = useClassKeys(setClassKey, prevValue);\n  return show && /*#__PURE__*/React.createElement(StyledField, {\n    component: SingleSelectFieldFF,\n    name: NAME,\n    label: LABEL,\n    options: classKeys,\n    loading: classKeysLoading,\n    dataTest: DATATEST,\n    validationText: classKeysValidationText,\n    error: !!classKeysError,\n    filterable: true\n  });\n};\nClassKey.propTypes = {\n  form: PropTypes.object.isRequired,\n  prevValue: PropTypes.string,\n  show: PropTypes.bool\n};\nexport { ClassKey };","import i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst strategyOptions = [{\n  value: 'NEW_AND_UPDATES',\n  label: i18n.t('Import new values and update existing'),\n  prefix: i18n.t('Merge')\n}, {\n  value: 'NEW',\n  label: i18n.t('Import new values only'),\n  prefix: i18n.t('Append')\n}, {\n  value: 'UPDATES',\n  label: i18n.t('Only update existing values, ignore new values'),\n  prefix: i18n.t('Update')\n}, {\n  value: 'DELETE',\n  label: i18n.t('Remove values included in uploaded file'),\n  prefix: i18n.t('Delete'),\n  type: 'critical'\n}];\nconst defaultStrategyOption = strategyOptions[0].value;\nconst DELETE_WARNING_TITLE = i18n.t('Data will be deleted');\nconst DELETE_WARNING = i18n.t('Values in the uploaded file will be deleted from the database. Make sure this is the correct action; it cannot be undone.');\nconst NAME = 'strategy';\nconst DATATEST = 'input-strategy';\nconst LABEL = i18n.t('Strategy');\nconst Strategy = ({\n  value\n}) => /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: strategyOptions,\n  dataTest: DATATEST,\n  vertical: true\n}, value === 'DELETE' && /*#__PURE__*/React.createElement(NoticeBox, {\n  title: DELETE_WARNING_TITLE,\n  warning: true\n}, DELETE_WARNING));\nStrategy.propTypes = {\n  value: PropTypes.string.isRequired\n};\nexport { Strategy, defaultStrategyOption };","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, CheckboxFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { FormField } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst defaultPreheatCacheOption = false;\nconst NAME = 'preheatCache';\nconst DATATEST = 'input-preheat-cache';\nconst SHORT_LABEL = i18n.t('Preheat cache');\nconst LABEL = i18n.t('Preheat cache to make large imports faster');\nconst HELPTEXT = i18n.t('Large imports will be processed faster but will consume more resources');\nconst PreheatCache = () => /*#__PURE__*/React.createElement(FormField, {\n  label: SHORT_LABEL,\n  dataTest: DATATEST\n}, /*#__PURE__*/React.createElement(Field, {\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  name: NAME,\n  label: LABEL,\n  helpText: HELPTEXT,\n  dataTest: `${DATATEST}-sf`\n}));\nexport { PreheatCache, defaultPreheatCacheOption };","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, CheckboxFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { FormField } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst defaultSkipAuditOption = false;\nconst NAME = 'skipAudit';\nconst DATATEST = 'input-has-authority-to-skip-audit';\nconst SHORT_LABEL = i18n.t('Skip audit');\nconst LABEL = i18n.t('Skip audit, meaning audit values will not be generated');\nconst HELPTEXT = i18n.t('Improves performance at the cost of ability to audit changes');\nconst SkipAudit = () => /*#__PURE__*/React.createElement(FormField, {\n  label: SHORT_LABEL,\n  dataTest: DATATEST\n}, /*#__PURE__*/React.createElement(Field, {\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  name: NAME,\n  label: LABEL,\n  helpText: HELPTEXT,\n  dataTest: `${DATATEST}-sf`\n}));\nexport { SkipAudit, defaultSkipAuditOption };","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, CheckboxFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { FormField } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst defaultSkipExistingCheckOption = false;\nconst NAME = 'skipExistingCheck';\nconst DATATEST = 'input-skip-exisiting-check';\nconst SHORT_LABEL = i18n.t('Skip exisiting check');\nconst LABEL = i18n.t('Skip checks for existing data values');\nconst HELPTEXT = i18n.t('Improves performance and should only be used for empty databases or when the data values to import do not exist already');\nconst SkipExistingCheck = () => /*#__PURE__*/React.createElement(FormField, {\n  label: SHORT_LABEL,\n  dataTest: DATATEST\n}, /*#__PURE__*/React.createElement(Field, {\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  name: NAME,\n  label: LABEL,\n  helpText: HELPTEXT,\n  dataTest: `${DATATEST}-sf`\n}));\nexport { SkipExistingCheck, defaultSkipExistingCheckOption };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst identifierOptions = [{\n  value: 'UID',\n  label: i18n.t('UID')\n}, {\n  value: 'CODE',\n  label: i18n.t('Code')\n}];\nconst defaultIdentifierOption = identifierOptions[0].value;\nconst NAME = 'identifier';\nconst DATATEST = 'input-identifier';\nconst LABEL = i18n.t('Identifier');\nconst HELPTEXT = i18n.t('Identifier scheme to use for reference matching');\nconst Identifier = () => /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: identifierOptions,\n  helpText: HELPTEXT,\n  dataTest: DATATEST\n});\nexport { Identifier, defaultIdentifierOption };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst importReportModeOptions = [{\n  value: 'ERRORS',\n  label: i18n.t('Only include reports for objects that have errors'),\n  prefix: i18n.t('Errors')\n}, {\n  value: 'FULL',\n  label: i18n.t('Reports for all objects imported'),\n  prefix: i18n.t('Full')\n}, {\n  value: 'DEBUG',\n  label: i18n.t('Reports for all objects imported along with their names (if available)'),\n  prefix: i18n.t('Debug')\n}];\nconst defaultImportReportModeOption = importReportModeOptions[0].value;\nconst NAME = 'importReportMode';\nconst DATATEST = 'input-import-report-mode';\nconst LABEL = i18n.t('Import report mode');\nconst HELPTEXT = i18n.t('Controls what should be reported after the import is done');\nconst ImportReportMode = () => /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: importReportModeOptions,\n  helpText: HELPTEXT,\n  dataTest: DATATEST,\n  vertical: true\n});\nexport { ImportReportMode, defaultImportReportModeOption };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst preheatModeOptions = [{\n  value: 'REFERENCE',\n  label: i18n.t('Intelligent scan (reference)')\n}, {\n  value: 'ALL',\n  label: i18n.t('All')\n}, {\n  value: 'NONE',\n  label: i18n.t('None')\n}];\nconst defaultPreheatModeOption = preheatModeOptions[0].value;\nconst NAME = 'preheatMode';\nconst DATATEST = 'input-preheat-mode';\nconst LABEL = i18n.t('Preheat mode');\nconst HELPTEXT = i18n.t('Controls the level of preheating that should be done');\nconst PreheatMode = () => /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: preheatModeOptions,\n  helpText: HELPTEXT,\n  dataTest: DATATEST\n});\nexport { PreheatMode, defaultPreheatModeOption };","import i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst importStrategyOptions = [{\n  value: 'CREATE_AND_UPDATE',\n  label: i18n.t('Import new values and update existing'),\n  prefix: i18n.t('Merge')\n}, {\n  value: 'CREATE',\n  label: i18n.t('Import new values only'),\n  prefix: i18n.t('Append')\n}, {\n  value: 'UPDATE',\n  label: i18n.t('Only update existing values, ignore new values'),\n  prefix: i18n.t('Update')\n}, {\n  value: 'DELETE',\n  label: i18n.t('Remove values included in uploaded file'),\n  prefix: i18n.t('Delete'),\n  type: 'critical'\n}];\nconst defaultImportStrategyOption = importStrategyOptions[0].value;\nconst DELETE_WARNING_TITLE = i18n.t('Data will be deleted');\nconst DELETE_WARNING = i18n.t('Values in the uploaded file will be deleted from the database. Make sure this is the correct action; it cannot be undone.');\nconst NAME = 'importStrategy';\nconst DATATEST = 'input-import-strategy';\nconst LABEL = i18n.t('Import strategy');\nconst ImportStrategy = ({\n  value\n}) => /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: importStrategyOptions,\n  dataTest: DATATEST,\n  vertical: true\n}, value === 'DELETE' && /*#__PURE__*/React.createElement(NoticeBox, {\n  title: DELETE_WARNING_TITLE,\n  warning: true\n}, DELETE_WARNING));\nImportStrategy.propTypes = {\n  value: PropTypes.string.isRequired\n};\nexport { ImportStrategy, defaultImportStrategyOption };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst atomicModeOptions = [{\n  value: 'ALL',\n  label: i18n.t('Do not import')\n}, {\n  value: 'OBJECT',\n  label: i18n.t('Import')\n}];\nconst defaultAtomicModeOption = atomicModeOptions[0].value;\nconst NAME = 'atomicMode';\nconst DATATEST = 'input-atomic-mode';\nconst LABEL = i18n.t('Atomic mode');\nconst HELPTEXT = i18n.t('Whether to import objects even if some references do not exist');\nconst AtomicMode = () => /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: atomicModeOptions,\n  helpText: HELPTEXT,\n  dataTest: DATATEST\n});\nexport { AtomicMode, defaultAtomicModeOption };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst mergeModeOptions = [{\n  value: 'MERGE',\n  label: i18n.t('Only overwrite the old property if the new property value is not-null'),\n  prefix: i18n.t('Merge')\n}, {\n  value: 'REPLACE',\n  label: i18n.t('Overwrite regardless of whether the new property value is null'),\n  prefix: i18n.t('Replace')\n}];\nconst defaultMergeModeOption = mergeModeOptions[0].value;\nconst NAME = 'mergeMode';\nconst DATATEST = 'input-merge-mode';\nconst LABEL = i18n.t('Merge mode');\nconst HELPTEXT = i18n.t('Strategy to take when merging two objects');\nconst MergeMode = () => /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: mergeModeOptions,\n  helpText: HELPTEXT,\n  dataTest: DATATEST,\n  vertical: true\n});\nexport { MergeMode, defaultMergeModeOption };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst flushModeOptions = [{\n  value: 'AUTO',\n  label: i18n.t('Auto (recommended)')\n}, {\n  value: 'OBJECT',\n  label: i18n.t('Object (debugging purposes)')\n}];\nconst defaultFlushModeOption = flushModeOptions[0].value;\nconst NAME = 'flushMode';\nconst DATATEST = 'input-flush-mode';\nconst LABEL = i18n.t('Flush mode');\nconst HELPTEXT = i18n.t('Controls when to flush the internal cache');\nconst FlushMode = () => /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: flushModeOptions,\n  helpText: HELPTEXT,\n  dataTest: DATATEST\n});\nexport { FlushMode, defaultFlushModeOption };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst inclusionStrategyOptions = [{\n  value: 'NON_NULL',\n  label: i18n.t('Includes properties which are not null'),\n  prefix: i18n.t('Non null')\n}, {\n  value: 'ALWAYS',\n  label: i18n.t('Include all properties'),\n  prefix: i18n.t('Always')\n}, {\n  value: 'NON_EMPTY',\n  label: i18n.t('Include non-empty properties'),\n  prefix: i18n.t('Non empty')\n}];\nconst defaultInclusionStrategyOption = inclusionStrategyOptions[0].value;\nconst NAME = 'inclusionStrategy';\nconst DATATEST = 'input-inclusion-strategy';\nconst LABEL = i18n.t('Inclusion strategy');\nconst HELPTEXT = i18n.t('Controls which properties to include');\nconst InclusionStrategy = () => /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: inclusionStrategyOptions,\n  helpText: HELPTEXT,\n  dataTest: DATATEST,\n  vertical: true\n});\nexport { InclusionStrategy, defaultInclusionStrategyOption };","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, CheckboxFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { FormField } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst defaultSkipSharingOption = false;\nconst NAME = 'skipSharing';\nconst DATATEST = 'input-skip-sharing';\nconst SHORT_LABEL = i18n.t('Skip sharing');\nconst LABEL = i18n.t('Skip sharing and access settings');\nconst HELPTEXT = i18n.t('Skip sharing properties, do not merge sharing when doing updates, and do not add user group access when creating new objects');\nconst SkipSharing = () => /*#__PURE__*/React.createElement(FormField, {\n  label: SHORT_LABEL,\n  dataTest: DATATEST\n}, /*#__PURE__*/React.createElement(Field, {\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  name: NAME,\n  label: LABEL,\n  helpText: HELPTEXT,\n  dataTest: `${DATATEST}-sf`\n}));\nexport { SkipSharing, defaultSkipSharingOption };","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, CheckboxFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { FormField } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst defaultSkipValidationOption = false;\nconst NAME = 'skipValidation';\nconst DATATEST = 'input-skip-validation';\nconst SHORT_LABEL = i18n.t('Skip validation');\nconst LABEL = i18n.t('Skip validation for import (not recommended)');\nconst SkipValidation = () => /*#__PURE__*/React.createElement(FormField, {\n  label: SHORT_LABEL,\n  dataTest: DATATEST\n}, /*#__PURE__*/React.createElement(Field, {\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  name: NAME,\n  label: LABEL,\n  dataTest: `${DATATEST}-sf`\n}));\nexport { SkipValidation, defaultSkipValidationOption };","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, CheckboxFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { FormField } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst defaultIsAsyncOption = true;\nconst NAME = 'isAsync';\nconst DATATEST = 'input-is-async';\nconst SHORT_LABEL = i18n.t('Async');\nconst LABEL = i18n.t('Asynchronous import');\nconst HELPTEXT = i18n.t('Controls whether the import is done asynchronously');\nconst IsAsync = () => /*#__PURE__*/React.createElement(FormField, {\n  label: SHORT_LABEL,\n  dataTest: DATATEST\n}, /*#__PURE__*/React.createElement(Field, {\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  name: NAME,\n  label: LABEL,\n  helpText: HELPTEXT,\n  dataTest: `${DATATEST}-sf`\n}));\nexport { IsAsync, defaultIsAsyncOption };","import { hasValue, composeValidators } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { OrgUnitTreeField, FormField } from '../index.js';\nimport { SINGLE_ORG_VALIDATOR, SINGLE_EXACT_ORG_VALIDATOR } from '../OrgUnitTree/OrgUnitTreeField.js';\nconst NAME = 'selectedOrgUnits';\nconst LABEL = 'Thematic Area(s) to export data from';\nconst DATATEST = 'input-org-unit-tree';\nconst OrgUnitTree = ({\n  multiSelect\n}) => {\n  const orgValidator = multiSelect ? SINGLE_ORG_VALIDATOR : SINGLE_EXACT_ORG_VALIDATOR;\n  const validator = composeValidators(hasValue, orgValidator);\n  return /*#__PURE__*/React.createElement(FormField, {\n    label: LABEL,\n    dataTest: DATATEST\n  }, /*#__PURE__*/React.createElement(OrgUnitTreeField, {\n    name: NAME,\n    validator: validator,\n    multiSelect: multiSelect,\n    label: LABEL,\n    dataTest: DATATEST\n  }));\n};\nOrgUnitTree.defaultProps = {\n  multiSelect: true\n};\nOrgUnitTree.propTypes = {\n  multiSelect: PropTypes.bool\n};\nexport { OrgUnitTree };","const resourceTypes = {\n  DATASET: 1,\n  PROGRAM: 2,\n  TETYPE: 3,\n  USER: 4,\n  GEOJSON_ATTRIBUTE: 5,\n  PROGRAM_WITH_EVENTS: 6\n};\nexport { resourceTypes };","import i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { ResourcePickerField } from '../index.js';\nimport { resourceTypes } from '../ResourcePicker/resourceTypes.js';\nconst NAME = 'selectedDataSets';\nconst LABEL = i18n.t('Which data sets should be included in export?');\nconst DATATEST = 'input-data-set-picker';\nconst LISTNAME = 'dataSetPicker';\nconst FILTERLABEL = i18n.t('Filter data sets');\nconst SELECTEDLABEL = i18n.t('Selected data sets');\nconst ERRORMESSAGE = i18n.t('Something went wrong when loading the data sets!');\nconst RESOURCETYPE = resourceTypes.DATASET;\nconst SINGLE_DATASET_VALIDATOR = selectedDataSets => selectedDataSets.length == 0 ? i18n.t('At least one data set must be selected') : undefined;\nconst SINGLE_EXACT_DATASET_VALIDATOR = selectedDataSets => selectedDataSets.length != 1 ? i18n.t('One data set must be selected') : undefined;\nconst DataSetPicker = ({\n  multiSelect = true\n}) => {\n  const dataSetValidator = multiSelect ? SINGLE_DATASET_VALIDATOR : SINGLE_EXACT_DATASET_VALIDATOR;\n  const validator = composeValidators(hasValue, dataSetValidator);\n  return /*#__PURE__*/React.createElement(ResourcePickerField, {\n    name: NAME,\n    resourceType: RESOURCETYPE,\n    errorMessage: ERRORMESSAGE,\n    listName: LISTNAME,\n    label: LABEL,\n    filterLabel: FILTERLABEL,\n    selectedLabel: SELECTEDLABEL,\n    dataTest: DATATEST,\n    validator: validator,\n    multiSelect: multiSelect\n  });\n};\nDataSetPicker.propTypes = {\n  multiSelect: PropTypes.bool\n};\nexport { DataSetPicker };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { ResourcePickerField } from '../index.js';\nimport { resourceTypes } from '../ResourcePicker/resourceTypes.js';\nconst NAME = 'selectedPrograms';\nconst LABEL = i18n.t('Program to export events from');\nconst DATATEST = 'input-program-picker';\nconst LISTNAME = 'selectedPrograms';\nconst FILTERLABEL = i18n.t('Filter programs');\nconst SELECTEDLABEL = i18n.t('Selected programs');\nconst ERRORMESSAGE = i18n.t('Something went wrong when loading the programs!');\nconst PROGRAM_RESOURCE_TYPE = resourceTypes.PROGRAM;\nconst PROGRAM_WITH_EVENTS_RESOURCE_TYPE = resourceTypes.PROGRAM_WITH_EVENTS;\nconst SINGLE_PROGRAM_VALIDATOR = selectedPrograms => selectedPrograms.length == 0 ? i18n.t('At least one program must be selected') : undefined;\nconst SINGLE_EXACT_PROGRAM_VALIDATOR = selectedPrograms => !selectedPrograms ? i18n.t('One program must be selected') : undefined;\nconst ProgramPicker = ({\n  multiSelect,\n  label,\n  show,\n  includeEvents,\n  ...rest\n}) => {\n  const programValidator = multiSelect ? SINGLE_PROGRAM_VALIDATOR : SINGLE_EXACT_PROGRAM_VALIDATOR;\n  const validator = composeValidators(hasValue, programValidator);\n  const resourceType = includeEvents ? PROGRAM_WITH_EVENTS_RESOURCE_TYPE : PROGRAM_RESOURCE_TYPE;\n  return show && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: '480px'\n    }\n  }, /*#__PURE__*/React.createElement(ResourcePickerField, _extends({\n    name: NAME,\n    resourceType: resourceType,\n    errorMessage: ERRORMESSAGE,\n    listName: LISTNAME,\n    label: label,\n    filterLabel: FILTERLABEL,\n    selectedLabel: SELECTEDLABEL,\n    dataTest: DATATEST,\n    multiSelect: multiSelect,\n    validator: validator,\n    autoSelectFirst: true\n  }, rest)));\n};\nProgramPicker.defaultProps = {\n  label: LABEL,\n  multiSelect: false,\n  show: true,\n  includeEvents: false\n};\nProgramPicker.propTypes = {\n  includeEvents: PropTypes.bool,\n  label: PropTypes.string,\n  multiSelect: PropTypes.bool,\n  show: PropTypes.bool\n};\nexport { ProgramPicker };","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, CheckboxFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { FormField } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst NAME = 'includeChildren';\nconst DATATEST = 'input-include-children';\nconst SHORT_LABEL = i18n.t('Include descendants');\nconst LABEL = 'Include descendants of selected thematic areas';\nconst IncludeChildren = () => /*#__PURE__*/React.createElement(FormField, {\n  label: SHORT_LABEL,\n  dataTest: DATATEST\n}, /*#__PURE__*/React.createElement(Field, {\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  name: NAME,\n  label: LABEL,\n  dataTest: `${DATATEST}-sf`\n}));\nexport { IncludeChildren };","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, CheckboxFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { FormField } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst NAME = 'includeDeleted';\nconst DATATEST = 'input-include-deleted';\nconst SHORT_LABEL = i18n.t('Include deleted');\nconst LABEL = i18n.t('Include deleted data in export');\nconst IncludeDeleted = () => /*#__PURE__*/React.createElement(FormField, {\n  label: SHORT_LABEL,\n  dataTest: DATATEST\n}, /*#__PURE__*/React.createElement(Field, {\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  name: NAME,\n  label: LABEL,\n  dataTest: `${DATATEST}-sf`\n}));\nexport { IncludeDeleted };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst compressionOptions = [{\n  value: 'zip',\n  label: i18n.t('Zip')\n}, {\n  value: 'gz',\n  label: i18n.t('GZip')\n}, {\n  value: '',\n  label: i18n.t('Uncompressed')\n}];\nconst defaultCompressionOption = compressionOptions[0].value;\nconst NAME = 'compression';\nconst DATATEST = 'input-compression';\nconst LABEL = i18n.t('Compression mode');\nconst Compression = () => /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: compressionOptions,\n  dataTest: DATATEST\n});\nexport { Compression, defaultCompressionOption };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst inclusionOptions = [{\n  value: 'SELECTED',\n  label: 'Only include selected thematic area / program',\n  prefix: i18n.t('Selected')\n}, {\n  value: 'CHILDREN',\n  label: i18n.t('Include the first level of units inside selections'),\n  prefix: i18n.t('Directly below')\n}, {\n  value: 'DESCENDANTS',\n  label: i18n.t('Include all units inside selections'),\n  prefix: i18n.t('All below')\n}];\nconst defaultInclusionOption = inclusionOptions[0].value;\nconst NAME = 'inclusion';\nconst DATATEST = 'input-inclusion';\nconst LABEL = 'How should thematic areas / programs inside the selection be included?';\nconst Inclusion = () => /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: inclusionOptions,\n  dataTest: DATATEST,\n  vertical: true\n});\nexport { Inclusion, defaultInclusionOption };","import i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { DATE_VALIDATOR } from '../DatePicker/DatePickerField.js';\nimport { DatePickerField } from '../index.js';\nconst NAME = 'startDate';\nconst DATATEST = 'input-start-date';\nconst LABEL = i18n.t('Start date');\nconst VALIDATOR = composeValidators(hasValue, DATE_VALIDATOR);\nconst StartDate = ({\n  name,\n  label\n}) => /*#__PURE__*/React.createElement(DatePickerField, {\n  name: name !== null && name !== void 0 ? name : NAME,\n  validator: VALIDATOR,\n  label: label !== null && label !== void 0 ? label : LABEL,\n  dataTest: DATATEST\n});\nStartDate.propTypes = {\n  label: PropTypes.string,\n  name: PropTypes.string\n};\nexport { StartDate };","import i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { DATE_VALIDATOR } from '../DatePicker/DatePickerField.js';\nimport { DatePickerField } from '../index.js';\nconst NAME = 'endDate';\nconst DATATEST = 'input-end-date';\nconst LABEL = i18n.t('End date');\nconst VALIDATOR = composeValidators(hasValue, DATE_VALIDATOR);\nconst EndDate = ({\n  name,\n  label\n}) => /*#__PURE__*/React.createElement(DatePickerField, {\n  name: name !== null && name !== void 0 ? name : NAME,\n  validator: VALIDATOR,\n  label: label !== null && label !== void 0 ? label : LABEL,\n  dataTest: DATATEST\n});\nEndDate.propTypes = {\n  label: PropTypes.string,\n  name: PropTypes.string\n};\nexport { EndDate };","import i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst DATATEST = 'input-export-submit';\nconst ExportButton = ({\n  label,\n  disabledLabel,\n  disabled\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  style: {\n    marginBottom: 'var(--spacers-dp24)'\n  }\n}, /*#__PURE__*/React.createElement(Button, {\n  primary: true,\n  type: \"submit\",\n  dataTest: DATATEST,\n  disabled: disabled\n}, disabled ? disabledLabel : label));\nExportButton.defaultProps = {\n  disabledLabel: i18n.t('Loading export...')\n};\nExportButton.propTypes = {\n  label: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  disabledLabel: PropTypes.string\n};\nexport { ExportButton };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui';\nimport React from 'react';\nimport { ProgramStages as ProgramStagesGeneric } from '../index.js';\nimport { SINGLE_EXACT_PROGRAMSTAGE_VALIDATOR } from '../ProgramStages/ProgramStages.js';\nconst VALIDATOR = composeValidators(hasValue, SINGLE_EXACT_PROGRAMSTAGE_VALIDATOR);\nconst NAME = 'programStage';\nconst LABEL = i18n.t('Which program stage should be included?');\nconst DATATEST = 'input-program-stage-select';\nconst ProgramStages = props => /*#__PURE__*/React.createElement(ProgramStagesGeneric, _extends({\n  name: NAME,\n  label: LABEL,\n  validator: VALIDATOR,\n  dataTest: DATATEST\n}, props));\nexport { ProgramStages };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Schemas } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst SINGLE_SCHEMA_VALIDATOR = checkedSchemas => checkedSchemas.length == 0 ? i18n.t('At least one schema must be selected') : undefined;\nconst Wrapper = ({\n  input: {\n    onChange\n  },\n  meta,\n  ...rest\n}) => /*#__PURE__*/React.createElement(Schemas, _extends({\n  meta: meta,\n  setCheckedSchemas: onChange\n}, rest));\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.arrayOf(PropTypes.string).isRequired,\n    onChange: PropTypes.func\n  }).isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\nconst SchemasField = ({\n  name,\n  validator,\n  ...rest\n}) => {\n  return /*#__PURE__*/React.createElement(Field, _extends({\n    component: Wrapper,\n    name: name,\n    validate: validator\n  }, rest));\n};\nSchemasField.propTypes = {\n  name: PropTypes.string.isRequired,\n  validator: PropTypes.func\n};\nexport { SchemasField, SINGLE_SCHEMA_VALIDATOR };","import { hasValue, composeValidators } from '@dhis2/ui';\nimport React from 'react';\nimport { SchemasField } from '../index.js';\nimport { SINGLE_SCHEMA_VALIDATOR } from '../Schemas/SchemasField.js';\nconst NAME = 'checkedSchemas';\nconst VALIDATOR = composeValidators(hasValue, SINGLE_SCHEMA_VALIDATOR);\nconst DATATEST = 'input-schemas';\nconst EXCLUDE_SCHEMAS = new Set(['analyticsTableHooks', 'charts', 'constants', 'dataElementDimensions', 'dataEntryForms', 'dataSetNotificationTemplates', 'dataStores', 'documents', 'eventCharts', 'eventReports', 'icons', 'jobConfigurations', 'messageConversations', 'metadataVersions', 'minMaxDataElements', 'oAuth2Clients', 'programDataElements', 'programNotificationTemplates', 'pushAnalysis', 'reportTables', 'reportingRates', 'reports', 'sections', 'smsCommands', 'sqlViews', 'trackedEntityInstanceFilters', 'validationNotificationTemplates']);\nconst Schemas = () => /*#__PURE__*/React.createElement(SchemasField, {\n  name: NAME,\n  excludeSchemas: EXCLUDE_SCHEMAS,\n  validator: VALIDATOR,\n  checkedByDefault: true,\n  dataTest: DATATEST\n});\nexport { Schemas };","import i18n from '@dhis2/d2-i18n';\nimport { SingleSelectFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { StyledField } from '../index.js';\nconst objectTypeOptions = [{\n  value: 'dataSets',\n  label: i18n.t('Data sets')\n}, {\n  value: 'programs',\n  label: i18n.t('Programs')\n}, {\n  value: 'categoryCombos',\n  label: i18n.t('Category combination')\n}, {\n  value: 'dashboards',\n  label: i18n.t('Dashboard')\n}, {\n  value: 'dataElementGroups',\n  label: i18n.t('Data element groups')\n}, {\n  value: 'optionSets',\n  label: i18n.t('Option sets')\n}];\nconst defaultObjectTypeOption = objectTypeOptions[0].value;\nconst NAME = 'objectType';\nconst LABEL = i18n.t('Object type');\nconst DATATEST = 'input-object-type';\nconst ObjectType = () => /*#__PURE__*/React.createElement(\"div\", {\n  style: {\n    maxWidth: '480px'\n  }\n}, /*#__PURE__*/React.createElement(StyledField, {\n  component: SingleSelectFieldFF,\n  name: NAME,\n  label: LABEL,\n  options: objectTypeOptions,\n  dataTest: DATATEST,\n  filled: true,\n  initialFocus: true\n}));\nexport { ObjectType, defaultObjectTypeOption };","import i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators, SingleSelectFieldFF } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useObjects } from '../../hooks/index.js';\nimport { StyledField } from '../index.js';\nconst SINGLE_EXACT_OBJECT_VALIDATOR = object => !object ? i18n.t('One object must be selected') : undefined;\nconst NAME = 'object';\nconst LABEL = i18n.t('Object');\nconst VALIDATOR = composeValidators(hasValue, SINGLE_EXACT_OBJECT_VALIDATOR);\nconst DATATEST = 'input-object-select';\nconst Objects = ({\n  objectType,\n  form\n}) => {\n  const setObjectListSelected = val => form.change(NAME, val);\n  const {\n    loading: objectsLoading,\n    error: objectsError,\n    validationText: objectsValidationText,\n    objects\n  } = useObjects(objectType, setObjectListSelected);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: '480px'\n    }\n  }, /*#__PURE__*/React.createElement(StyledField, {\n    component: SingleSelectFieldFF,\n    loading: objectsLoading,\n    name: NAME,\n    label: LABEL,\n    options: objects,\n    validate: VALIDATOR,\n    dataTest: DATATEST,\n    validationText: objectsValidationText,\n    error: !!objectsError,\n    filterable: true\n  }));\n};\nObjects.propTypes = {\n  form: PropTypes.object.isRequired,\n  objectType: PropTypes.string.isRequired\n};\nexport { Objects };","import { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { useState, useEffect } from 'react';\nconst listQuery = resource => ({\n  data: {\n    resource: resource,\n    fields: 'id,displayName',\n    params: {\n      paging: 'false'\n    }\n  }\n});\nconst useObjects = (type, setSelected) => {\n  const engine = useDataEngine();\n  const [error, setError] = useState(undefined);\n  const [loading, setLoading] = useState(true);\n  const [objects, setObjects] = useState([]);\n  useEffect(() => {\n    setLoading(true);\n    setSelected(undefined);\n    engine.query(listQuery(type), {\n      onComplete: data => {\n        const list = data.data[type];\n        const formattedList = list.map(e => ({\n          value: e.id,\n          label: e.displayName\n        }));\n        setObjects(formattedList);\n        setSelected(formattedList[0].value);\n        setLoading(false);\n      },\n      onError: error => {\n        setError(error);\n        console.error('useObjects error: ', error);\n      }\n    });\n  }, [type]);\n  const validationText = error && `${i18n.t('Something went wrong when loading the objects')} : ${error.message}`;\n  return {\n    loading,\n    error,\n    validationText,\n    objects\n  };\n};\nexport { useObjects };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { DataElementIdScheme as DataElementIdSchemeGeneric } from '../index.js';\nconst dataElementIdSchemeOptions = [{\n  value: 'UID',\n  label: i18n.t('Uid')\n}, {\n  value: 'CODE',\n  label: i18n.t('Code')\n}, {\n  value: 'NAME',\n  label: i18n.t('Name')\n}];\nconst defaultDataElementIdSchemeOption = dataElementIdSchemeOptions[0].value;\nconst NAME = 'dataElementIdScheme';\nconst DATATEST = 'input-data-element-id-scheme';\nconst LABEL = i18n.t('Data element ID scheme');\nconst DataElementIdScheme = () => /*#__PURE__*/React.createElement(DataElementIdSchemeGeneric, {\n  name: NAME,\n  label: LABEL,\n  dataElementIdSchemeOptions: dataElementIdSchemeOptions,\n  dataTest: DATATEST\n});\nexport { DataElementIdScheme, defaultDataElementIdSchemeOption };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { EventIdScheme as EventIdSchemeGeneric } from '../index.js';\nconst eventIdSchemeOptions = [{\n  value: 'UID',\n  label: i18n.t('Uid')\n}, {\n  value: 'CODE',\n  label: i18n.t('Code')\n}];\nconst defaultEventIdSchemeOption = eventIdSchemeOptions[0].value;\nconst NAME = 'eventIdScheme';\nconst DATATEST = 'input-event-id-scheme';\nconst LABEL = i18n.t('Event ID scheme');\nconst EventIdScheme = () => /*#__PURE__*/React.createElement(EventIdSchemeGeneric, {\n  name: NAME,\n  label: LABEL,\n  eventIdSchemeOptions: eventIdSchemeOptions,\n  dataTest: DATATEST\n});\nexport { EventIdScheme, defaultEventIdSchemeOption };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { IdScheme as IdSchemeGeneric } from '../index.js';\nconst idSchemeOptions = [{\n  value: 'UID',\n  label: i18n.t('Uid')\n}, {\n  value: 'CODE',\n  label: i18n.t('Code')\n}];\nconst defaultIdSchemeOption = idSchemeOptions[0].value;\nconst NAME = 'idScheme';\nconst DATATEST = 'input-id-scheme';\nconst LABEL = i18n.t('ID scheme');\nconst IdScheme = () => /*#__PURE__*/React.createElement(IdSchemeGeneric, {\n  name: NAME,\n  label: LABEL,\n  idSchemeOptions: idSchemeOptions,\n  dataTest: DATATEST\n});\nexport { IdScheme, defaultIdSchemeOption };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { OrgUnitIdScheme as OrgUnitIdSchemeGeneric } from '../index.js';\nconst orgUnitIdSchemeOptions = [{\n  value: 'UID',\n  label: i18n.t('Uid')\n}, {\n  value: 'CODE',\n  label: i18n.t('Code')\n}, {\n  value: 'NAME',\n  label: i18n.t('Name')\n}];\nconst defaultOrgUnitIdSchemeOption = orgUnitIdSchemeOptions[0].value;\nconst NAME = 'orgUnitIdScheme';\nconst DATATEST = 'input-org-unit-id-scheme';\nconst LABEL = 'Thematic area ID scheme';\nconst OrgUnitIdScheme = () => /*#__PURE__*/React.createElement(OrgUnitIdSchemeGeneric, {\n  name: NAME,\n  label: LABEL,\n  orgUnitIdSchemeOptions: orgUnitIdSchemeOptions,\n  dataTest: DATATEST\n});\nexport { OrgUnitIdScheme, defaultOrgUnitIdSchemeOption };","import i18n from '@dhis2/d2-i18n';\nimport { SingleSelectFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { StyledField } from '../index.js';\nconst orgUnitIdSchemeOptions = [{\n  value: 'ID',\n  label: i18n.t('Id')\n}, {\n  value: 'CODE',\n  label: i18n.t('Code')\n}, {\n  value: 'NAME',\n  label: i18n.t('Name')\n}];\nconst defaultOrgUnitIdSchemeCoreOption = orgUnitIdSchemeOptions[0].value;\nconst NAME = 'orgUnitIdSchemeCore';\nconst DATATEST = 'input-org-unit-id-scheme-core';\nconst LABEL = 'Thematic area ID scheme';\nconst OrgUnitIdSchemeCore = () => /*#__PURE__*/React.createElement(StyledField, {\n  component: SingleSelectFieldFF,\n  name: NAME,\n  label: LABEL,\n  options: orgUnitIdSchemeOptions,\n  dataTest: DATATEST\n});\nexport { OrgUnitIdSchemeCore, defaultOrgUnitIdSchemeCoreOption };","const hasAuthorityToSkipAudit = authorities => authorities.includes('ALL') || authorities.includes('F_SKIP_DATA_IMPORT_AUDIT');\nconst hasAuthorityToSelectAllOrgUnits = authorities => authorities.includes('ALL');\nexport { hasAuthorityToSkipAudit, hasAuthorityToSelectAllOrgUnits };","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useContext } from 'react';\nimport { UserContext } from '../../contexts/index.js';\nimport { RadioGroupField } from '../index.js';\nimport { hasAuthorityToSelectAllOrgUnits } from '../WithAuthority/predicates.js';\nimport { OrgUnitTree, Inclusion } from './index.js';\nconst OU_MODE_MANUAL_VALUE = ':MANUAL:';\nconst orgUnitSelectionModeOptions = [{\n  value: 'ACCESSIBLE',\n  label: i18n.t('Data view organisation units associated with the current user'),\n  prefix: i18n.t('Accessible')\n}, {\n  value: 'CAPTURE',\n  label: i18n.t('Data capture organisation units associated with the current user'),\n  prefix: i18n.t('Capture')\n}, {\n  value: 'ALL',\n  label: i18n.t('All organisation units in the system'),\n  prefix: i18n.t('All')\n}, {\n  value: OU_MODE_MANUAL_VALUE,\n  label: i18n.t('Manually select organisation units from list')\n}];\nconst defaultOrgUnitSelectionModeOption = orgUnitSelectionModeOptions[3].value;\nconst NAME = 'ouMode';\nconst DATATEST = 'input-ouMode';\nconst LABEL = i18n.t('Which organisation units should be included?');\nconst OrgUnitMode = ({\n  value\n}) => {\n  const user = useContext(UserContext);\n  const canSelectAllOrgUnits = user ? hasAuthorityToSelectAllOrgUnits(user.authorities) : false;\n  const options = canSelectAllOrgUnits ? orgUnitSelectionModeOptions : orgUnitSelectionModeOptions.filter(({\n    value\n  }) => value != 'ALL');\n  return /*#__PURE__*/React.createElement(RadioGroupField, {\n    name: NAME,\n    label: LABEL,\n    options: options,\n    dataTest: DATATEST,\n    vertical: true\n  }, value === OU_MODE_MANUAL_VALUE && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(OrgUnitTree, null), /*#__PURE__*/React.createElement(Inclusion, null)));\n};\nOrgUnitMode.propTypes = {\n  value: PropTypes.string.isRequired\n};\nexport { OrgUnitMode, defaultOrgUnitSelectionModeOption, OU_MODE_MANUAL_VALUE };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst teiTypeFilterOptions = [{\n  value: 'PROGRAM',\n  label: i18n.t('Program')\n}, {\n  value: 'TE',\n  label: i18n.t('Tracked entity type')\n}];\nconst defaultTEITypeFilterOption = teiTypeFilterOptions[0].value;\nconst NAME = 'teiTypeFilter';\nconst DATATEST = 'input-tei-type-filter';\nconst LABEL = i18n.t('Filter by');\nconst TEITypeFilter = () => /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: teiTypeFilterOptions,\n  dataTest: DATATEST\n});\nexport { TEITypeFilter, defaultTEITypeFilterOption };","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst programStatusOptions = [{\n  value: '',\n  label: i18n.t('All statuses')\n}, {\n  value: 'ACTIVE',\n  label: i18n.t('Active')\n}, {\n  value: 'COMPLETED',\n  label: i18n.t('Completed')\n}, {\n  value: 'CANCELLED',\n  label: i18n.t('Cancelled')\n}];\nconst defaultProgramStatusOption = programStatusOptions[0].value;\nconst NAME = 'programStatus';\nconst DATATEST = 'input-program-status';\nconst LABEL = i18n.t('Include only entities with status');\nconst ProgramStatus = ({\n  show\n}) => show && /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: programStatusOptions,\n  dataTest: DATATEST\n});\nProgramStatus.propTypes = {\n  show: PropTypes.bool\n};\nexport { ProgramStatus, defaultProgramStatusOption };","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst followUpStatusOptions = [{\n  value: 'ALL',\n  label: i18n.t('All')\n}, {\n  value: 'true',\n  label: i18n.t('Marked for follow-up')\n}, {\n  value: 'false',\n  label: i18n.t('Not marked for follow-up')\n}];\nconst defaultFollowUpStatusOption = followUpStatusOptions[0].value;\nconst NAME = 'followUp';\nconst DATATEST = 'input-follow-up-status';\nconst LABEL = i18n.t('Include only entities with follow-up status');\nconst FollowUpStatus = ({\n  show\n}) => show && /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: followUpStatusOptions,\n  dataTest: DATATEST\n});\nFollowUpStatus.propTypes = {\n  show: PropTypes.bool\n};\nexport { FollowUpStatus, defaultFollowUpStatusOption };","import i18n from '@dhis2/d2-i18n';\nimport { composeValidators } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { OPTIONAL_DATE_VALIDATOR } from '../DatePicker/DatePickerField.js';\nimport { DatePickerField } from '../index.js';\nconst NAME = 'enrollmentEnrolledAfter';\nconst DATATEST = 'input-program-start-date';\nconst LABEL = i18n.t('Start date');\nconst VALIDATOR = composeValidators(OPTIONAL_DATE_VALIDATOR);\nconst ProgramStartDate = ({\n  show\n}) => show && /*#__PURE__*/React.createElement(DatePickerField, {\n  name: NAME,\n  validator: VALIDATOR,\n  label: LABEL,\n  dataTest: DATATEST\n});\nProgramStartDate.propTypes = {\n  show: PropTypes.bool\n};\nexport { ProgramStartDate };","import i18n from '@dhis2/d2-i18n';\nimport { composeValidators } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { OPTIONAL_DATE_VALIDATOR } from '../DatePicker/DatePickerField.js';\nimport { DatePickerField } from '../index.js';\nconst NAME = 'enrollmentEnrolledBefore';\nconst DATATEST = 'input-program-end-date';\nconst LABEL = i18n.t('End date');\nconst VALIDATOR = composeValidators(OPTIONAL_DATE_VALIDATOR);\nconst ProgramEndDate = ({\n  show\n}) => show && /*#__PURE__*/React.createElement(DatePickerField, {\n  name: NAME,\n  validator: VALIDATOR,\n  label: LABEL,\n  dataTest: DATATEST\n});\nProgramEndDate.propTypes = {\n  show: PropTypes.bool\n};\nexport { ProgramEndDate };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { ResourcePickerField } from '../index.js';\nimport { resourceTypes } from '../ResourcePicker/resourceTypes.js';\nconst NAME = 'selectedTETypes';\nconst DATATEST = 'input-te-type-picker';\nconst LABEL = i18n.t('Tracked entity types');\nconst LISTNAME = 'selectedTETypes';\nconst FILTERLABEL = i18n.t('Filter tracked entity types by name');\nconst SELECTEDLABEL = i18n.t('Selected tracked entity types');\nconst ERRORMESSAGE = i18n.t('Something went wrong when loading the tracked entity types!');\nconst RESOURCETYPE = resourceTypes.TETYPE;\nconst SINGLE_TETYPE_VALIDATOR = selectedTypes => selectedTypes.length == 0 ? i18n.t('At least one tracked entity type must be selected') : undefined;\nconst SINGLE_EXACT_TETYPE_VALIDATOR = selectedTypes => !selectedTypes ? i18n.t('One tracked entity type must be selected') : undefined;\nconst TETypePicker = ({\n  multiSelect,\n  show,\n  ...rest\n}) => {\n  const teTypeValidator = multiSelect ? SINGLE_TETYPE_VALIDATOR : SINGLE_EXACT_TETYPE_VALIDATOR;\n  const validator = composeValidators(hasValue, teTypeValidator);\n  return show && /*#__PURE__*/React.createElement(ResourcePickerField, _extends({\n    name: NAME,\n    resourceType: RESOURCETYPE,\n    errorMessage: ERRORMESSAGE,\n    listName: LISTNAME,\n    label: LABEL,\n    filterLabel: FILTERLABEL,\n    selectedLabel: SELECTEDLABEL,\n    dataTest: DATATEST,\n    multiSelect: multiSelect,\n    validator: validator,\n    withActions: false,\n    autoSelectFirst: true\n  }, rest));\n};\nTETypePicker.defaultProps = {\n  multiSelect: false\n};\nTETypePicker.propTypes = {\n  multiSelect: PropTypes.bool,\n  show: PropTypes.bool\n};\nexport { TETypePicker };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { RadioGroupField } from '../index.js';\nconst lastUpdatedFilterOptions = [{\n  value: 'NONE',\n  label: i18n.t('Do not filter by last updated date')\n}, {\n  value: 'DATE',\n  label: i18n.t('Start/end dates')\n}, {\n  value: 'DURATION',\n  label: i18n.t('Time since last updated')\n}];\nconst defaultLastUpdatedFilterOption = lastUpdatedFilterOptions[0].value;\nconst NAME = 'lastUpdatedFilter';\nconst DATATEST = 'input-last-updated-filter';\nconst LABEL = i18n.t('Filter by last updated date');\nconst LastUpdatedFilter = () => /*#__PURE__*/React.createElement(RadioGroupField, {\n  name: NAME,\n  label: LABEL,\n  options: lastUpdatedFilterOptions,\n  dataTest: DATATEST\n});\nexport { LastUpdatedFilter, defaultLastUpdatedFilterOption };","import i18n from '@dhis2/d2-i18n';\nimport { composeValidators } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { OPTIONAL_DATE_VALIDATOR } from '../DatePicker/DatePickerField.js';\nimport { DatePickerField } from '../index.js';\nconst NAME = 'updatedAfter';\nconst DATATEST = 'input-last-updated-start-date';\nconst LABEL = i18n.t('Last updated start date');\nconst VALIDATOR = composeValidators(OPTIONAL_DATE_VALIDATOR);\nconst LastUpdatedStartDate = ({\n  show\n}) => show && /*#__PURE__*/React.createElement(DatePickerField, {\n  name: NAME,\n  validator: VALIDATOR,\n  label: LABEL,\n  dataTest: DATATEST\n});\nLastUpdatedStartDate.propTypes = {\n  show: PropTypes.bool\n};\nexport { LastUpdatedStartDate };","import i18n from '@dhis2/d2-i18n';\nimport { composeValidators } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { OPTIONAL_DATE_VALIDATOR } from '../DatePicker/DatePickerField.js';\nimport { DatePickerField } from '../index.js';\nconst NAME = 'updatedBefore';\nconst DATATEST = 'input-last-updated-end-date';\nconst LABEL = i18n.t('Last updated end date');\nconst VALIDATOR = composeValidators(OPTIONAL_DATE_VALIDATOR);\nconst LastUpdatedEndDate = ({\n  show\n}) => show && /*#__PURE__*/React.createElement(DatePickerField, {\n  name: NAME,\n  validator: VALIDATOR,\n  label: LABEL,\n  dataTest: DATATEST\n});\nLastUpdatedEndDate.propTypes = {\n  show: PropTypes.bool\n};\nexport { LastUpdatedEndDate };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { InputField, ReactFinalForm } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { FormField } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\n\n// (\\d+d)?: one or more numbers followed by d; d for days\n// rest of the capturing groups are similar to the one described above\nconst durationRegex = /^(\\d+d)?(\\d+h)?(\\d+m)?(\\d+s)?$/;\nconst DURATION_VALIDATOR = duration => !duration || duration.match(durationRegex) ? undefined : i18n.t('Invalid duration');\nconst formatHelpText = `${i18n.t('Format')}: 00d00h00m00s`;\nconst exampleDuration = '100d5h30m';\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta: {\n    error\n  },\n  inputName,\n  label,\n  dataTest\n}) => /*#__PURE__*/React.createElement(FormField, {\n  label: label,\n  dataTest: dataTest\n}, /*#__PURE__*/React.createElement(InputField, {\n  name: inputName,\n  value: value,\n  onChange: ({\n    value\n  }) => onChange(value),\n  inputWidth: \"200px\",\n  error: !!error,\n  validationText: error,\n  helpText: formatHelpText,\n  placeholder: exampleDuration\n}));\nWrapper.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  input: PropTypes.shape({\n    value: PropTypes.oneOfType([PropTypes.instanceOf(Date), PropTypes.string]),\n    onChange: PropTypes.func\n  }).isRequired,\n  inputName: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string\n  }).isRequired\n};\nconst DurationField = ({\n  name,\n  validator,\n  ...rest\n}) => /*#__PURE__*/React.createElement(Field, _extends({\n  component: Wrapper,\n  name: name,\n  inputName: name,\n  validate: validator\n}, rest));\nDurationField.propTypes = {\n  name: PropTypes.string.isRequired,\n  validator: PropTypes.func.isRequired\n};\nexport { DurationField, DURATION_VALIDATOR };","import i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { DURATION_VALIDATOR } from '../Duration/DurationField.js';\nimport { DurationField } from '../index.js';\nconst NAME = 'updatedWithin';\nconst DATATEST = 'input-last-updated-duration';\nconst LABEL = i18n.t('Last updated duration');\nconst VALIDATOR = composeValidators(hasValue, DURATION_VALIDATOR);\nconst LastUpdatedDuration = ({\n  show\n}) => show && /*#__PURE__*/React.createElement(DurationField, {\n  name: NAME,\n  validator: VALIDATOR,\n  label: LABEL,\n  dataTest: DATATEST\n});\nLastUpdatedDuration.propTypes = {\n  show: PropTypes.bool\n};\nexport { LastUpdatedDuration };","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, CheckboxFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { FormField, RadioGroupField } from '../index.js';\nimport { UserPicker } from './index.js';\nconst {\n  useField,\n  Field\n} = ReactFinalForm;\nconst assignedUserModeOptions = [{\n  value: 'ANY',\n  label: i18n.t('Any user')\n}, {\n  value: 'CURRENT',\n  label: i18n.t('Current user')\n}, {\n  value: 'NONE',\n  label: i18n.t('No user/unassigned')\n}, {\n  value: 'PROVIDED',\n  label: i18n.t('Selected users')\n}];\nconst defaultAssignedUserModeOption = assignedUserModeOptions[0].value;\nconst FILTER_NAME = 'assignedUserModeFilter';\nconst FILTER_DATATEST = 'input-assigned-user-mode-filter';\nconst FILTER_SHORT_LABEL = i18n.t('Filter by assigned user');\nconst FILTER_LABEL = i18n.t('Export only instances with events assigned to specific users');\nconst NAME = 'assignedUserMode';\nconst DATATEST = 'input-assigned-user-mode';\nconst LABEL = i18n.t('Assigned user(s)');\nconst AssignedUserMode = () => {\n  const {\n    input: filterInput\n  } = useField(FILTER_NAME);\n  const {\n    value: showOptions\n  } = filterInput;\n  const {\n    input: userInput\n  } = useField(NAME);\n  const {\n    value: userMode\n  } = userInput;\n  const showUserPicker = userMode === 'PROVIDED';\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FormField, {\n    label: FILTER_SHORT_LABEL,\n    dataTest: FILTER_DATATEST\n  }, /*#__PURE__*/React.createElement(Field, {\n    type: \"checkbox\",\n    component: CheckboxFieldFF,\n    name: FILTER_NAME,\n    label: FILTER_LABEL,\n    dataTest: `${FILTER_DATATEST}-sf`\n  }), showOptions && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginLeft: 'var(--spacers-dp16)',\n      marginTop: 'var(--spacers-dp16)'\n    }\n  }, /*#__PURE__*/React.createElement(RadioGroupField, {\n    name: NAME,\n    options: assignedUserModeOptions,\n    dataTest: DATATEST,\n    label: LABEL\n  }), /*#__PURE__*/React.createElement(UserPicker, {\n    show: showUserPicker\n  }))));\n};\nexport { AssignedUserMode, defaultAssignedUserModeOption };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { hasValue, composeValidators } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { ResourcePickerField } from '../index.js';\nimport { resourceTypes } from '../ResourcePicker/resourceTypes.js';\nconst NAME = 'selectedUsers';\nconst DATATEST = 'input-user-picker';\nconst LABEL = i18n.t('Which users should be used?');\nconst LISTNAME = 'userPicker';\nconst FILTERLABEL = i18n.t('Filter users');\nconst SELECTEDLABEL = i18n.t('Selected users');\nconst ERRORMESSAGE = i18n.t('Something went wrong when loading the users!');\nconst RESOURCETYPE = resourceTypes.USER;\nconst SINGLE_USER_VALIDATOR = selectedUsers => selectedUsers.length == 0 ? i18n.t('At least one user must be selected') : undefined;\nconst SINGLE_EXACT_USER_VALIDATOR = selectedUsers => selectedUsers.length != 1 ? i18n.t('One user must be selected') : undefined;\nconst UserPicker = ({\n  multiSelect,\n  show,\n  ...rest\n}) => {\n  const userValidator = multiSelect ? SINGLE_USER_VALIDATOR : SINGLE_EXACT_USER_VALIDATOR;\n  const validator = composeValidators(hasValue, userValidator);\n  return show && /*#__PURE__*/React.createElement(ResourcePickerField, _extends({\n    name: NAME,\n    resourceType: RESOURCETYPE,\n    errorMessage: ERRORMESSAGE,\n    listName: LISTNAME,\n    label: LABEL,\n    filterLabel: FILTERLABEL,\n    selectedLabel: SELECTEDLABEL,\n    dataTest: DATATEST,\n    multiSelect: multiSelect,\n    validator: validator,\n    withActions: true\n  }, rest));\n};\nUserPicker.defaultProps = {\n  multiSelect: true\n};\nUserPicker.propTypes = {\n  multiSelect: PropTypes.bool,\n  show: PropTypes.bool\n};\nexport { UserPicker };","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, CheckboxFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { FormField } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst NAME = 'includeAllAttributes';\nconst DATATEST = 'input-include-all-attributes';\nconst SHORT_LABEL = i18n.t('Include all attributes');\nconst LABEL = i18n.t('Include all attributes');\nconst IncludeAllAttributes = () => /*#__PURE__*/React.createElement(FormField, {\n  label: SHORT_LABEL,\n  dataTest: DATATEST\n}, /*#__PURE__*/React.createElement(Field, {\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  name: NAME,\n  label: LABEL,\n  dataTest: `${DATATEST}-sf`\n}));\nexport { IncludeAllAttributes };","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { FormField } from '../index.js';\nconst DATATEST = 'input-dates';\nconst Dates = ({\n  label,\n  show,\n  children\n}) => {\n  return show && /*#__PURE__*/React.createElement(FormField, {\n    label: label,\n    dataTest: DATATEST\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    }\n  }, children[0], /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      marginLeft: 'var(--spacers-dp8)'\n    }\n  }, children[1])));\n};\nDates.defaultProps = {\n  label: '',\n  show: true\n};\nDates.propTypes = {\n  children: PropTypes.node.isRequired,\n  label: PropTypes.string,\n  show: PropTypes.bool\n};\nexport { Dates };","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, SingleSelectFieldFF, CircularLoader, Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { FormField } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\n\n// Default to empty - will be populated from API\nconst defaultThematicArea = '';\nconst defaultProgrammeArea = '';\nconst defaultProjectArea = '';\nconst THEMATIC_AREA_NAME = 'thematicArea';\nconst PROGRAMME_AREA_NAME = 'programmeArea';\nconst PROJECT_AREA_NAME = 'projectArea';\n\n// Custom validator that requires a non-empty value\nconst requireValue = value => {\n  if (!value || value === '') {\n    return i18n.t('This field is required');\n  }\n  return undefined;\n};\n\n// Query for fetching organizational hierarchy data from DHIS2\nconst hierarchyQuery = {\n  // Fetch level 2 org units for Thematic Areas\n  thematicAreas: {\n    resource: 'organisationUnits',\n    params: {\n      filter: 'level:eq:2',\n      fields: 'id,name',\n      paging: 'false'\n    }\n  },\n  // Fetch level 3 org units for Programme Areas\n  programmeAreas: {\n    resource: 'organisationUnits',\n    params: {\n      filter: 'level:eq:3',\n      fields: 'id,name',\n      paging: 'false'\n    }\n  },\n  // Fetch programs for Project Areas\n  projectAreas: {\n    resource: 'programs',\n    params: {\n      fields: 'id,name',\n      paging: 'false'\n    }\n  }\n};\nconst ProjectHierarchy = ({\n  show\n}) => {\n  var _data$thematicAreas, _data$thematicAreas$o, _data$programmeAreas, _data$programmeAreas$, _data$projectAreas, _data$projectAreas$pr;\n  const {\n    loading,\n    error,\n    data,\n    refetch,\n    called\n  } = useDataQuery(hierarchyQuery, {\n    lazy: true // Don't fetch automatically, we'll trigger when shown\n  });\n\n  // Fetch data when component becomes visible\n  useEffect(() => {\n    if (show && !called) {\n      refetch();\n    }\n  }, [show, called, refetch]);\n  if (!show) {\n    return null;\n  }\n\n  // Show loading state while waiting for data\n  if (loading || !called) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: '16px',\n        display: 'flex',\n        alignItems: 'center'\n      }\n    }, /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        marginLeft: '8px'\n      }\n    }, i18n.t('Loading hierarchy options...')));\n  }\n\n  // Log any errors but don't block rendering if we have partial data\n  if (error) {\n    console.error('Error loading hierarchy:', error);\n    // Only show error if we have no data at all\n    if (!data) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          padding: '16px',\n          backgroundColor: '#ffebee',\n          border: '1px solid #f44336',\n          borderRadius: '4px',\n          marginBottom: '16px'\n        }\n      }, /*#__PURE__*/React.createElement(Help, {\n        error: true\n      }, i18n.t('Failed to load hierarchy options. Error: {{message}}', {\n        message: error.message || 'Unknown error',\n        nsSeparator: '>'\n      })));\n    }\n  }\n\n  // Debug: Log the data structure\n  console.log('Hierarchy data:', data);\n\n  // Transform data into options format with empty/placeholder option\n  // Use ID as value (required by DHIS2) and name as label (for display)\n  const thematicAreaOptions = [{\n    label: i18n.t('Select a thematic area'),\n    value: ''\n  }, ...((data === null || data === void 0 ? void 0 : (_data$thematicAreas = data.thematicAreas) === null || _data$thematicAreas === void 0 ? void 0 : (_data$thematicAreas$o = _data$thematicAreas.organisationUnits) === null || _data$thematicAreas$o === void 0 ? void 0 : _data$thematicAreas$o.map(ou => ({\n    label: ou.name,\n    value: ou.id // Use ID for DHIS2\n  }))) || [])];\n  const programmeAreaOptions = [{\n    label: i18n.t('Select a programme area'),\n    value: ''\n  }, ...((data === null || data === void 0 ? void 0 : (_data$programmeAreas = data.programmeAreas) === null || _data$programmeAreas === void 0 ? void 0 : (_data$programmeAreas$ = _data$programmeAreas.organisationUnits) === null || _data$programmeAreas$ === void 0 ? void 0 : _data$programmeAreas$.map(ou => ({\n    label: ou.name,\n    value: ou.id // Use ID for DHIS2\n  }))) || [])];\n  const projectAreaOptions = [{\n    label: i18n.t('Select a project area'),\n    value: ''\n  }, ...((data === null || data === void 0 ? void 0 : (_data$projectAreas = data.projectAreas) === null || _data$projectAreas === void 0 ? void 0 : (_data$projectAreas$pr = _data$projectAreas.programs) === null || _data$projectAreas$pr === void 0 ? void 0 : _data$projectAreas$pr.map(program => ({\n    label: program.name,\n    value: program.id // Use ID for DHIS2\n  }))) || [])];\n\n  // Debug: Log the options\n  console.log('Thematic Area Options:', thematicAreaOptions);\n  console.log('Programme Area Options:', programmeAreaOptions);\n  console.log('Project Area Options:', projectAreaOptions);\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(FormField, {\n    label: i18n.t('Thematic Area'),\n    dataTest: \"input-thematic-area\"\n  }, /*#__PURE__*/React.createElement(Field, {\n    component: SingleSelectFieldFF,\n    name: THEMATIC_AREA_NAME,\n    options: thematicAreaOptions,\n    helpText: i18n.t('The top-level organizational category'),\n    dataTest: \"input-thematic-area-sf\",\n    validate: requireValue,\n    loading: loading,\n    required: true\n  })), /*#__PURE__*/React.createElement(FormField, {\n    label: i18n.t('Programme Area'),\n    dataTest: \"input-programme-area\"\n  }, /*#__PURE__*/React.createElement(Field, {\n    component: SingleSelectFieldFF,\n    name: PROGRAMME_AREA_NAME,\n    options: programmeAreaOptions,\n    helpText: i18n.t('The programme within the thematic area'),\n    dataTest: \"input-programme-area-sf\",\n    validate: requireValue,\n    loading: loading,\n    required: true\n  })), /*#__PURE__*/React.createElement(FormField, {\n    label: i18n.t('Project Area'),\n    dataTest: \"input-project-area\"\n  }, /*#__PURE__*/React.createElement(Field, {\n    component: SingleSelectFieldFF,\n    name: PROJECT_AREA_NAME,\n    options: projectAreaOptions,\n    helpText: i18n.t('The specific project area'),\n    dataTest: \"input-project-area-sf\",\n    validate: requireValue,\n    loading: loading,\n    required: true\n  })));\n};\nProjectHierarchy.propTypes = {\n  show: PropTypes.bool.isRequired\n};\nexport { ProjectHierarchy, defaultThematicArea, defaultProgrammeArea, defaultProjectArea };","import i18n from '@dhis2/d2-i18n';\nimport { FORM_ERROR, jobStartedMessage } from '../../utils/final-form.js';\nimport { uploadFile } from '../../utils/helper.js';\nconst onImport = ({\n  baseUrl,\n  setProgress,\n  addTask,\n  setShowFullSummaryTask\n}) => async values => {\n  const {\n    dryRun,\n    files,\n    format,\n    identifier,\n    importReportMode,\n    importStrategy,\n    atomicMode,\n    mergeMode,\n    flushMode,\n    skipSharing,\n    skipValidation,\n    inclusionStrategy,\n    isAsync,\n    firstRowIsHeader,\n    classKey\n  } = values;\n\n  // send xhr\n  const apiBaseUrl = `${baseUrl}/api/`;\n  const endpoint = 'metadata.json';\n  const params = [`importMode=${dryRun ? 'VALIDATE' : 'COMMIT'}`, `identifier=${identifier}`, `importReportMode=${importReportMode}`, `importStrategy=${importStrategy}`, `atomicMode=${atomicMode}`, `mergeMode=${mergeMode}`, `flushMode=${flushMode}`, `skipSharing=${skipSharing}`, `skipValidation=${skipValidation}`, `inclusionStrategy=${inclusionStrategy}`, `async=${isAsync}`, `format=${format}`, format == 'csv' ? `firstRowIsHeader=${firstRowIsHeader}&classKey=${classKey}` : ''].filter(s => s != '').join('&');\n  const url = `${apiBaseUrl}${endpoint}?${params}`;\n  try {\n    await uploadFile({\n      url,\n      file: files[0],\n      format: format,\n      type: 'METADATA_IMPORT',\n      isAsync: isAsync,\n      setProgress,\n      addEntry: (id, entry) => addTask('metadata', id, {\n        ...entry,\n        jobDetails: values\n      })\n    });\n    return jobStartedMessage;\n  } catch (e) {\n    const formErrors = validate(values);\n    const allErrors = {\n      [FORM_ERROR]: [e],\n      ...formErrors\n    };\n    return allErrors;\n  } finally {\n    setShowFullSummaryTask(true);\n  }\n};\nconst validate = values => {\n  const classKeyValidator = (format, classKey) => format == 'csv' && !classKey ? i18n.t('A class key must be selected') : undefined;\n  return {\n    classKey: classKeyValidator(values.format, values.classKey)\n  };\n};\nexport { onImport, validate };","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport React, { useContext, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Page, MetadataImportIcon, MoreOptions, BasicOptions, ValidationSummary, mergeOperation, MergeOperationNotice } from '../../components/index.js';\nimport { FileUpload, Format, formatNoXmlOptions, defaultFormatOption, FirstRowIsHeader, defaultFirstRowIsHeaderOption, ClassKey, Identifier, defaultIdentifierOption, ImportReportMode, defaultImportReportModeOption, ImportStrategy, defaultImportStrategyOption, AtomicMode, defaultAtomicModeOption, FlushMode, defaultFlushModeOption, SkipSharing, defaultSkipSharingOption, SkipValidation, defaultSkipValidationOption, IsAsync, defaultIsAsyncOption, InclusionStrategy, defaultInclusionStrategyOption, ImportButtonStrip, FormAlerts } from '../../components/Inputs/index.js';\nimport { TaskContext, getNewestTask } from '../../contexts/index.js';\nimport { getPrevJobDetails, getInitialBoolValue } from '../../utils/helper.js';\nimport { onImport } from './form-helper.js';\nconst {\n  Form\n} = ReactFinalForm;\n\n// PAGE INFO\nexport const PAGE_NAME = i18n.t('Metadata import');\nexport const PAGE_DESCRIPTION = i18n.t('Import metadata, such as data elements and organisation units, using JSON or CSV format.');\nconst PAGE_ICON = /*#__PURE__*/React.createElement(MetadataImportIcon, null);\nconst createInitialValues = prevJobDetails => ({\n  files: prevJobDetails.files,\n  format: prevJobDetails.format || defaultFormatOption,\n  identifier: prevJobDetails.identifier || defaultIdentifierOption,\n  importReportMode: prevJobDetails.importReportMode || defaultImportReportModeOption,\n  importStrategy: prevJobDetails.importStrategy || defaultImportStrategyOption,\n  firstRowIsHeader: getInitialBoolValue(prevJobDetails.firstRowIsHeader, defaultFirstRowIsHeaderOption),\n  atomicMode: prevJobDetails.atomicMode || defaultAtomicModeOption,\n  mergeMode: prevJobDetails.mergeMode || mergeOperation,\n  flushMode: prevJobDetails.flushMode || defaultFlushModeOption,\n  inclusionStrategy: prevJobDetails.inclusionStrategy || defaultInclusionStrategyOption,\n  skipSharing: getInitialBoolValue(prevJobDetails.skipSharing, defaultSkipSharingOption),\n  skipValidation: getInitialBoolValue(prevJobDetails.skipValidation, defaultSkipValidationOption),\n  isAsync: getInitialBoolValue(prevJobDetails.isAsync, defaultIsAsyncOption)\n});\nconst MetadataImport = () => {\n  const {\n    tasks: {\n      metadata: metadataTasks\n    },\n    addTask\n  } = useContext(TaskContext);\n\n  // recreating a previously run job\n  const query = useLocation().query;\n  const prevJobDetails = getPrevJobDetails(query, metadataTasks);\n  const initialValues = createInitialValues(prevJobDetails);\n  const [progress, setProgress] = useState(0);\n  const [showFullSummaryTask, setShowFullSummaryTask] = useState(false);\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onImport({\n    baseUrl,\n    setProgress,\n    addTask,\n    setShowFullSummaryTask\n  });\n  return /*#__PURE__*/React.createElement(Page, {\n    title: PAGE_NAME,\n    desc: PAGE_DESCRIPTION,\n    icon: PAGE_ICON,\n    loading: progress,\n    dataTest: \"page-import-metadata\",\n    summaryTask: getNewestTask(metadataTasks),\n    showFullSummaryTask: showFullSummaryTask\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    initialValues: initialValues,\n    subscription: {\n      values: true,\n      submitError: true\n    },\n    render: ({\n      handleSubmit,\n      form,\n      values,\n      submitError\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit\n    }, /*#__PURE__*/React.createElement(BasicOptions, null, /*#__PURE__*/React.createElement(FileUpload, {\n      helpText: i18n.t('Supported file types: JSON and CSV.', {\n        nsSeparator: '>'\n      })\n    }), /*#__PURE__*/React.createElement(Format, {\n      availableFormats: formatNoXmlOptions,\n      type: \"import\"\n    }), /*#__PURE__*/React.createElement(FirstRowIsHeader, {\n      show: values.format == 'csv'\n    }), /*#__PURE__*/React.createElement(ClassKey, {\n      show: values.format == 'csv',\n      form: form,\n      prevValue: prevJobDetails.classKey\n    }), /*#__PURE__*/React.createElement(Identifier, null), /*#__PURE__*/React.createElement(ImportReportMode, null), /*#__PURE__*/React.createElement(ImportStrategy, {\n      value: values.importStrategy\n    }), /*#__PURE__*/React.createElement(AtomicMode, null), /*#__PURE__*/React.createElement(MergeOperationNotice, null)), /*#__PURE__*/React.createElement(MoreOptions, null, /*#__PURE__*/React.createElement(FlushMode, null), /*#__PURE__*/React.createElement(SkipSharing, null), /*#__PURE__*/React.createElement(SkipValidation, null), /*#__PURE__*/React.createElement(IsAsync, null), /*#__PURE__*/React.createElement(InclusionStrategy, null)), /*#__PURE__*/React.createElement(ValidationSummary, null), /*#__PURE__*/React.createElement(ImportButtonStrip, {\n      form: form\n    }), /*#__PURE__*/React.createElement(FormAlerts, {\n      alerts: submitError\n    }))\n  }));\n};\nexport { MetadataImport };","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport React, { useState } from 'react';\nimport { Page, MetadataExportIcon, ValidationSummary } from '../../components/index.js';\nimport { Format, formatNoXmlNoCsvOptions, defaultFormatOption, Schemas, Compression, defaultCompressionOption, SkipSharing, ExportButton } from '../../components/Inputs/index.js';\nimport { onExport } from './form-helper.js';\nconst {\n  Form\n} = ReactFinalForm;\n\n// PAGE INFO\nexport const PAGE_NAME = i18n.t('Metadata export');\nexport const PAGE_DESCRIPTION = i18n.t('Export metadata, such as data elements and organisation units, in JSON format.');\nconst PAGE_ICON = /*#__PURE__*/React.createElement(MetadataExportIcon, null);\nconst initialValues = {\n  checkedSchemas: [],\n  format: defaultFormatOption,\n  compression: defaultCompressionOption,\n  skipSharing: false\n};\nconst MetadataExport = () => {\n  const [exportEnabled, setExportEnabled] = useState(true);\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onExport(baseUrl, setExportEnabled);\n  return /*#__PURE__*/React.createElement(Page, {\n    title: PAGE_NAME,\n    desc: PAGE_DESCRIPTION,\n    icon: PAGE_ICON,\n    limitWidth: false,\n    loading: !exportEnabled,\n    dataTest: \"page-export-metadata\"\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    initialValues: initialValues,\n    render: ({\n      handleSubmit\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit\n    }, /*#__PURE__*/React.createElement(Schemas, null), /*#__PURE__*/React.createElement(Format, {\n      availableFormats: formatNoXmlNoCsvOptions\n    }), /*#__PURE__*/React.createElement(Compression, null), /*#__PURE__*/React.createElement(SkipSharing, null), /*#__PURE__*/React.createElement(ValidationSummary, null), /*#__PURE__*/React.createElement(ExportButton, {\n      label: i18n.t('Export metadata'),\n      disabled: !exportEnabled\n    }))\n  }));\n};\nexport { MetadataExport };","import { locationAssign } from '../../utils/helper.js';\nconst onExport = (baseUrl, setExportEnabled) => values => {\n  setExportEnabled(false);\n  const {\n    checkedSchemas,\n    format,\n    compression,\n    skipSharing\n  } = values;\n\n  // generate download url\n  const apiBaseUrl = `${baseUrl}/api/`;\n  const endpoint = `metadata`;\n  const endpointExtension = compression ? `${format}.${compression}` : format;\n  const schemaParams = checkedSchemas.map(name => `${name}=true`).join('&');\n  const downloadUrlParams = `skipSharing=${skipSharing}&download=true&${schemaParams}`;\n  const url = `${apiBaseUrl}${endpoint}.${endpointExtension}?${downloadUrlParams}`;\n  locationAssign(url);\n  setExportEnabled(true);\n\n  // log for debugging purposes\n  console.log('metadata-export:', {\n    url,\n    params: downloadUrlParams\n  });\n};\nexport { onExport };","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport React, { useState } from 'react';\nimport { Page, MetadataDependencyExportIcon, ValidationSummary } from '../../components/index.js';\nimport { Format, formatNoXmlNoCsvOptions, defaultFormatOption, Compression, defaultCompressionOption, ObjectType, defaultObjectTypeOption, Objects, SkipSharing, ExportButton } from '../../components/Inputs/index.js';\nimport { onExport } from './form-helper.js';\nconst {\n  Form\n} = ReactFinalForm;\n\n// PAGE INFO\nexport const PAGE_NAME = i18n.t('Metadata dependency export');\nexport const PAGE_DESCRIPTION = i18n.t('Export metadata dependencies, such as data sets and programs, including related metadata objects, in JSON format.');\nconst PAGE_ICON = /*#__PURE__*/React.createElement(MetadataDependencyExportIcon, null);\nconst initialValues = {\n  objectType: defaultObjectTypeOption,\n  object: undefined,\n  format: defaultFormatOption,\n  compression: defaultCompressionOption,\n  skipSharing: false\n};\nconst MetadataDependencyExport = () => {\n  const [exportEnabled, setExportEnabled] = useState(true);\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onExport(baseUrl, setExportEnabled);\n  return /*#__PURE__*/React.createElement(Page, {\n    title: PAGE_NAME,\n    desc: PAGE_DESCRIPTION,\n    icon: PAGE_ICON,\n    loading: !exportEnabled,\n    dataTest: \"page-export-metadata-dependency\"\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    initialValues: initialValues,\n    subscription: {\n      values: true\n    },\n    render: ({\n      handleSubmit,\n      form,\n      values\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit\n    }, /*#__PURE__*/React.createElement(ObjectType, null), /*#__PURE__*/React.createElement(Objects, {\n      objectType: values.objectType,\n      form: form\n    }), /*#__PURE__*/React.createElement(Format, {\n      availableFormats: formatNoXmlNoCsvOptions\n    }), /*#__PURE__*/React.createElement(Compression, null), /*#__PURE__*/React.createElement(SkipSharing, null), /*#__PURE__*/React.createElement(ValidationSummary, null), /*#__PURE__*/React.createElement(ExportButton, {\n      label: i18n.t('Export metadata dependencies'),\n      disabled: !exportEnabled\n    }))\n  }));\n};\nexport { MetadataDependencyExport };","import { locationAssign } from '../../utils/helper.js';\nconst onExport = (baseUrl, setExportEnabled) => values => {\n  setExportEnabled(false);\n  const {\n    objectType,\n    object,\n    format,\n    compression,\n    skipSharing\n  } = values;\n\n  // generate URL and redirect\n  const apiBaseUrl = `${baseUrl}/api/`;\n  const endpoint = `${objectType}/${object}/metadata`;\n  const endpointExtension = compression ? `${format}.${compression}` : format;\n  const downloadUrlParams = `skipSharing=${skipSharing}&download=true`;\n  const url = `${apiBaseUrl}${endpoint}.${endpointExtension}?${downloadUrlParams}`;\n  locationAssign(url);\n  setExportEnabled(true);\n\n  // log for debugging purposes\n  console.log('metadata-dependency-export:', {\n    url,\n    params: downloadUrlParams\n  });\n};\nexport { onExport };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"JobOverview_container__kcBYK\"};","import i18n from '@dhis2/d2-i18n';\nimport React, { useContext } from 'react';\nimport { JobOverview as JobOverviewComponent, Page, TasksIcon } from '../../components/index.js';\nimport { TaskContext } from '../../contexts/index.js';\nimport styles from './JobOverview.module.css';\nconst JobOverview = () => {\n  const {\n    jobOverview,\n    updateJobOverview\n  } = useContext(TaskContext);\n  const setActiveTypes = types => {\n    const selectedJob = jobOverview.selectedJob;\n    const job = selectedJob && types.includes(selectedJob.importType) ? selectedJob : null;\n    updateJobOverview({\n      activeTypes: types,\n      selectedJob: job\n    });\n  };\n  const setSelectedJob = job => {\n    updateJobOverview({\n      selectedJob: job\n    });\n  };\n  return /*#__PURE__*/React.createElement(Page, {\n    title: PAGE_NAME,\n    desc: PAGE_DESCRIPTION,\n    icon: PAGE_ICON,\n    limitWidth: false,\n    dataTest: \"job-overview-page\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(JobOverviewComponent, {\n    activeTypes: jobOverview.activeTypes,\n    setActiveTypes: setActiveTypes,\n    selectedJob: jobOverview.selectedJob,\n    setSelectedJob: setSelectedJob\n  })));\n};\n\n// PAGE INFO\nconst PAGE_NAME = i18n.t('Job overview');\nconst PAGE_DESCRIPTION = i18n.t('An overview of all import jobs started this session.');\nconst PAGE_ICON = /*#__PURE__*/React.createElement(TasksIcon, null);\nexport { JobOverview };","// extracted by mini-css-extract-plugin\nexport default {\"geometryFormat\":\"GeometryFormat_geometryFormat__mBb0k\"};","import { SegmentedControl } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport styles from './GeometryFormat.module.css';\nconst geometryFormats = [{\n  label: 'GeoJSON',\n  value: 'geojson',\n  path: '/import/geometry'\n}, {\n  label: 'GML',\n  value: 'gml',\n  path: '/import/gml'\n}];\nconst GeometryFormat = ({\n  format = 'geojson'\n}) => {\n  const history = useHistory();\n  const onChange = ({\n    value\n  }) => {\n    if (value !== format) {\n      const {\n        path\n      } = geometryFormats.find(f => f.value === value);\n      history.push(path);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.geometryFormat\n  }, /*#__PURE__*/React.createElement(SegmentedControl, {\n    options: geometryFormats,\n    selected: format,\n    onChange: onChange\n  }));\n};\nGeometryFormat.propTypes = {\n  format: PropTypes.string\n};\nexport { GeometryFormat };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"GeometryPropertyMatch_container__JYC1+\",\"indent\":\"GeometryPropertyMatch_indent__0FbV8\"};","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, CheckboxFieldFF, InputFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { StyledField } from '../index.js';\nimport { OrgUnitIdSchemeCore } from '../Inputs/index.js';\nimport styles from './GeometryPropertyMatch.module.css';\nconst {\n  useField,\n  Field\n} = ReactFinalForm;\nconst MATCH_PROPERTY_NAME = 'matchProperty';\nconst MATCH_PROPERTY_LABEL = i18n.t('Match GeoJSON property to organisation unit scheme');\nconst MATCH_PROPERTY_DATATEST = 'input-match-property';\nconst NAME = 'geojsonProperty';\nconst DATATEST = 'input-geometry-property';\nconst LABEL = i18n.t('GeoJSON property name');\nconst HELPTEXT = i18n.t('GeoJSON feature property that holds the organisation unit identifier');\nconst GeometryPropertyMatch = () => {\n  const {\n    input\n  } = useField(MATCH_PROPERTY_NAME);\n  const {\n    value: matchProperty\n  } = input;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(Field, {\n    type: \"checkbox\",\n    component: CheckboxFieldFF,\n    name: MATCH_PROPERTY_NAME,\n    label: MATCH_PROPERTY_LABEL,\n    dataTest: `${MATCH_PROPERTY_DATATEST}-sf`\n  }), matchProperty && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.indent\n  }, /*#__PURE__*/React.createElement(StyledField, {\n    type: \"text\",\n    component: InputFieldFF,\n    name: NAME,\n    label: LABEL,\n    helpText: HELPTEXT,\n    dataTest: `${DATATEST}-sf`\n  }), /*#__PURE__*/React.createElement(OrgUnitIdSchemeCore, null)));\n};\nexport { GeometryPropertyMatch };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"GeometryAttributePicker_container__zexsh\",\"indent\":\"GeometryAttributePicker_indent__yqldA\",\"help\":\"GeometryAttributePicker_help__yYsOB\",\"hidden\":\"GeometryAttributePicker_hidden__v1FUO\"};","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, CheckboxFieldFF } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { ResourcePickerField } from '../index.js';\nimport { resourceTypes } from '../ResourcePicker/resourceTypes.js';\nimport styles from './GeometryAttributePicker.module.css';\nconst {\n  useField,\n  Field\n} = ReactFinalForm;\nconst USE_ATTRIBUTE_NAME = 'useAttribute';\nconst USE_ATTRIBUTE_LABEL = i18n.t('Import as associated geometry');\nconst USE_ATTRIBUTE_DATATEST = 'input-use-attribute';\nconst NAME = 'geojsonAttribute';\nconst LABEL = i18n.t('Store geometry as value of attribute');\nconst DATATEST = 'input-geojson-attribute-picker';\nconst LISTNAME = 'geojsonAttribute';\nconst FILTERLABEL = '';\nconst SELECTEDLABEL = i18n.t('Selected programs');\nconst ERRORMESSAGE = i18n.t('Something went wrong when loading the attributes!');\nconst RESOURCETYPE = resourceTypes.GEOJSON_ATTRIBUTE;\nconst VALIDATOR = (selectedAttributes = []) => selectedAttributes.length === 0 ? i18n.t('One attribute must be selected') : undefined;\nconst HELPTEXT = i18n.t('Associated geometry import requires an attribute of type \"GeoJSON\" applied to \"Organisation unit\". It can be defined in the Maintenance app.');\nconst GeometryAttributePicker = ({\n  multiSelect,\n  label,\n  withFilter,\n  ...rest\n}) => {\n  const {\n    input: checkbox\n  } = useField(USE_ATTRIBUTE_NAME);\n  const {\n    value: useAttribute\n  } = checkbox;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(Field, {\n    type: \"checkbox\",\n    component: CheckboxFieldFF,\n    name: USE_ATTRIBUTE_NAME,\n    label: USE_ATTRIBUTE_LABEL,\n    dataTest: `${USE_ATTRIBUTE_DATATEST}-sf`\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.indent, {\n      [styles.hidden]: !useAttribute\n    })\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.help\n  }, HELPTEXT), /*#__PURE__*/React.createElement(ResourcePickerField, _extends({\n    name: NAME,\n    resourceType: RESOURCETYPE,\n    errorMessage: ERRORMESSAGE,\n    listName: LISTNAME,\n    label: label,\n    withFilter: withFilter,\n    filterLabel: FILTERLABEL,\n    selectedLabel: SELECTEDLABEL,\n    dataTest: DATATEST,\n    multiSelect: multiSelect,\n    validator: useAttribute ? VALIDATOR : Function.prototype,\n    autoSelectFirst: true\n  }, rest))));\n};\nGeometryAttributePicker.defaultProps = {\n  label: LABEL,\n  multiSelect: false,\n  withFilter: false\n};\nGeometryAttributePicker.propTypes = {\n  label: PropTypes.string,\n  multiSelect: PropTypes.bool,\n  withFilter: PropTypes.bool\n};\nexport { GeometryAttributePicker };","import { FORM_ERROR, jobStartedMessage } from '../../utils/final-form.js';\nimport { uploadFile } from '../../utils/helper.js';\nconst isAsync = true;\nconst onImport = ({\n  baseUrl,\n  setProgress,\n  addTask,\n  setShowFullSummaryTask\n}) => async values => {\n  const {\n    dryRun,\n    files,\n    matchProperty,\n    geojsonProperty,\n    orgUnitIdSchemeCore,\n    useAttribute,\n    geojsonAttribute\n  } = values;\n  const apiUrl = `${baseUrl}/api/organisationUnits/geometry`;\n  const params = {\n    dryRun,\n    async: isAsync\n  };\n  if (matchProperty && geojsonProperty && orgUnitIdSchemeCore) {\n    params.geoJsonId = false;\n    params.geoJsonProperty = geojsonProperty;\n    params.orgUnitProperty = orgUnitIdSchemeCore;\n  }\n  if (useAttribute && geojsonAttribute) {\n    params.attributeId = geojsonAttribute;\n  }\n  const paramsString = Object.keys(params).map(key => `${key}=${params[key]}`).join('&');\n  const url = `${apiUrl}?${paramsString}`;\n  try {\n    await uploadFile({\n      url,\n      file: files[0],\n      format: 'geojson',\n      type: 'GEOJSON_IMPORT',\n      isAsync: isAsync,\n      setProgress,\n      addEntry: (id, entry) => addTask('geojson', id, {\n        ...entry,\n        jobDetails: values\n      })\n    });\n    return jobStartedMessage;\n  } catch (e) {\n    const errors = [e];\n    return {\n      [FORM_ERROR]: errors\n    };\n  } finally {\n    setShowFullSummaryTask(true);\n  }\n};\nexport { onImport };","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport React, { useContext, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { GeometryFormat, GeometryPropertyMatch, GeometryAttributePicker } from '../../components/Geometry/index.js';\nimport { Page, GeometryIcon, ValidationSummary } from '../../components/index.js';\nimport { FileUpload, defaultOrgUnitIdSchemeOption, ImportButtonStrip, FormAlerts } from '../../components/Inputs/index.js';\nimport { TaskContext, getNewestTask } from '../../contexts/index.js';\nimport { getPrevJobDetails } from '../../utils/helper.js';\nimport { onImport } from './geojson-helper.js';\nconst {\n  Form\n} = ReactFinalForm;\n\n// PAGE INFO\nexport const PAGE_NAME = i18n.t('Organisation unit geometry import');\nexport const PAGE_DESCRIPTION = i18n.t('Import geographic data for organisation units. GeoJSON is the recommend format and can also be used for associated geometries or catchment areas.');\nexport const PAGE_ICON = /*#__PURE__*/React.createElement(GeometryIcon, null);\nconst createInitialValues = prevJobDetails => ({\n  files: prevJobDetails.files,\n  orgUnitIdScheme: prevJobDetails.orgUnitIdScheme || defaultOrgUnitIdSchemeOption\n});\nconst GeometryImport = () => {\n  const {\n    tasks: {\n      geojson: geojsonTasks\n    },\n    addTask\n  } = useContext(TaskContext);\n\n  // recreating a previously run job\n  const {\n    query\n  } = useLocation();\n  const prevJobDetails = getPrevJobDetails(query, geojsonTasks);\n  const initialValues = createInitialValues(prevJobDetails);\n  const [progress, setProgress] = useState(0);\n  const [showFullSummaryTask, setShowFullSummaryTask] = useState(false);\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onImport({\n    baseUrl,\n    setProgress,\n    addTask,\n    setShowFullSummaryTask\n  });\n  return /*#__PURE__*/React.createElement(Page, {\n    title: PAGE_NAME,\n    desc: PAGE_DESCRIPTION,\n    icon: PAGE_ICON,\n    loading: progress,\n    dataTest: \"page-import-geojson\",\n    summaryTask: getNewestTask(geojsonTasks),\n    showFullSummaryTask: showFullSummaryTask\n  }, /*#__PURE__*/React.createElement(GeometryFormat, {\n    format: \"geojson\"\n  }), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    initialValues: initialValues,\n    render: ({\n      handleSubmit,\n      form,\n      submitError\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit\n    }, /*#__PURE__*/React.createElement(FileUpload, {\n      helpText: i18n.t('GeoJSON feature id should match the organsation unit id, or match by a feature property below.')\n    }), /*#__PURE__*/React.createElement(GeometryPropertyMatch, null), /*#__PURE__*/React.createElement(GeometryAttributePicker, null), /*#__PURE__*/React.createElement(ValidationSummary, null), /*#__PURE__*/React.createElement(ImportButtonStrip, {\n      form: form\n    }), /*#__PURE__*/React.createElement(FormAlerts, {\n      alerts: submitError\n    }))\n  }));\n};\nexport { GeometryImport };","import { useConfig } from '@dhis2/app-runtime';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport React, { useContext, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { GeometryFormat } from '../../components/Geometry/index.js';\nimport { Page, ValidationSummary } from '../../components/index.js';\nimport { FileUpload, ImportButtonStrip, FormAlerts } from '../../components/Inputs/index.js';\nimport { TaskContext, getNewestTask } from '../../contexts/index.js';\nimport { getPrevJobDetails } from '../../utils/helper.js';\nimport { PAGE_NAME, PAGE_DESCRIPTION, PAGE_ICON } from './GeometryImport.js';\nimport { onImport } from './gml-helper.js';\nconst {\n  Form\n} = ReactFinalForm;\nconst createInitialValues = prevJobDetails => ({\n  files: prevJobDetails.files\n});\nconst GMLImport = () => {\n  const {\n    tasks: {\n      gml: gmlTasks\n    },\n    addTask\n  } = useContext(TaskContext);\n\n  // recreating a previously run job\n  const {\n    query\n  } = useLocation();\n  const prevJobDetails = getPrevJobDetails(query, gmlTasks);\n  const initialValues = createInitialValues(prevJobDetails);\n  const [progress, setProgress] = useState(0);\n  const [showFullSummaryTask, setShowFullSummaryTask] = useState(false);\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onImport({\n    baseUrl,\n    setProgress,\n    addTask,\n    setShowFullSummaryTask\n  });\n  return /*#__PURE__*/React.createElement(Page, {\n    title: PAGE_NAME,\n    desc: PAGE_DESCRIPTION,\n    icon: PAGE_ICON,\n    loading: progress,\n    dataTest: \"page-import-gml\",\n    summaryTask: getNewestTask(gmlTasks),\n    showFullSummaryTask: showFullSummaryTask\n  }, /*#__PURE__*/React.createElement(GeometryFormat, {\n    format: \"gml\"\n  }), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    initialValues: initialValues,\n    render: ({\n      handleSubmit,\n      form,\n      submitError\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit\n    }, /*#__PURE__*/React.createElement(FileUpload, null), /*#__PURE__*/React.createElement(ValidationSummary, null), /*#__PURE__*/React.createElement(ImportButtonStrip, {\n      form: form\n    }), /*#__PURE__*/React.createElement(FormAlerts, {\n      alerts: submitError\n    }))\n  }));\n};\nexport { GMLImport };","import { FORM_ERROR, jobStartedMessage } from '../../utils/final-form.js';\nimport { uploadFile } from '../../utils/helper.js';\nconst isAsync = true;\nconst onImport = ({\n  baseUrl,\n  setProgress,\n  addTask,\n  setShowFullSummaryTask\n}) => async values => {\n  const {\n    dryRun,\n    files\n  } = values;\n\n  // send xhr\n  const apiBaseUrl = `${baseUrl}/api/`;\n  const endpoint = 'metadata/gml.json';\n  const params = [`dryRun=${dryRun}`, 'format=json'].join('&');\n  const url = `${apiBaseUrl}${endpoint}?${params}`;\n  try {\n    await uploadFile({\n      url,\n      file: files[0],\n      format: 'gml',\n      type: 'GML_IMPORT',\n      isAsync: isAsync,\n      setProgress,\n      addEntry: (id, entry) => addTask('gml', id, {\n        ...entry,\n        jobDetails: values\n      })\n    });\n    return jobStartedMessage;\n  } catch (e) {\n    const errors = [e];\n    return {\n      [FORM_ERROR]: errors\n    };\n  } finally {\n    setShowFullSummaryTask(true);\n  }\n};\nexport { onImport };","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport React, { useContext, useState, useEffect, useCallback, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Page, MoreOptions, BasicOptions, SchemeContainer, EventIcon, ValidationSummary, ImportProgress, DataElementConfirmationModal, PHASE_UPLOAD, PHASE_PROCESSING, PHASE_COMPLETE } from '../../components/index.js';\nimport { FileUpload, Format, defaultFormatOption, DataElementIdScheme, defaultDataElementIdSchemeOption, EventIdScheme, defaultEventIdSchemeOption, IdScheme, defaultIdSchemeOption, OrgUnitIdScheme, defaultOrgUnitIdSchemeOption, ImportButtonStrip, FormAlerts, formatNoXmlOptions, ProjectHierarchy, defaultThematicArea, defaultProgrammeArea, defaultProjectArea } from '../../components/Inputs/index.js';\nimport { TaskContext, getNewestTask } from '../../contexts/index.js';\nimport { getPrevJobDetails } from '../../utils/helper.js';\nimport { onImport } from './form-helper.js';\n\n// Constants\nconst MISSING_DATA_ELEMENTS = 'MISSING_DATA_ELEMENTS';\n\n// PAGE INFO\nexport const PAGE_NAME = i18n.t('Event import');\nexport const PAGE_DESCRIPTION = i18n.t('Import event data for programs, stages and tracked entities from JSON or CSV format.');\nconst PAGE_ICON = /*#__PURE__*/React.createElement(EventIcon, null);\nconst {\n  Form,\n  FormSpy\n} = ReactFinalForm;\nconst createInitialValues = prevJobDetails => ({\n  files: prevJobDetails.files,\n  format: prevJobDetails.format || defaultFormatOption,\n  dataElementIdScheme: prevJobDetails.dataElementIdScheme || defaultDataElementIdSchemeOption,\n  orgUnitIdScheme: prevJobDetails.orgUnitIdScheme || defaultOrgUnitIdSchemeOption,\n  eventIdScheme: prevJobDetails.eventIdScheme || defaultEventIdSchemeOption,\n  idScheme: prevJobDetails.idScheme || defaultIdSchemeOption,\n  thematicArea: prevJobDetails.thematicArea || defaultThematicArea,\n  programmeArea: prevJobDetails.programmeArea || defaultProgrammeArea,\n  projectArea: prevJobDetails.projectArea || defaultProjectArea\n});\nconst EventImport = () => {\n  const {\n    tasks: {\n      event: eventTasks\n    },\n    addTask\n  } = useContext(TaskContext);\n\n  // recreating a previously run job\n  const query = useLocation().query;\n  const prevJobDetails = getPrevJobDetails(query, eventTasks);\n  const initialValues = createInitialValues(prevJobDetails);\n  const [progress, setProgress] = useState(0);\n  const [showFullSummaryTask, setShowFullSummaryTask] = useState(false);\n  const [progressPhase, setProgressPhase] = useState(PHASE_UPLOAD);\n  const [progressMessage, setProgressMessage] = useState('');\n  const [currentTaskId, setCurrentTaskId] = useState(null);\n  const [showProgressModal, setShowProgressModal] = useState(false);\n  const {\n    baseUrl\n  } = useConfig();\n\n  // State for missing data elements modal\n  const [showDataElementModal, setShowDataElementModal] = useState(false);\n  const [missingDataElements, setMissingDataElements] = useState([]);\n  const [pendingImport, setPendingImport] = useState(null);\n\n  // Get the current task being tracked\n  const currentTask = currentTaskId ? eventTasks[currentTaskId] : null;\n\n  // Track task completion and update phase accordingly\n  useEffect(() => {\n    if (currentTask) {\n      var _currentTask$events;\n      if (currentTask.completed) {\n        setProgressPhase(PHASE_COMPLETE);\n        // Auto-hide modal after completion (with delay)\n        const timer = setTimeout(() => {\n          setShowProgressModal(false);\n          setCurrentTaskId(null);\n          setProgressPhase(PHASE_UPLOAD);\n          setProgressMessage('');\n        }, 2000);\n        return () => clearTimeout(timer);\n      } else if (progress === 0 && ((_currentTask$events = currentTask.events) === null || _currentTask$events === void 0 ? void 0 : _currentTask$events.length) > 0) {\n        // Upload done, now processing\n        setProgressPhase(PHASE_PROCESSING);\n      }\n    }\n  }, [currentTask, progress]);\n\n  // Enhanced addTask that tracks the current task\n  const addTaskWithTracking = useCallback((type, id, entry) => {\n    setCurrentTaskId(id);\n    setProgressPhase(PHASE_PROCESSING);\n    setProgressMessage(i18n.t('Processing import on server...'));\n    addTask(type, id, entry);\n  }, [addTask]);\n\n  // Enhanced setProgress that shows the modal\n  const setProgressWithModal = useCallback(value => {\n    setProgress(value);\n    if (value > 0) {\n      setShowProgressModal(true);\n      setProgressPhase(PHASE_UPLOAD);\n      setProgressMessage(i18n.t('Uploading file...'));\n    }\n  }, []);\n\n  // Enhanced setLoadingMessage that updates the progress message\n  const setLoadingMessageWithProgress = useCallback(message => {\n    setProgressMessage(message);\n    if (message) {\n      setShowProgressModal(true);\n    }\n  }, []);\n\n  // Handle user canceling creation of missing data elements\n  const handleCancelCreateDataElements = useCallback(() => {\n    setShowDataElementModal(false);\n    setMissingDataElements([]);\n    setPendingImport(null);\n  }, []);\n\n  // Handle data element modal confirm - create elements and continue import\n  const handleConfirmCreateDataElements = useCallback(async () => {\n    if (!pendingImport) {\n      return;\n    }\n    setShowDataElementModal(false);\n    setShowProgressModal(true);\n    setProgressPhase(PHASE_UPLOAD);\n    try {\n      // Import functions dynamically\n      const {\n        createMissingDataElements: createDE,\n        fetchProgramMetadata\n      } = await import('./form-helper.js');\n\n      // First, get the program stage ID from the program\n      setProgressMessage(i18n.t('Fetching program information...'));\n      const {\n        programStageId\n      } = await fetchProgramMetadata(baseUrl, pendingImport.values.projectArea);\n\n      // Create missing data elements and add them to the program stage\n      setProgressMessage(i18n.t('Creating data elements...'));\n      await createDE(missingDataElements, baseUrl, programStageId, progressInfo => {\n        setProgress(progressInfo.percent);\n        setProgressMessage(progressInfo.message);\n      });\n      setProgressMessage(i18n.t('Data elements created. Starting import...'));\n      setProgress(0);\n\n      // Continue with the import\n      await onImport({\n        baseUrl,\n        setProgress: setProgressWithModal,\n        addTask: addTaskWithTracking,\n        setShowFullSummaryTask,\n        setLoadingMessage: setLoadingMessageWithProgress\n      })(pendingImport.values, pendingImport.fileContent, true);\n    } catch (error) {\n      console.error('Error during data element creation:', error);\n      setProgressMessage(i18n.t('Error creating data elements: ') + error.message);\n    } finally {\n      setMissingDataElements([]);\n      setPendingImport(null);\n    }\n  }, [missingDataElements, baseUrl, setProgressWithModal, addTaskWithTracking, setLoadingMessageWithProgress, pendingImport]);\n  const handleSubmit = async values => {\n    const {\n      format,\n      projectArea,\n      thematicArea,\n      programmeArea\n    } = values;\n\n    // Validate that hierarchy fields are provided for CSV imports\n    if (format === 'csv' && (!projectArea || !thematicArea || !programmeArea)) {\n      console.error('Missing hierarchy fields:', {\n        projectArea,\n        thematicArea,\n        programmeArea\n      });\n      return {\n        submitError: ['Please select Thematic Area, Programme Area, and Project Area before importing CSV files.']\n      };\n    }\n\n    // Proceed with import\n    const result = await onImport({\n      baseUrl,\n      setProgress: setProgressWithModal,\n      addTask: addTaskWithTracking,\n      setShowFullSummaryTask,\n      setLoadingMessage: setLoadingMessageWithProgress,\n      setMissingDataElements,\n      setShowDataElementModal,\n      setPendingImport\n    })(values);\n\n    // Check if we got a missing data elements result\n    if (result && result.type === MISSING_DATA_ELEMENTS) {\n      // Store the values and show the modal\n      setPendingImport(result);\n      setMissingDataElements(result.missingDataElements);\n      setShowDataElementModal(true);\n      return; // Don't return an error, just wait for modal response\n    }\n    return result;\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, showDataElementModal && /*#__PURE__*/React.createElement(DataElementConfirmationModal, {\n    missingDataElements: missingDataElements,\n    onConfirm: handleConfirmCreateDataElements,\n    onCancel: handleCancelCreateDataElements\n  }), /*#__PURE__*/React.createElement(ImportProgress, {\n    visible: showProgressModal,\n    progress: progress,\n    phase: progressPhase,\n    message: progressMessage,\n    task: currentTask\n  }), /*#__PURE__*/React.createElement(Page, {\n    title: PAGE_NAME,\n    desc: PAGE_DESCRIPTION,\n    icon: PAGE_ICON,\n    dataTest: \"page-import-event\",\n    summaryTask: getNewestTask(eventTasks),\n    showFullSummaryTask: showFullSummaryTask\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    initialValues: initialValues,\n    subscription: {\n      submitError: true\n    },\n    render: ({\n      handleSubmit: formHandleSubmit,\n      form,\n      submitError\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: formHandleSubmit\n    }, /*#__PURE__*/React.createElement(BasicOptions, null, /*#__PURE__*/React.createElement(FileUpload, {\n      helpText: i18n.t('Supported file types: JSON and CSV.', {\n        nsSeparator: '>'\n      })\n    }), /*#__PURE__*/React.createElement(Format, {\n      availableFormats: formatNoXmlOptions,\n      type: \"import\"\n    }), /*#__PURE__*/React.createElement(FormSpy, {\n      subscription: {\n        values: true\n      }\n    }, ({\n      values\n    }) => /*#__PURE__*/React.createElement(ProjectHierarchy, {\n      show: values.format === 'csv'\n    }))), /*#__PURE__*/React.createElement(MoreOptions, null, /*#__PURE__*/React.createElement(SchemeContainer, null, /*#__PURE__*/React.createElement(EventIdScheme, null), /*#__PURE__*/React.createElement(DataElementIdScheme, null), /*#__PURE__*/React.createElement(OrgUnitIdScheme, null), /*#__PURE__*/React.createElement(IdScheme, null))), /*#__PURE__*/React.createElement(ValidationSummary, null), /*#__PURE__*/React.createElement(ImportButtonStrip, {\n      form: form\n    }), /*#__PURE__*/React.createElement(FormAlerts, {\n      alerts: submitError\n    }))\n  })));\n};\nexport { EventImport };","import { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Layer, CenteredContent, CircularLoader, NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { createContext, useContext, useState, useEffect } from 'react';\n\n// A similar version of this provider is available in @dhis2/analytics@^23\n\nconst CachedDataQueryCtx = /*#__PURE__*/createContext({});\nconst NO_DATA = {};\nconst CachedDataQueryProvider = ({\n  query,\n  dataTransformation,\n  children\n}) => {\n  const [data, setData] = useState(null);\n  const [error, setError] = useState(null);\n  const engine = useDataEngine();\n  useEffect(() => {\n    engine.query(query, {\n      onComplete: resp => {\n        const dt = resp ? dataTransformation(resp) : NO_DATA;\n        setData(dt);\n      },\n      onError: error => {\n        console.log('Error', 'The app could not retrieve required data.', error);\n        setError(error);\n        setData(NO_DATA);\n      }\n    });\n  }, [engine, dataTransformation, query]);\n  if (!data && !error) {\n    return /*#__PURE__*/React.createElement(Layer, {\n      translucent: true\n    }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n  }\n  if (error) {\n    const fallbackMsg = i18n.t('The app could not retrieve required data.');\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Network error')\n    }, error.message || fallbackMsg);\n  }\n  return /*#__PURE__*/React.createElement(CachedDataQueryCtx.Provider, {\n    value: data\n  }, children);\n};\nCachedDataQueryProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  query: PropTypes.object.isRequired,\n  dataTransformation: PropTypes.func\n};\nconst useCachedDataQuery = () => useContext(CachedDataQueryCtx);\nexport { CachedDataQueryProvider, useCachedDataQuery };","export const EARTH_ENGINE_ID = 'earthEngineId';\nexport const PERIOD = 'period';\nexport const ORGANISATION_UNITS = 'organisationUnits';\nexport const ROUNDING = 'rounding';\nexport const DATA_ELEMENT_ID = 'dataElementId';\nexport const AGGREGATION_TYPE = 'aggregationType';\nexport const BAND_COCS = 'bandCocs';\nexport const ASSOCIATED_GEOMETRY = 'associatedGeometry';","import i18n from '@dhis2/d2-i18n';\nimport { SingleSelectFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { StyledField } from '../../../components/index.js';\nimport { useCachedDataQuery } from '../util/CachedQueryProvider.js';\nimport { ASSOCIATED_GEOMETRY } from '../util/formFieldConstants.js';\nexport const NO_ASSOCIATED_GEOMETRY = 'Noassociatedgeometry';\nconst AssociatedGeometry = () => {\n  const {\n    associatedGeometry\n  } = useCachedDataQuery();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: '300px',\n      width: '300px'\n    }\n  }, /*#__PURE__*/React.createElement(StyledField, {\n    component: SingleSelectFieldFF,\n    name: ASSOCIATED_GEOMETRY,\n    label: i18n.t('Use associated geometry'),\n    options: associatedGeometry,\n    dataTest: \"input-data-elements\",\n    defaultValue: NO_ASSOCIATED_GEOMETRY,\n    helpText: i18n.t('Select associated geometry for selected organisation units'),\n    filled: true\n  }));\n};\nexport { AssociatedGeometry };","import i18n from '@dhis2/d2-i18n';\nconst POPULATION_TOTAL_EE_ID = 'WorldPop/GP/100m/pop_age_sex_cons_unadj_TOTAL';\nconst POPULATION_AGE_GROUPS_EE_ID = 'WorldPop/GP/100m/pop_age_sex_cons_unadj_AGE_GROUPS';\nconst POPULATION_AGE_GROUPS_DATASET_ID = 'WorldPop/GP/100m/pop_age_sex_cons_unadj';\nconst SOURCE_NAME = 'WorldPop / Google Earth Engine';\nconst SOURCE_URL = 'https://developers.google.com/earth-engine/datasets/catalog/WorldPop_GP_100m_pop_age_sex_cons_unadj';\nexport const earthEngines = {\n  [POPULATION_TOTAL_EE_ID]: {\n    earthEngineId: POPULATION_TOTAL_EE_ID,\n    datasetId: POPULATION_AGE_GROUPS_DATASET_ID,\n    name: i18n.t('Population'),\n    source: SOURCE_NAME,\n    sourceUrl: SOURCE_URL,\n    img: 'images/population.png',\n    defaultAggregations: ['sum', 'mean'],\n    periodType: 'Yearly',\n    bandReducer: 'sum',\n    band: 'population',\n    filters: ({\n      id,\n      name,\n      year\n    }) => [{\n      id,\n      name,\n      type: 'eq',\n      arguments: ['year', year]\n    }],\n    mosaic: true,\n    params: {\n      min: 0,\n      max: 25,\n      palette: '#fee5d9,#fcbba1,#fc9272,#fb6a4a,#de2d26,#a50f15' // Reds\n    }\n  },\n  [POPULATION_AGE_GROUPS_EE_ID]: {\n    earthEngineId: POPULATION_AGE_GROUPS_EE_ID,\n    datasetId: POPULATION_AGE_GROUPS_DATASET_ID,\n    name: i18n.t('Population age groups'),\n    source: SOURCE_NAME,\n    sourceUrl: SOURCE_URL,\n    img: 'images/population.png',\n    periodType: 'Yearly',\n    bandReducer: 'sum',\n    defaultAggregations: ['sum', 'mean'],\n    bands: [{\n      id: 'M_0',\n      name: i18n.t('Men 0 - 1 years')\n    }, {\n      id: 'M_1',\n      name: i18n.t('Men 1 - 4 years')\n    }, {\n      id: 'M_5',\n      name: i18n.t('Men 5 - 9 years')\n    }, {\n      id: 'M_10',\n      name: i18n.t('Men 10 - 14 years')\n    }, {\n      id: 'M_15',\n      name: i18n.t('Men 15 - 19 years')\n    }, {\n      id: 'M_20',\n      name: i18n.t('Men 20 - 24 years')\n    }, {\n      id: 'M_25',\n      name: i18n.t('Men 25 - 29 years')\n    }, {\n      id: 'M_30',\n      name: i18n.t('Men 30 - 34 years')\n    }, {\n      id: 'M_35',\n      name: i18n.t('Men 35 - 39 years')\n    }, {\n      id: 'M_40',\n      name: i18n.t('Men 40 - 44 years')\n    }, {\n      id: 'M_45',\n      name: i18n.t('Men 45 - 49 years')\n    }, {\n      id: 'M_50',\n      name: i18n.t('Men 50 - 54 years')\n    }, {\n      id: 'M_55',\n      name: i18n.t('Men 55 - 59 years')\n    }, {\n      id: 'M_60',\n      name: i18n.t('Men 60 - 64 years')\n    }, {\n      id: 'M_65',\n      name: i18n.t('Men 65 - 69 years')\n    }, {\n      id: 'M_70',\n      name: i18n.t('Men 70 - 74 years')\n    }, {\n      id: 'M_75',\n      name: i18n.t('Men 75 - 79 years')\n    }, {\n      id: 'M_80',\n      name: i18n.t('Men 80 years and above')\n    }, {\n      id: 'F_0',\n      name: i18n.t('Women 0 - 1 years')\n    }, {\n      id: 'F_1',\n      name: i18n.t('Women 1 - 4 years')\n    }, {\n      id: 'F_5',\n      name: i18n.t('Women 5 - 9 years')\n    }, {\n      id: 'F_10',\n      name: i18n.t('Women 10 - 14 years')\n    }, {\n      id: 'F_15',\n      name: i18n.t('Women 15 - 19 years')\n    }, {\n      id: 'F_20',\n      name: i18n.t('Women 20 - 24 years')\n    }, {\n      id: 'F_25',\n      name: i18n.t('Women 25 - 29 years')\n    }, {\n      id: 'F_30',\n      name: i18n.t('Women 30 - 34 years')\n    }, {\n      id: 'F_35',\n      name: i18n.t('Women 35 - 39 years')\n    }, {\n      id: 'F_40',\n      name: i18n.t('Women 40 - 44 years')\n    }, {\n      id: 'F_45',\n      name: i18n.t('Women 45 - 49 years')\n    }, {\n      id: 'F_50',\n      name: i18n.t('Women 50 - 54 years')\n    }, {\n      id: 'F_55',\n      name: i18n.t('Women 55 - 59 years')\n    }, {\n      id: 'F_60',\n      name: i18n.t('Women 60 - 64 years')\n    }, {\n      id: 'F_65',\n      name: i18n.t('Women 65 - 69 years')\n    }, {\n      id: 'F_70',\n      name: i18n.t('Women 70 - 74 years'),\n      multiple: true\n    }, {\n      id: 'F_75',\n      name: i18n.t('Women 75 - 79 years')\n    }, {\n      id: 'F_80',\n      name: i18n.t('Women 80 years and above')\n    }],\n    filters: ({\n      id,\n      name,\n      year\n    }) => [{\n      id,\n      name,\n      type: 'eq',\n      arguments: ['year', year]\n    }],\n    mosaic: true,\n    params: {\n      min: 0,\n      max: 10,\n      palette: '#fee5d9,#fcbba1,#fc9272,#fb6a4a,#de2d26,#a50f15' // Reds\n    }\n  }\n};\nconst NO_BANDS = [];\nexport const getEarthEngineBands = eeId => {\n  var _earthEngines$eeId;\n  return ((_earthEngines$eeId = earthEngines[eeId]) === null || _earthEngines$eeId === void 0 ? void 0 : _earthEngines$eeId.bands) || NO_BANDS;\n};\nexport const getDefaultAggregation = eeId => earthEngines[eeId].defaultAggregations[0];","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"BandCocMappingTable_container__tUBl1\",\"noticeBox\":\"BandCocMappingTable_noticeBox__aq2Px\"};","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, Table, TableHead, TableRowHead, TableCellHead, TableBody, TableRow, TableCell, NoticeBox, SingleSelectFieldFF } from '@dhis2/ui';\nimport React, { useState, useEffect } from 'react';\nimport { FieldArray } from 'react-final-form-arrays';\nimport { useCachedDataQuery } from '../util/CachedQueryProvider.js';\nimport { getEarthEngineBands } from '../util/earthEngines.js';\nimport { BAND_COCS } from '../util/formFieldConstants.js';\nimport styles from './styles/BandCocMappingTable.module.css';\nconst {\n  Field,\n  useFormState,\n  useForm\n} = ReactFinalForm;\nconst BandCocMappingTable = () => {\n  const {\n    values\n  } = useFormState();\n  const {\n    change\n  } = useForm();\n  const {\n    dataElements\n  } = useCachedDataQuery();\n  const [cocs, setCocs] = useState([]);\n  const {\n    earthEngineId,\n    dataElementId,\n    bandCocs\n  } = values;\n  useEffect(() => {\n    //clear form bandCocs when this component is removed\n    return function cleanup() {\n      change(BAND_COCS, []);\n    };\n  }, [change]);\n\n  // dataElementId is a dependency because if it changes then\n  // the BAND_COCS mapping is no longer valid. The mapped\n  // cocs are specific to the dataElementId.\n  useEffect(() => {\n    const dataSetBands = getEarthEngineBands(earthEngineId);\n    change(BAND_COCS, dataSetBands);\n  }, [earthEngineId, dataElementId, change]);\n  useEffect(() => {\n    const newCocs = dataElements.find(({\n      id\n    }) => id === dataElementId).categoryCombo.categoryOptionCombos;\n    setCocs(newCocs);\n  }, [dataElementId, dataElements]);\n  const getCatComboOptions = () => {\n    const unavailableCocs = bandCocs ? bandCocs.filter(bcoc => bcoc.coc).map(bcoc => bcoc.coc) : [];\n    return cocs.map(({\n      id,\n      name\n    }) => {\n      return {\n        value: id,\n        label: name,\n        disabled: unavailableCocs.indexOf(id) !== -1\n      };\n    });\n  };\n  const getProbableCocMatch = bandId => {\n    const probableCoc = cocs.find(coc => coc.code === bandId);\n    return (probableCoc === null || probableCoc === void 0 ? void 0 : probableCoc.id) || null;\n  };\n  const catComboOptions = getCatComboOptions();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noticeBox\n  }, /*#__PURE__*/React.createElement(NoticeBox, {\n    title: i18n.t('Import groups to category option combinations')\n  }, i18n.t('Earth Engine data set \"Population age groups\" has disaggregation groups. Choose the category option combinations to import each group into.'))), /*#__PURE__*/React.createElement(Table, {\n    dense: true\n  }, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, {\n    dense: true\n  }, i18n.t('Group name')), /*#__PURE__*/React.createElement(TableCellHead, {\n    dense: true\n  }, i18n.t('Group description')), /*#__PURE__*/React.createElement(TableCellHead, {\n    dense: true\n  }, i18n.t('Category option combination')))), /*#__PURE__*/React.createElement(TableBody, null, /*#__PURE__*/React.createElement(FieldArray, {\n    name: BAND_COCS\n  }, ({\n    fields\n  }) => fields.map((name, i) => {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: `row-${i}`\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      dense: true\n    }, fields.value[i].id), /*#__PURE__*/React.createElement(TableCell, {\n      dense: true\n    }, fields.value[i].name), /*#__PURE__*/React.createElement(TableCell, {\n      dense: true\n    }, /*#__PURE__*/React.createElement(Field, {\n      component: SingleSelectFieldFF,\n      name: `${name}.coc`,\n      inputWidth: \"250px\",\n      filterable: true,\n      clearable: true,\n      defaultValue: getProbableCocMatch(fields.value[i].id),\n      noMatchText: i18n.t('No match found'),\n      placeholder: i18n.t('Choose category option combo'),\n      options: catComboOptions\n    })));\n  })))));\n};\nexport { BandCocMappingTable };","import i18n from '@dhis2/d2-i18n';\nimport { SingleSelectFieldFF, hasValue } from '@dhis2/ui';\nimport React from 'react';\nimport { StyledField } from '../../../components/index.js';\nimport { useCachedDataQuery } from '../util/CachedQueryProvider.js';\nimport { DATA_ELEMENT_ID } from '../util/formFieldConstants.js';\nconst DataElements = () => {\n  const {\n    dataElements\n  } = useCachedDataQuery();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: '300px',\n      width: '300px'\n    }\n  }, /*#__PURE__*/React.createElement(StyledField, {\n    component: SingleSelectFieldFF,\n    name: DATA_ELEMENT_ID,\n    label: i18n.t('Data element'),\n    placeholder: i18n.t('Select data element'),\n    options: dataElements,\n    dataTest: \"input-data-elements\",\n    helpText: i18n.t('The data element where Earth Engine data will be added'),\n    filled: true,\n    filterable: true,\n    validate: hasValue\n  }));\n};\nexport { DataElements };","// extracted by mini-css-extract-plugin\nexport default {\"table\":\"DataPreview_table__ykezB\",\"parentOuName\":\"DataPreview_parentOuName__J4cGy\",\"current\":\"DataPreview_current__km0zC\"};","import { ouIdHelper } from '@dhis2/analytics';\nimport { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport { useState, useEffect } from 'react';\nconst {\n  useFormState\n} = ReactFinalForm;\nconst fetchCurrentValues = async url => {\n  const fetcher = url => fetch(url, {\n    credentials: 'include'\n  }).then(resp => {\n    if (resp.status >= 200 && resp.status < 300) {\n      return Promise.resolve(resp.json());\n    } else {\n      throw resp;\n    }\n  }).catch(resp => {\n    const error = new Error(resp.statusText || resp.status);\n    console.error(`fetchCurrentValues error: `, error);\n    return Promise.reject(error);\n  });\n  return await fetcher(url).catch(error => Promise.reject(error));\n};\nconst useFetchCurrentValues = () => {\n  const {\n    values\n  } = useFormState();\n  const {\n    earthEngineId,\n    organisationUnits,\n    dataElementId,\n    period\n  } = values;\n  const [currentValues, setCurrentValues] = useState([]);\n  const [error, setError] = useState(null);\n  const {\n    baseUrl\n  } = useConfig();\n  useEffect(() => {\n    const fetchCurrVals = async url => {\n      const {\n        dataValues\n      } = await fetchCurrentValues(url);\n      const cv = dataValues.filter(v => v.dataElement === dataElementId);\n      setCurrentValues(cv);\n    };\n    if (organisationUnits && period && dataElementId) {\n      setError(null);\n      const ouQueryParams = organisationUnits.map(({\n        id\n      }) => `orgUnit=${id}`).join('&');\n      const hasLevelPrefix = organisationUnits.find(ou => ouIdHelper.hasLevelPrefix(ou.id));\n      let url = `${baseUrl}/api/dataValueSets?dataElement=${dataElementId}&period=${period}&${ouQueryParams}`;\n      if (hasLevelPrefix) {\n        url = url.concat('&children=true');\n      }\n      fetchCurrVals(url);\n    } else {\n      const missingPeriod = period === undefined ? 'Period' : null;\n      const missingOus = !organisationUnits.length ? 'Organisation units' : null;\n      const missingParams = [missingPeriod, missingOus].filter(m => m !== null).join(', ');\n      setError(i18n.t(`Could not fetch current values due to missing parameters: ${missingParams}`));\n    }\n  }, [earthEngineId, dataElementId, period, organisationUnits, baseUrl]);\n  return {\n    currentValues,\n    error\n  };\n};\nexport { useFetchCurrentValues };","import i18n from '@dhis2/d2-i18n';\nimport { DataTable, DataTableHead, DataTableBody, DataTableRow, DataTableCell, DataTableColumnHeader, DataTableFoot, Pagination, ReactFinalForm, Tag, AlertStack, AlertBar } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect, useRef, useMemo } from 'react';\nimport { useCachedDataQuery } from '../util/CachedQueryProvider.js';\nimport styles from './styles/DataPreview.module.css';\nimport { useFetchCurrentValues } from './useFetchCurrentValues.js';\nconst NO_ROWS = [];\nconst {\n  useFormState\n} = ReactFinalForm;\nconst PopulationAgegroupsDataPreview = ({\n  eeData,\n  pointOuRows,\n  rowsPerPage,\n  onRowsPerPageChanged\n}) => {\n  const {\n    values\n  } = useFormState();\n  const {\n    dataElementId,\n    bandCocs\n  } = values;\n  const {\n    dataElements\n  } = useCachedDataQuery();\n  const [tableData, setTableData] = useState([]);\n  const [page, setPage] = useState(1);\n  const {\n    currentValues,\n    error\n  } = useFetchCurrentValues();\n  const tableRef = useRef(null);\n  const [bandCocMap, setBandCocMap] = useState({});\n  useEffect(() => {\n    // Unfortunately bandCocs from react-final-form-array does\n    // not preserve referential equality even though the values\n    // in the array are the same. Since this component\n    // will be unmounted if bandCocs actually changes, it is safe\n    // to only set the bandCocMap once when being initialized\n    if (!Object.keys(bandCocMap).length) {\n      const bcocMap = bandCocs.reduce((acc, curr) => {\n        acc[curr.id] = curr;\n        return acc;\n      }, {});\n      setBandCocMap(bcocMap);\n    }\n  }, [bandCocs, bandCocMap]);\n  const cocMap = useMemo(() => {\n    var _dataElements$find$ca;\n    const cocs = ((_dataElements$find$ca = dataElements.find(({\n      id\n    }) => id === dataElementId).categoryCombo) === null || _dataElements$find$ca === void 0 ? void 0 : _dataElements$find$ca.categoryOptionCombos) || [];\n    return cocs.reduce((acc, curr) => {\n      acc[curr.id] = curr;\n      return acc;\n    }, {});\n  }, [dataElementId, dataElements]);\n  useEffect(() => {\n    if (eeData) {\n      const newArr = eeData.map(d => {\n        var _bandCocMap$d$id, _cocMap$cocId;\n        const cocId = (_bandCocMap$d$id = bandCocMap[d.id]) === null || _bandCocMap$d$id === void 0 ? void 0 : _bandCocMap$d$id.coc;\n        const current = currentValues.filter(v => v.orgUnit === d.ouId).find(v => v.categoryOptionCombo === cocId);\n        return {\n          categoryOptionCombo: (_cocMap$cocId = cocMap[cocId]) === null || _cocMap$cocId === void 0 ? void 0 : _cocMap$cocId.name,\n          current: current === null || current === void 0 ? void 0 : current.value,\n          ...d\n        };\n      }).concat(pointOuRows.map(({\n        id,\n        parentName,\n        name\n      }) => ({\n        ouId: id,\n        ouParentName: parentName,\n        ouName: name,\n        value: i18n.t('Point org. unit - no value'),\n        isNoValue: true\n      })));\n      setTableData(newArr);\n    }\n  }, [currentValues, eeData, pointOuRows, bandCocMap, cocMap]);\n  useEffect(() => {\n    var _tableRef$current;\n    tableRef === null || tableRef === void 0 ? void 0 : (_tableRef$current = tableRef.current) === null || _tableRef$current === void 0 ? void 0 : _tableRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [tableData, tableRef]);\n  const visibleRows = useMemo(() => {\n    if (!tableData.length) {\n      return NO_ROWS;\n    }\n    const start = (page - 1) * rowsPerPage;\n    const end = start + rowsPerPage;\n    return tableData.slice(start, end);\n  }, [tableData, rowsPerPage, page]);\n  if (!tableData.length) {\n    return null;\n  }\n  const getNumPages = () => Math.ceil(tableData.length / rowsPerPage);\n  const isLastPage = () => page === getNumPages();\n  const getLastPageLength = () => tableData.length % rowsPerPage;\n  const updateTablePaging = rows => {\n    setPage(1);\n    onRowsPerPageChanged(rows);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: tableRef\n  }, /*#__PURE__*/React.createElement(DataTable, {\n    dense: true,\n    className: styles.table\n  }, /*#__PURE__*/React.createElement(DataTableHead, null, /*#__PURE__*/React.createElement(DataTableRow, null, /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n    dense: true\n  }, i18n.t('Organisation Unit')), /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n    dense: true\n  }, i18n.t('Category option combo')), /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n    dense: true\n  }, i18n.t('Current value')), /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n    dense: true\n  }, i18n.t('New value')))), /*#__PURE__*/React.createElement(DataTableBody, null, visibleRows.map(({\n    ouId,\n    ouParentName,\n    ouName,\n    categoryOptionCombo,\n    value,\n    current,\n    isNoValue\n  }, i) => {\n    return /*#__PURE__*/React.createElement(DataTableRow, {\n      key: `${ouId}-${i}`\n    }, /*#__PURE__*/React.createElement(DataTableCell, {\n      dense: true\n    }, /*#__PURE__*/React.createElement(React.Fragment, null, ouParentName && /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.parentOuName\n    }, `${ouParentName} / `), /*#__PURE__*/React.createElement(\"span\", null, ouName))), /*#__PURE__*/React.createElement(DataTableCell, {\n      dense: true\n    }, categoryOptionCombo), /*#__PURE__*/React.createElement(DataTableCell, {\n      dense: true\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.current\n    }, current || '')), /*#__PURE__*/React.createElement(DataTableCell, {\n      dense: true\n    }, isNoValue ? /*#__PURE__*/React.createElement(Tag, {\n      negative: true\n    }, value) : /*#__PURE__*/React.createElement(\"span\", null, value)));\n  })), /*#__PURE__*/React.createElement(DataTableFoot, null, /*#__PURE__*/React.createElement(DataTableRow, null, /*#__PURE__*/React.createElement(DataTableCell, {\n    staticStyle: true,\n    colSpan: '4'\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Pagination, {\n    page: page,\n    isLastPage: isLastPage(),\n    onPageChange: setPage,\n    onPageSizeChange: updateTablePaging,\n    pageSize: rowsPerPage,\n    pageSizeSelectText: i18n.t('Rows per page'),\n    total: tableData.length,\n    pageLength: isLastPage() ? getLastPageLength() : null,\n    pageCount: getNumPages(),\n    pageSummaryText: ({\n      firstItem,\n      lastItem,\n      page,\n      pageCount,\n      total\n    }) => i18n.t('Page {{page}} of {{pageCount}}, row {{firstItem}}-{{lastItem}} of {{total}}', {\n      firstItem,\n      lastItem,\n      page,\n      pageCount,\n      total\n    })\n  })))))), /*#__PURE__*/React.createElement(AlertStack, null, error && /*#__PURE__*/React.createElement(AlertBar, {\n    warning: true,\n    duration: 2000\n  }, error)));\n};\nPopulationAgegroupsDataPreview.propTypes = {\n  eeData: PropTypes.array,\n  pointOuRows: PropTypes.array,\n  rowsPerPage: PropTypes.number,\n  onRowsPerPageChanged: PropTypes.func\n};\nexport { PopulationAgegroupsDataPreview };","import i18n from '@dhis2/d2-i18n';\nimport { DataTable, DataTableHead, DataTableBody, DataTableRow, DataTableCell, DataTableColumnHeader, DataTableFoot, Pagination, Tag, AlertStack, AlertBar } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect, useMemo, useRef } from 'react';\nimport styles from './styles/DataPreview.module.css';\nimport { useFetchCurrentValues } from './useFetchCurrentValues.js';\nconst NO_ROWS = [];\nconst PopulationDataPreview = ({\n  eeData,\n  pointOuRows,\n  rowsPerPage,\n  onRowsPerPageChanged\n}) => {\n  const [tableData, setTableData] = useState([]);\n  const [page, setPage] = useState(1);\n  const {\n    currentValues,\n    error\n  } = useFetchCurrentValues();\n  const tableRef = useRef(null);\n  useEffect(() => {\n    if (eeData) {\n      const newArr = eeData.map(d => {\n        const current = currentValues.find(v => v.orgUnit === d.ouId);\n        return {\n          current: current === null || current === void 0 ? void 0 : current.value,\n          ...d\n        };\n      }).concat(pointOuRows.map(({\n        id,\n        parentName,\n        name\n      }) => ({\n        ouId: id,\n        ouParentName: parentName,\n        ouName: name,\n        value: i18n.t('Point org. unit - no value'),\n        isNoValue: true\n      })));\n      setTableData(newArr);\n    }\n  }, [currentValues, eeData, pointOuRows]);\n  useEffect(() => {\n    var _tableRef$current;\n    tableRef === null || tableRef === void 0 ? void 0 : (_tableRef$current = tableRef.current) === null || _tableRef$current === void 0 ? void 0 : _tableRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [tableData, tableRef]);\n  const visibleRows = useMemo(() => {\n    if (!tableData.length) {\n      return NO_ROWS;\n    }\n    const start = (page - 1) * rowsPerPage;\n    const end = start + rowsPerPage;\n    return tableData.slice(start, end);\n  }, [tableData, rowsPerPage, page]);\n  if (!tableData.length) {\n    return null;\n  }\n  const getNumPages = () => Math.ceil(tableData.length / rowsPerPage);\n  const isLastPage = () => page === getNumPages();\n  const getLastPageLength = () => tableData.length % rowsPerPage;\n  const updateTablePaging = rows => {\n    setPage(1);\n    onRowsPerPageChanged(rows);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: tableRef\n  }, /*#__PURE__*/React.createElement(DataTable, {\n    dense: true,\n    className: styles.table\n  }, /*#__PURE__*/React.createElement(DataTableHead, null, /*#__PURE__*/React.createElement(DataTableRow, null, /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n    dense: true\n  }, i18n.t('Organisation Unit')), /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n    dense: true\n  }, i18n.t('Current value')), /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n    dense: true\n  }, i18n.t('New value')))), /*#__PURE__*/React.createElement(DataTableBody, null, visibleRows.map(({\n    ouId,\n    ouParentName,\n    ouName,\n    value,\n    current,\n    isNoValue\n  }) => {\n    return /*#__PURE__*/React.createElement(DataTableRow, {\n      key: ouId\n    }, /*#__PURE__*/React.createElement(DataTableCell, {\n      dense: true\n    }, /*#__PURE__*/React.createElement(React.Fragment, null, ouParentName && /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.parentOuName\n    }, `${ouParentName} / `), /*#__PURE__*/React.createElement(\"span\", null, ouName))), /*#__PURE__*/React.createElement(DataTableCell, {\n      dense: true\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.current\n    }, current || '')), /*#__PURE__*/React.createElement(DataTableCell, {\n      dense: true\n    }, isNoValue ? /*#__PURE__*/React.createElement(Tag, {\n      negative: true\n    }, value) : /*#__PURE__*/React.createElement(\"span\", null, value)));\n  })), /*#__PURE__*/React.createElement(DataTableFoot, null, /*#__PURE__*/React.createElement(DataTableRow, null, /*#__PURE__*/React.createElement(DataTableCell, {\n    staticStyle: true,\n    colSpan: '3'\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Pagination, {\n    page: page,\n    isLastPage: isLastPage(),\n    onPageChange: setPage,\n    onPageSizeChange: updateTablePaging,\n    pageSize: rowsPerPage,\n    pageSizeSelectText: i18n.t('Rows per page'),\n    total: tableData.length,\n    pageLength: isLastPage() ? getLastPageLength() : null,\n    pageCount: getNumPages(),\n    pageSummaryText: ({\n      firstItem,\n      lastItem,\n      page,\n      pageCount,\n      total\n    }) => i18n.t('Page {{page}} of {{pageCount}}, row {{firstItem}}-{{lastItem}} of {{total}}', {\n      firstItem,\n      lastItem,\n      page,\n      pageCount,\n      total\n    })\n  })))))), /*#__PURE__*/React.createElement(AlertStack, null, error && /*#__PURE__*/React.createElement(AlertBar, {\n    warning: true,\n    duration: 2000\n  }, error)));\n};\nPopulationDataPreview.propTypes = {\n  eeData: PropTypes.array,\n  pointOuRows: PropTypes.array,\n  rowsPerPage: PropTypes.number,\n  onRowsPerPageChanged: PropTypes.func\n};\nexport { PopulationDataPreview };","import { ReactFinalForm, ComponentCover, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { getEarthEngineBands } from '../util/earthEngines.js';\nimport { EARTH_ENGINE_ID } from '../util/formFieldConstants.js';\nimport { PopulationAgegroupsDataPreview } from './PopulationAgegroupsDataPreview.js';\nimport { PopulationDataPreview } from './PopulationDataPreview.js';\nimport styles from './styles/DataPreview.module.css';\nconst {\n  useField\n} = ReactFinalForm;\nconst DEFAULT_ROWS_PER_PAGE = 10;\nconst DataPreview = ({\n  loading,\n  eeData,\n  pointOuRows,\n  modifiedSinceLastSubmit\n}) => {\n  const [rowsPerPage, setRowsPerPage] = useState(DEFAULT_ROWS_PER_PAGE);\n  const {\n    input\n  } = useField(EARTH_ENGINE_ID);\n  const {\n    value: earthEngineId\n  } = input;\n  if (modifiedSinceLastSubmit) {\n    return null;\n  }\n  if (!loading && !eeData.length) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loading\n  }, /*#__PURE__*/React.createElement(ComponentCover, {\n    translucent: true\n  }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)))) : /*#__PURE__*/React.createElement(React.Fragment, null, !getEarthEngineBands(earthEngineId).length ? /*#__PURE__*/React.createElement(PopulationDataPreview, {\n    eeData: eeData,\n    pointOuRows: pointOuRows,\n    rowsPerPage: rowsPerPage,\n    onRowsPerPageChanged: setRowsPerPage\n  }) : /*#__PURE__*/React.createElement(PopulationAgegroupsDataPreview, {\n    eeData: eeData,\n    pointOuRows: pointOuRows,\n    rowsPerPage: rowsPerPage,\n    onRowsPerPageChanged: setRowsPerPage\n  })));\n};\nDataPreview.propTypes = {\n  eeData: PropTypes.array,\n  loading: PropTypes.bool,\n  modifiedSinceLastSubmit: PropTypes.bool,\n  pointOuRows: PropTypes.array\n};\nexport { DataPreview };","import i18n from '@dhis2/d2-i18n';\nimport { SingleSelectFieldFF, hasValue } from '@dhis2/ui';\nimport React from 'react';\nimport { StyledField } from '../../../components/index.js';\nimport { earthEngines } from '../util/earthEngines.js';\nimport { EARTH_ENGINE_ID } from '../util/formFieldConstants.js';\nconst options = Object.values(earthEngines).map(({\n  name,\n  earthEngineId\n}) => ({\n  label: name,\n  value: earthEngineId\n}));\nconst EarthEngineId = () => /*#__PURE__*/React.createElement(\"div\", {\n  style: {\n    maxWidth: '350px'\n  }\n}, /*#__PURE__*/React.createElement(StyledField, {\n  component: SingleSelectFieldFF,\n  name: EARTH_ENGINE_ID,\n  label: i18n.t('Earth Engine data set'),\n  options: options,\n  dataTest: \"input-earthengine-id\",\n  placeholder: i18n.t('Select earth engine data set'),\n  filled: true,\n  initialFocus: true,\n  validate: hasValue\n}));\nexport { EarthEngineId };","// extracted by mini-css-extract-plugin\nexport default {\"orgUnitDimension\":\"OrgUnitDimension_orgUnitDimension__Bvzuv\",\"left\":\"OrgUnitDimension_left__1Qzv0\",\"right\":\"OrgUnitDimension_right__VpaqX\",\"summary\":\"OrgUnitDimension_summary__ckgAu\",\"summaryText\":\"OrgUnitDimension_summaryText__TGlPt\",\"deselectButton\":\"OrgUnitDimension_deselectButton__xlcDG\"};","import { apiFetchOrganisationUnitLevels, ouIdHelper, DIMENSION_ID_ORGUNIT } from '@dhis2/analytics';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { OrganisationUnitTree, MultiSelect, MultiSelectOption, Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport styles from './styles/OrgUnitDimension.module.css';\n\n// This file has been copies and adapted from @dhis2/analytics OrgUnitDimension\n\nconst formatList = items => {\n  try {\n    const formatter = new Intl.ListFormat(i18n.language, {\n      style: 'long',\n      type: 'conjunction'\n    });\n    return formatter.format(items);\n  } catch (error) {\n    return items.join(', ');\n  }\n};\nconst OrgUnitDimension = ({\n  roots,\n  selected,\n  onSelect\n}) => {\n  const [ouLevels, setOuLevels] = useState([]);\n  const dataEngine = useDataEngine();\n  const onSelectItems = selectedItem => {\n    const {\n      id,\n      checked,\n      displayName,\n      path\n    } = selectedItem;\n    let result = [...selected];\n    if (checked) {\n      result.push({\n        id,\n        path,\n        name: displayName\n      });\n    } else {\n      result = [...result.filter(item => item.id !== id)];\n    }\n    onSelect({\n      dimensionId: DIMENSION_ID_ORGUNIT,\n      items: result\n    });\n  };\n  const clearSelection = () => onSelect({\n    dimensionId: DIMENSION_ID_ORGUNIT,\n    items: []\n  });\n  useEffect(() => {\n    const doFetchOuLevels = async () => {\n      const result = await apiFetchOrganisationUnitLevels(dataEngine);\n      result.sort((a, b) => a.level > b.level ? 1 : -1);\n      setOuLevels(result);\n    };\n    doFetchOuLevels();\n  }, [dataEngine]);\n  const onLevelChange = ids => {\n    const items = ids.map(id => ({\n      id: ouIdHelper.addLevelPrefix(id),\n      name: ouLevels.find(level => level.id === id).displayName\n    }));\n    onSelect({\n      dimensionId: DIMENSION_ID_ORGUNIT,\n      items: [...selected.filter(ou => !ouIdHelper.hasLevelPrefix(ou.id)), ...items]\n    });\n  };\n  const getSummary = () => {\n    let summary;\n    if (selected.length) {\n      const numberOfOrgUnits = selected.filter(item => !ouIdHelper.hasLevelPrefix(item.id)).length;\n      const numberOfLevels = selected.filter(item => ouIdHelper.hasLevelPrefix(item.id)).length;\n      const parts = [];\n      if (numberOfOrgUnits) {\n        parts.push(i18n.t('{{count}} org units', {\n          count: numberOfOrgUnits,\n          defaultValue: '{{count}} org unit',\n          defaultValue_plural: '{{count}} org units'\n        }));\n      }\n      if (numberOfLevels) {\n        parts.push(i18n.t('{{count}} levels', {\n          count: numberOfLevels,\n          defaultValue: '{{count}} level',\n          defaultValue_plural: '{{count}} levels'\n        }));\n      }\n      summary = i18n.t('Selected: {{commaSeparatedListOfOrganisationUnits}}', {\n        keySeparator: '>',\n        nsSeparator: '|',\n        commaSeparatedListOfOrganisationUnits: formatList(parts)\n      });\n    } else {\n      summary = i18n.t('Nothing selected');\n    }\n    return summary;\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.orgUnitDimension\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.left\n  }, /*#__PURE__*/React.createElement(OrganisationUnitTree, {\n    roots: roots,\n    initiallyExpanded: [...(roots.length === 1 ? [`/${roots[0]}`] : []), ...selected.filter(item => !ouIdHelper.hasLevelPrefix(item.id)).map(item => item.path.substring(0, item.path.lastIndexOf('/'))).filter(path => path)],\n    selected: selected.filter(item => !ouIdHelper.hasLevelPrefix(item.id)).map(item => item.path),\n    onChange: onSelectItems\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.right\n  }, /*#__PURE__*/React.createElement(MultiSelect, {\n    selected: ouLevels.length ? selected.filter(item => ouIdHelper.hasLevelPrefix(item.id)).map(item => ouIdHelper.removePrefix(item.id)) : [],\n    onChange: ({\n      selected\n    }) => onLevelChange(selected),\n    placeholder: i18n.t('Select a level'),\n    loading: !ouLevels.length,\n    dense: true\n  }, ouLevels.map(level => /*#__PURE__*/React.createElement(MultiSelectOption, {\n    key: level.id,\n    value: level.id,\n    label: level.displayName\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.summary\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.summaryText\n  }, getSummary()), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.deselectButton\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    small: true,\n    onClick: clearSelection,\n    disabled: !selected.length\n  }, i18n.t('Deselect all'))))));\n};\nOrgUnitDimension.propTypes = {\n  roots: PropTypes.arrayOf(PropTypes.string),\n  selected: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    path: PropTypes.string\n  })),\n  onSelect: PropTypes.func\n};\nexport { OrgUnitDimension };","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, ComponentCover, CenteredContent, CircularLoader, Help, hasValue, composeValidators } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { FormField } from '../../../components/index.js';\nimport { useCachedDataQuery } from '../util/CachedQueryProvider.js';\nimport { OrgUnitDimension } from './OrgUnitDimension.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta\n}) => {\n  const {\n    rootOrgUnits\n  } = useCachedDataQuery();\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !rootOrgUnits ? /*#__PURE__*/React.createElement(ComponentCover, null, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null))) : /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(OrgUnitDimension, {\n    roots: rootOrgUnits,\n    selected: value,\n    onSelect: ({\n      items\n    }) => onChange(items),\n    showUserOrgUnits: false\n  })), (meta.touched || !meta.pristine) && meta.error && /*#__PURE__*/React.createElement(Help, {\n    error: true\n  }, meta.error));\n};\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.arrayOf(PropTypes.object).isRequired,\n    onChange: PropTypes.func\n  }).isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\nconst AT_LEAST_ONE_ORG_VALIDATOR = selectedOrgUnits => {\n  // confirm that there is at least one org unit from the tree, not just level\n  const realOrgUnits = selectedOrgUnits.find(ou => ou.id.indexOf('LEVEL') === -1) || [];\n  return realOrgUnits.length == 0 ? i18n.t('At least one organisation unit must be selected') : undefined;\n};\nconst OrganisationUnits = () => {\n  const validator = composeValidators(hasValue, AT_LEAST_ONE_ORG_VALIDATOR);\n  return /*#__PURE__*/React.createElement(FormField, {\n    label: i18n.t('Organisation unit(s) to import data to'),\n    dataTest: \"input-organisationUnits-formField\"\n  }, /*#__PURE__*/React.createElement(Field, {\n    component: Wrapper,\n    name: \"organisationUnits\",\n    validate: validator\n  }));\n};\nexport { OrganisationUnits };","import i18n from '@dhis2/d2-i18n';\nimport { loadEarthEngineWorker } from '@dhis2/maps-gl';\nimport { earthEngines } from './earthEngines.js';\nconst DEFAULT_LOCALE = 'en';\nconst fallbackDateFormat = dateString => dateString.substr(0, 10);\nconst hasIntlSupport = typeof global.Intl !== 'undefined' && Intl.DateTimeFormat;\nconst dateLocale = locale => locale && locale.includes('_') ? locale.replace('_', '-') : locale;\nconst toDate = date => {\n  if (Array.isArray(date)) {\n    return new Date(date[0], date[1], date[2]);\n  }\n  return new Date(date);\n};\nconst formatLocaleDate = dateString => hasIntlSupport ? new Intl.DateTimeFormat(dateLocale(i18n.language || DEFAULT_LOCALE), {\n  year: 'numeric',\n  month: 'short',\n  day: 'numeric'\n}).format(toDate(dateString)) : fallbackDateFormat(dateString);\nconst formatStartEndDate = (startDate, endDate) => {\n  return `${formatLocaleDate(startDate)} - ${formatLocaleDate(endDate)}`;\n};\nconst getStartEndDate = data => formatStartEndDate(data['system:time_start'], data['system:time_end'] // - 7200001, // Minus 2 hrs to end the day before\n);\nlet workerPromise;\n\n// Load EE worker and set token\nconst getWorkerInstance = async engine => {\n  workerPromise = workerPromise || (async () => {\n    const EarthEngineWorker = await loadEarthEngineWorker(getAuthToken(engine));\n    return await new EarthEngineWorker();\n  })();\n  return workerPromise;\n};\nexport const getPeriods = async (eeId, engine) => {\n  const {\n    periodType,\n    filters\n  } = earthEngines[eeId];\n  const getPeriod = ({\n    id,\n    properties\n  }) => {\n    const year = new Date(properties['system:time_start']).getFullYear();\n    const name = periodType === 'Yearly' ? String(year) : getStartEndDate(properties);\n    return {\n      id,\n      name,\n      year\n    };\n  };\n  const eeWorker = await getWorkerInstance(engine);\n  const {\n    features\n  } = await eeWorker.getPeriods(earthEngines[eeId].datasetId);\n  const periods = features.map(getPeriod).map(p => {\n    const period = filters ? filters(p)[0] : p;\n    return {\n      label: p.name,\n      value: p.year.toString(),\n      ...period\n    };\n  });\n  return Promise.resolve(periods);\n};\nexport const getAggregations = async (engine, config) => {\n  const eeWorker = await getWorkerInstance(engine);\n  const aggregations = await eeWorker.getAggregations(config);\n  return aggregations;\n};\n\n// Returns auth token for EE API as a promise\nconst getAuthToken = engine => () => {\n  const googleTokenQuery = {\n    data: {\n      resource: 'tokens/google'\n    }\n  };\n\n  /* eslint-disable-next-line no-async-promise-executor */\n  return new Promise(async (resolve, reject) => {\n    const result = await engine.query(googleTokenQuery).catch(() => reject(new Error(i18n.t('Cannot get authorization token for Google Earth Engine.'))));\n    const token = result.data;\n    if (token && token.status === 'ERROR') {\n      reject(new Error(i18n.t('Requires a Google Earth Engine account. Check the DHIS2 documentation for more information.')));\n    }\n    resolve({\n      token_type: 'Bearer',\n      ...token\n    });\n  });\n};","import { useDataEngine } from '@dhis2/app-runtime';\n// import i18n from '@dhis2/d2-i18n'\nimport { useState, useEffect } from 'react';\nimport { getPeriods } from '../util/earthEngineHelper.js';\nconst usePeriods = eeId => {\n  const engine = useDataEngine();\n  // const [error , setError] = useState(undefined)\n  const [loading, setLoading] = useState(true);\n  const [periods, setPeriods] = useState([]);\n  useEffect(() => {\n    const asyncGetPeriods = async () => {\n      const p = await getPeriods(eeId, engine);\n      setPeriods(p);\n      setLoading(false);\n    };\n    if (eeId) {\n      setLoading(true);\n      asyncGetPeriods();\n    } else {\n      setLoading(false);\n    }\n  }, [eeId, engine]);\n\n  // TODO handle errors\n  // const validationText =\n  //     error &&\n  //     `${i18n.t(\n  //         'Something went wrong when loading the Earth Engine periods'\n  //     )} : ${error.message}`\n\n  return {\n    loading,\n    /*error, validationText,*/periods\n  };\n};\nexport { usePeriods };","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, SingleSelectFieldFF, hasValue } from '@dhis2/ui';\nimport React, { useEffect } from 'react';\nimport { StyledField, Tooltip } from '../../../components/index.js';\nimport { EARTH_ENGINE_ID, PERIOD } from '../util/formFieldConstants.js';\nimport { usePeriods } from './usePeriods.js';\nconst {\n  useField,\n  useForm\n} = ReactFinalForm;\nconst Periods = () => {\n  const {\n    change\n  } = useForm();\n  const {\n    input\n  } = useField(EARTH_ENGINE_ID);\n  const {\n    value: earthEngineId\n  } = input;\n  const {\n    loading,\n    periods\n  } = usePeriods(earthEngineId);\n  useEffect(() => {\n    change(PERIOD, undefined);\n    if (periods.length === 1) {\n      change(PERIOD, periods[0].value);\n    }\n  }, [earthEngineId, periods, change]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: '200px'\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    disabled: !earthEngineId,\n    content: i18n.t('You must select an Earth Engine data set before selecting a period')\n  }, /*#__PURE__*/React.createElement(StyledField, {\n    component: SingleSelectFieldFF,\n    name: PERIOD,\n    label: i18n.t('Period'),\n    options: periods,\n    dataTest: \"input-period-type\",\n    helpText: i18n.t('Data from Earth Engine will be imported for this period.'),\n    placeholder: i18n.t('Select period'),\n    loading: loading,\n    loadingText: i18n.t('Loading periods'),\n    empty: i18n.t('No periods found'),\n    filled: true,\n    validate: hasValue,\n    disabled: !earthEngineId\n  })));\n};\nexport { Periods };","import i18n from '@dhis2/d2-i18n';\nimport { SingleSelectFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport { StyledField } from '../../../components/index.js';\nimport { ROUNDING } from '../util/formFieldConstants.js';\nconst roundings = [{\n  label: i18n.t(\"Don't round source values\"),\n  value: '-1'\n}, {\n  label: i18n.t('Round to 0 decimal places'),\n  value: '0'\n}, {\n  label: i18n.t('Round to 1 decimal place'),\n  value: '1'\n}, {\n  label: i18n.t('Round to 2 decimal places'),\n  value: '2'\n}, {\n  label: i18n.t('Round to 3 decimal places'),\n  value: '3'\n}, {\n  label: i18n.t('Round to 4 decimal places'),\n  value: '4'\n}, {\n  label: i18n.t('Round to 5 decimal places'),\n  value: '5'\n}, {\n  label: i18n.t('Round to 6 decimal places'),\n  value: '6'\n}];\nconst defaultRoundingOption = roundings[0].value;\nconst Rounding = () => /*#__PURE__*/React.createElement(\"div\", {\n  style: {\n    maxWidth: '300px'\n  }\n}, /*#__PURE__*/React.createElement(StyledField, {\n  component: SingleSelectFieldFF,\n  name: ROUNDING,\n  label: i18n.t('Value rounding'),\n  options: roundings,\n  dataTest: \"input-rounding\",\n  filled: true\n}));\nexport { Rounding, defaultRoundingOption };","const sortByLevel = orgUnits => {\n  orgUnits.sort((a, b) => a.le - b.le);\n  return orgUnits;\n};\nconst TYPE_POINT = 'Point';\nconst TYPE_POLYGON = 'Polygon';\nconst TYPE_MULTIPOLYGON = 'MultiPolygon';\nconst TYPE_FEATURE = 'Feature';\n\n//Returns an array with all falsey values removed.\n//copied from lodash\nconst compact = arr => {\n  let resIndex = 0;\n  const result = [];\n  if (arr == null) {\n    return result;\n  }\n  for (const value of arr) {\n    if (value) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n};\nexport const toGeoJson = organisationUnits => sortByLevel(organisationUnits).map(ou => {\n  const coord = JSON.parse(ou.co);\n  let gpid = '';\n  let gppg = '';\n  let type = TYPE_POINT;\n  if (ou.ty === 2) {\n    type = TYPE_POLYGON;\n    if (ou.co.substring(0, 4) === '[[[[') {\n      type = TYPE_MULTIPOLYGON;\n    }\n  }\n\n  // Grand parent\n  if (typeof ou.pg === 'string' && ou.pg.length) {\n    const ids = compact(ou.pg.split('/'));\n\n    // Grand parent id\n    if (ids.length >= 2) {\n      gpid = ids[ids.length - 2];\n    }\n\n    // Grand parent parent graph\n    if (ids.length > 2) {\n      gppg = '/' + ids.slice(0, ids.length - 2).join('/');\n    }\n  }\n  return {\n    type: TYPE_FEATURE,\n    id: ou.id,\n    geometry: {\n      type,\n      coordinates: coord\n    },\n    properties: {\n      type,\n      id: ou.id,\n      name: ou.na,\n      hasCoordinatesDown: ou.hcd,\n      hasCoordinatesUp: ou.hcu,\n      level: ou.le,\n      grandParentParentGraph: gppg,\n      grandParentId: gpid,\n      parentGraph: ou.pg,\n      parentId: ou.pi,\n      parentName: ou.pn,\n      dimensions: ou.dimensions\n    }\n  };\n}).filter(({\n  geometry\n}) => Array.isArray(geometry.coordinates) && geometry.coordinates.length);","import i18n from '@dhis2/d2-i18n';\nimport { NO_ASSOCIATED_GEOMETRY } from '../components/AssociatedGeometry.js';\nimport { earthEngines, getEarthEngineBands } from './earthEngines.js';\nimport { toGeoJson } from './toGeoJson.js';\nconst getGeoFeaturesQuery = (ouIds, coordinateField) => ({\n  resource: 'geoFeatures',\n  params: {\n    ou: ouIds,\n    coordinateField\n  }\n});\nconst earthEngineParams = ['format', 'aggregationType', 'band', 'bandReducer', 'datasetId', 'data', 'filter', 'mosaic', 'params', 'tileScale'];\nconst TILE_SCALE = 4;\nconst getEarthEngineConfig = async ({\n  earthEngineId,\n  organisationUnits,\n  associatedGeometry,\n  period,\n  periods,\n  aggregationType,\n  selectedBandCocs\n}, engine) => {\n  if (!organisationUnits || !organisationUnits.length) {\n    throw new Error(i18n.t('No organisation units have been selected'));\n  }\n  const orgUnitIds = organisationUnits.map(ou => ou.id);\n  const ouIdsString = orgUnitIds.reduce((previousValue, currentValue) => {\n    return previousValue.concat(`${currentValue};`);\n  }, 'ou:');\n  const coordinateField = associatedGeometry !== NO_ASSOCIATED_GEOMETRY ? associatedGeometry : undefined;\n  const query = getGeoFeaturesQuery(ouIdsString, coordinateField);\n  const geoFeatures = await engine.query({\n    geoFeatures: query\n  });\n  // only polygons, no points to the Earth Engine\n  const polygonFeatures = toGeoJson(geoFeatures.geoFeatures.filter(gf => gf.ty === 2));\n  if (!polygonFeatures.length) {\n    throw new Error(i18n.t('It is not possible to get data from Earth Engine for point facilities. Select polygon organisation units or use a catchment area as associated geometry.'));\n  }\n  const pointFeatures = toGeoJson(geoFeatures.geoFeatures.filter(gf => gf.ty === 1)) || [];\n  const pointOrgUnits = pointFeatures.map(({\n    properties\n  }) => ({\n    id: properties.id,\n    name: properties.name,\n    parentName: properties.parentName\n  }));\n  const cfg = {\n    ...earthEngines[earthEngineId],\n    aggregationType: [aggregationType],\n    filter: periods.filter(p => period === p.name),\n    tileScale: TILE_SCALE,\n    data: polygonFeatures\n  };\n  if (getEarthEngineBands(earthEngineId).length && selectedBandCocs) {\n    cfg.band = selectedBandCocs.map(bc => bc.id);\n  }\n  const config = Object.fromEntries(earthEngineParams.filter(key => key in cfg).map(key => [key, cfg[key]]));\n  return {\n    config,\n    pointOrgUnits\n  };\n};\nexport { getEarthEngineConfig };","import { getPrecisionFn } from './getPrecisionFn.js';\nconst AGGREGATION_TYPE_SUM = 'sum';\nconst AGGREGATION_TYPE_MIN = 'min';\nconst AGGREGATION_TYPE_MAX = 'max';\nconst AGGREGATION_TYPE_MEAN = 'mean';\nconst AGGREGATION_TYPE_MEDIAN = 'median';\nconst AGGREGATION_TYPE_STDDEV = 'stdDev';\nconst AGGREGATION_TYPE_VARIANCE = 'variance';\nconst ALL_AGGREGATION_TYPES = [AGGREGATION_TYPE_SUM, AGGREGATION_TYPE_MIN, AGGREGATION_TYPE_MAX, AGGREGATION_TYPE_MEAN, AGGREGATION_TYPE_MEDIAN, AGGREGATION_TYPE_STDDEV, AGGREGATION_TYPE_VARIANCE];\nexport const OU_ID = 'ouId';\nexport const OU_PARENT_NAME = 'ouParentName';\nexport const OU_NAME = 'ouName';\nexport const BAND_ID = 'id';\nexport const COC_ID = 'coc';\nexport const VALUE = 'value';\nconst isAggregation = bandId => ALL_AGGREGATION_TYPES.includes(bandId);\nconst getStructuredData = ({\n  data,\n  selectedBandCocs,\n  ouIdNameMap,\n  rounding,\n  aggregationType\n}) => {\n  const getValueWithPrecision = getPrecisionFn(rounding);\n  return Object.entries(data).reduce((acc, [ouId, valueSet]) => {\n    if (selectedBandCocs.length === 1) {\n      acc.push({\n        [OU_ID]: ouId,\n        [OU_PARENT_NAME]: ouIdNameMap[ouId].parentName,\n        [OU_NAME]: ouIdNameMap[ouId].name,\n        [BAND_ID]: selectedBandCocs[0].id,\n        [VALUE]: getValueWithPrecision(valueSet[aggregationType])\n      });\n    } else if (selectedBandCocs.length > 1) {\n      Object.entries(valueSet).forEach(([groupId, rawValue]) => {\n        if (!isAggregation(groupId)) {\n          acc.push({\n            [OU_ID]: ouId,\n            [OU_PARENT_NAME]: ouIdNameMap[ouId].parentName,\n            [OU_NAME]: ouIdNameMap[ouId].name,\n            [BAND_ID]: groupId,\n            [VALUE]: getValueWithPrecision(rawValue)\n          });\n        }\n      });\n    } else {\n      acc.push({\n        [OU_ID]: ouId,\n        [OU_PARENT_NAME]: ouIdNameMap[ouId].parentName,\n        [OU_NAME]: ouIdNameMap[ouId].name,\n        [VALUE]: getValueWithPrecision(valueSet[aggregationType])\n      });\n    }\n    return acc;\n  }, []);\n};\nexport { getStructuredData };","// Returns a function that will return a value with the given precision\nconst getPrecisionFn = numDecimals => {\n  const decimals = parseInt(numDecimals);\n  if (decimals === -1) {\n    return n => n;\n  }\n  const m = Math.pow(10, decimals);\n  return n => Math.round(n * m) / m;\n};\nexport { getPrecisionFn };","import { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { useState } from 'react';\nimport { getPeriods, getAggregations } from '../util/earthEngineHelper.js';\nimport { getDefaultAggregation } from '../util/earthEngines.js';\nimport { getEarthEngineConfig } from '../util/getEarthEngineConfig.js';\nimport { getStructuredData } from '../util/getStructuredData.js';\nconst useEeData = () => {\n  const engine = useDataEngine();\n  const [eeData, setEeData] = useState([]);\n  const [pointOuRows, setPointOuRows] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const fetchEeData = async ({\n    earthEngineId,\n    organisationUnits,\n    associatedGeometry,\n    period,\n    rounding,\n    bandCocs = []\n  }) => {\n    const selectedBandCocs = bandCocs.filter(bc => !!bc.coc);\n    const aggregationType = getDefaultAggregation(earthEngineId);\n    setLoading(true);\n    setErrorMessage(null);\n    try {\n      var _config$data;\n      const periods = await getPeriods(earthEngineId, engine);\n      const {\n        config,\n        pointOrgUnits\n      } = await getEarthEngineConfig({\n        earthEngineId,\n        organisationUnits,\n        associatedGeometry,\n        period,\n        periods,\n        aggregationType,\n        selectedBandCocs\n      }, engine);\n      const data = await getAggregations(engine, config);\n      const ouIdNameMap = (_config$data = config.data) === null || _config$data === void 0 ? void 0 : _config$data.reduce((acc, curr) => {\n        acc[curr.id] = curr.properties;\n        return acc;\n      }, {});\n      const structuredData = getStructuredData({\n        data,\n        selectedBandCocs,\n        ouIdNameMap,\n        rounding,\n        aggregationType\n      });\n      setEeData(structuredData);\n      setPointOuRows(pointOrgUnits);\n      setLoading(false);\n    } catch (error) {\n      console.log('Error while loading Earth Engine data', error);\n      setEeData([]);\n      setPointOuRows(null);\n      setLoading(false);\n      const message = error.message || error;\n      let msg = i18n.t('An error occurred while trying to fetch Earth Engine data');\n      if (message.includes('Output of image computation is too large')) {\n        msg = i18n.t('The Earth Engine data set is too large. Try reducing the number of groups or organisation units');\n      } else if (message.includes('Dimension is present in query without any valid dimension options: `ou`')) {\n        msg = i18n.t('The organisation units selection is invalid');\n      } else if (message.length) {\n        msg = msg.concat(`: ${message}`);\n      }\n      setErrorMessage(msg);\n      return;\n    }\n  };\n  return {\n    eeData,\n    pointOuRows,\n    loading,\n    errorMessage,\n    fetchEeData\n  };\n};\nexport { useEeData };","// extracted by mini-css-extract-plugin\nexport default {\"hiddenTopElement\":\"EarthEngineImportForm_hiddenTopElement__HY4q0\",\"sectionHeader\":\"EarthEngineImportForm_sectionHeader__3Et2h\",\"wrapper\":\"EarthEngineImportForm_wrapper__UrB5Y\",\"buttonWrapper\":\"EarthEngineImportForm_buttonWrapper__-njQC\"};","// import { FORM_ERROR, jobStartedMessage } from '../../utils/final-form.js' // TODO\nimport { genericErrorMessage } from '../../utils/helper.js';\nimport { extractIdAndMessage } from '../../utils/xhr.js';\nimport { OU_ID, BAND_ID, VALUE } from './util/getStructuredData.js';\nconst isAsync = true;\nconst onImport = ({\n  engine,\n  setProgress,\n  addTask,\n  setShowFullSummaryTask\n}) => async values => {\n  const {\n    dryRun,\n    eeData,\n    dataElementId: dataElement,\n    period,\n    bandCocs = []\n  } = values;\n  setProgress(true);\n  let dataValues;\n  if (bandCocs.length) {\n    dataValues = eeData.map(d => ({\n      dataElement,\n      period,\n      orgUnit: d[OU_ID],\n      categoryOptionCombo: bandCocs.find(bc => bc.id === d[BAND_ID]).coc,\n      value: d[VALUE]\n    }));\n  } else {\n    dataValues = eeData.map(d => ({\n      dataElement,\n      period,\n      orgUnit: d[OU_ID],\n      value: d[VALUE]\n    }));\n  }\n  const mutation = {\n    resource: 'dataValueSets',\n    type: 'create',\n    params: {\n      async: isAsync,\n      dryRun\n    },\n    data: {\n      dataValues\n    }\n  };\n  engine.mutate(mutation, {\n    onComplete: resp => {\n      setProgress(false);\n      const {\n        id,\n        error,\n        msg,\n        typeReports\n      } = extractIdAndMessage(resp);\n      const currentDate = new Date();\n      const entry = {\n        id: id || currentDate.getTime(),\n        created: currentDate,\n        lastUpdated: currentDate,\n        importType: 'DATAVALUE_IMPORT',\n        level: error ? 'ERROR' : 'INFO',\n        completed: Boolean(!isAsync || error),\n        events: msg ? [msg] : undefined,\n        error: Boolean(error),\n        summary: !isAsync || error && msg ? typeReports : undefined\n      };\n      addTask('earthengine', id, {\n        ...entry,\n        jobDetails: values\n      });\n      setShowFullSummaryTask(true);\n    },\n    onError: err => {\n      setProgress(false);\n      // 404 - err is a string\n      console.log('err', err);\n      const message = err !== null && err !== void 0 && err.length ? err : genericErrorMessage;\n      console.error('uploadJson error', message);\n      // reject(errF(message))\n    }\n  });\n};\nexport { onImport };","import { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, Divider, Button } from '@dhis2/ui';\nimport arrayMutators from 'final-form-arrays';\nimport React, { useState, useContext, useRef } from 'react';\nimport { Page, DataIcon, Tooltip } from '../../components/index.js';\nimport { FormAlerts, ImportButtonStrip } from '../../components/Inputs/index.js';\nimport { TaskContext, getNewestTask } from '../../contexts/index.js';\nimport { AssociatedGeometry } from './components/AssociatedGeometry.js';\nimport { BandCocMappingTable } from './components/BandCocMappingTable.js';\nimport { DataElements } from './components/DataElements.js';\nimport { DataPreview } from './components/DataPreview.js';\nimport { EarthEngineId } from './components/EarthEngineId.js';\nimport { OrganisationUnits } from './components/OrganisationUnits.js';\nimport { Periods } from './components/Periods.js';\nimport { Rounding, defaultRoundingOption } from './components/Rounding.js';\nimport { useEeData } from './components/useEeData.js';\nimport styles from './EarthEngineImportForm.module.css';\nimport { onImport } from './form-helper.js';\nimport { getEarthEngineBands } from './util/earthEngines.js';\nimport { ORGANISATION_UNITS, ROUNDING, DATA_ELEMENT_ID, EARTH_ENGINE_ID } from './util/formFieldConstants.js';\nconst {\n  Form,\n  FormSpy\n} = ReactFinalForm;\nconst EarthEngineImportForm = () => {\n  const {\n    tasks: {\n      earthengine: earthengineTasks\n    },\n    addTask\n  } = useContext(TaskContext);\n  const engine = useDataEngine();\n  const [progress, setProgress] = useState(false);\n  const [showFullSummaryTask, setShowFullSummaryTask] = useState(false);\n  const {\n    eeData,\n    pointOuRows,\n    loading,\n    errorMessage,\n    fetchEeData\n  } = useEeData();\n\n  // for scrolling to the Job summary which is placed at the top\n  const hiddenTopElRef = useRef(null);\n  const initialValues = {\n    [ROUNDING]: defaultRoundingOption,\n    [ORGANISATION_UNITS]: [],\n    [DATA_ELEMENT_ID]: null\n  };\n  const mappingTableShouldDisplay = ({\n    values\n  }) => values && getEarthEngineBands(values[EARTH_ENGINE_ID]).length && values[DATA_ELEMENT_ID];\n  const previewIsAllowed = ({\n    valid,\n    values,\n    modifiedSinceLastSubmit\n  }) => {\n    var _values$bandCocs;\n    // no preview until there are some valid bands\n    const bandsValid = getEarthEngineBands(values[EARTH_ENGINE_ID]).length ? !!((_values$bandCocs = values.bandCocs) !== null && _values$bandCocs !== void 0 && _values$bandCocs.find(bc => !!bc.coc)) : true;\n    const modified = errorMessage ? modifiedSinceLastSubmit : true;\n    return valid && bandsValid && modified;\n  };\n  const wrappedSetShowFullSummaryTask = val => {\n    var _hiddenTopElRef$curre;\n    setShowFullSummaryTask(val);\n    hiddenTopElRef === null || hiddenTopElRef === void 0 ? void 0 : (_hiddenTopElRef$curre = hiddenTopElRef.current) === null || _hiddenTopElRef$curre === void 0 ? void 0 : _hiddenTopElRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const onImportInternal = onImport({\n    engine,\n    setProgress,\n    addTask,\n    setShowFullSummaryTask: wrappedSetShowFullSummaryTask\n  });\n  const onSubmit = values => {\n    if (!loading && !errorMessage) {\n      onImportInternal({\n        eeData,\n        ...values\n      });\n    }\n  };\n  const getAlerts = submitError => {\n    const internalErrors = [];\n    if (errorMessage) {\n      internalErrors.push({\n        id: 'getEeDataFailed',\n        message: errorMessage,\n        critical: true,\n        info: false,\n        warning: false\n      });\n    }\n    return Array.isArray(submitError) ? submitError.concat(internalErrors) : internalErrors;\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: hiddenTopElRef,\n    className: styles.hiddenTopElement\n  }), /*#__PURE__*/React.createElement(Page, {\n    title: i18n.t('Earth Engine import'),\n    desc: i18n.t('Import high resolution population data from WorldPop using Google Earth Engine.'),\n    icon: /*#__PURE__*/React.createElement(DataIcon, null),\n    loading: progress,\n    dataTest: \"page-import-earthengine\",\n    summaryTask: getNewestTask(earthengineTasks),\n    showFullSummaryTask: showFullSummaryTask\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    initialValues: initialValues,\n    keepDirtyOnReinitialize: true,\n    mutators: {\n      ...arrayMutators\n    },\n    render: ({\n      handleSubmit,\n      submitError,\n      form\n    }) => {\n      return /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: handleSubmit\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.wrapper\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        className: styles.sectionHeader\n      }, i18n.t('Earth Engine source')), /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(EarthEngineId, null), /*#__PURE__*/React.createElement(Periods, null), /*#__PURE__*/React.createElement(Rounding, null), /*#__PURE__*/React.createElement(\"h2\", {\n        className: styles.sectionHeader\n      }, i18n.t('Organisation units')), /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(OrganisationUnits, null), /*#__PURE__*/React.createElement(AssociatedGeometry, null), /*#__PURE__*/React.createElement(\"h2\", {\n        className: styles.sectionHeader\n      }, i18n.t('Import setup')), /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(DataElements, null), /*#__PURE__*/React.createElement(FormSpy, {\n        subscription: {\n          values: true\n        }\n      }, ({\n        values\n      }) => mappingTableShouldDisplay({\n        values\n      }) ? /*#__PURE__*/React.createElement(BandCocMappingTable, null) : null), /*#__PURE__*/React.createElement(FormSpy, {\n        subscription: {\n          values: true,\n          valid: true,\n          modifiedSinceLastSubmit: true\n        }\n      }, ({\n        valid,\n        values,\n        modifiedSinceLastSubmit\n      }) => {\n        return !modifiedSinceLastSubmit && !loading && eeData !== null && eeData !== void 0 && eeData.length ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n          className: styles.sectionHeader\n        }, i18n.t('Data preview')), /*#__PURE__*/React.createElement(Divider, null)) : /*#__PURE__*/React.createElement(Tooltip, {\n          disabled: !valid,\n          content: i18n.t('Some required fields are missing')\n        }, /*#__PURE__*/React.createElement(Button, {\n          primary: true,\n          type: \"submit\",\n          disabled: !previewIsAllowed({\n            valid,\n            values,\n            modifiedSinceLastSubmit\n          }),\n          onClick: () => fetchEeData(values)\n        }, i18n.t('Preview before import')));\n      }), /*#__PURE__*/React.createElement(FormSpy, {\n        subscription: {\n          modifiedSinceLastSubmit: true\n        }\n      }, ({\n        modifiedSinceLastSubmit\n      }) => /*#__PURE__*/React.createElement(DataPreview, {\n        modifiedSinceLastSubmit: modifiedSinceLastSubmit,\n        loading: loading,\n        eeData: eeData,\n        pointOuRows: pointOuRows\n      })), /*#__PURE__*/React.createElement(FormSpy, {\n        subscription: {\n          modifiedSinceLastSubmit: true\n        }\n      }, ({\n        modifiedSinceLastSubmit\n      }) => !modifiedSinceLastSubmit && !loading && eeData !== null && eeData !== void 0 && eeData.length ? /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.buttonWrapper\n      }, /*#__PURE__*/React.createElement(ImportButtonStrip, {\n        form: form\n      })) : null), /*#__PURE__*/React.createElement(FormAlerts, {\n        alerts: getAlerts(submitError)\n      })));\n    }\n  })));\n};\nexport { EarthEngineImportForm };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { NO_ASSOCIATED_GEOMETRY } from './components/AssociatedGeometry.js';\nimport { EarthEngineImportForm } from './EarthEngineImportForm.js';\nimport { CachedDataQueryProvider } from './util/CachedQueryProvider.js';\n\n// PAGE INFO\nexport const PAGE_NAME = i18n.t('Earth Engine import');\nexport const PAGE_DESCRIPTION = i18n.t('Import high resolution population data from WorldPop using Google Earth Engine.');\nconst query = {\n  rootOrgUnits: {\n    resource: 'organisationUnits',\n    params: {\n      fields: 'id,displayName,name',\n      userDataViewFallback: true,\n      paging: false\n    }\n  },\n  dataElements: {\n    resource: 'dataElements',\n    params: {\n      fields: 'id,displayName~rename(name),categoryCombo[categoryOptionCombos[id,code,displayName~rename(name)]]',\n      filter: 'domainType:eq:AGGREGATE',\n      paging: false\n    }\n  },\n  associatedGeometry: {\n    resource: 'attributes',\n    params: {\n      fields: 'id,displayName~rename(name)',\n      filter: ['valueType:eq:GEOJSON', 'organisationUnitAttribute:eq:true'],\n      paging: false\n    }\n  }\n};\nconst providerDataTransformation = ({\n  rootOrgUnits,\n  dataElements,\n  associatedGeometry\n}) => {\n  var _rootOrgUnits$organis;\n  return {\n    rootOrgUnits: ((_rootOrgUnits$organis = rootOrgUnits.organisationUnits) === null || _rootOrgUnits$organis === void 0 ? void 0 : _rootOrgUnits$organis.map(ou => ou.id)) || [],\n    dataElements: dataElements.dataElements.map(de => ({\n      ...de,\n      value: de.id,\n      label: de.name\n    })),\n    associatedGeometry: [{\n      label: 'None',\n      value: NO_ASSOCIATED_GEOMETRY\n    }].concat(associatedGeometry.attributes.map(ag => {\n      return {\n        ...ag,\n        value: ag.id,\n        label: ag.name\n      };\n    }))\n  };\n};\nconst EarthEngineImport = () => /*#__PURE__*/React.createElement(CachedDataQueryProvider, {\n  query: query,\n  dataTransformation: providerDataTransformation\n}, /*#__PURE__*/React.createElement(EarthEngineImportForm, null));\nexport { EarthEngineImport };","import { useDataEngine } from '@dhis2/app-runtime';\nimport { DATE_BEFORE_VALIDATOR, DATE_AFTER_VALIDATOR } from '../../components/DatePicker/DatePickerField.js';\nimport { ALL_VALUE } from '../../hooks/useProgramStages.js';\n\n// Function to transform events data to match specified format\nconst transformEventsData = (eventsData, orgUnitsData, programsData) => {\n  var _orgUnitsData$organis, _programsData$program;\n  if (!(eventsData !== null && eventsData !== void 0 && eventsData.events) || !Array.isArray(eventsData.events)) {\n    return [];\n  }\n  const orgUnit = orgUnitsData === null || orgUnitsData === void 0 ? void 0 : (_orgUnitsData$organis = orgUnitsData.organisationUnits) === null || _orgUnitsData$organis === void 0 ? void 0 : _orgUnitsData$organis[0];\n  const program = programsData === null || programsData === void 0 ? void 0 : (_programsData$program = programsData.programs) === null || _programsData$program === void 0 ? void 0 : _programsData$program[0];\n\n  // Create lookup maps for data elements\n  const dataElementLookup = {};\n  if (program !== null && program !== void 0 && program.programStages) {\n    program.programStages.forEach(stage => {\n      var _stage$programStageDa;\n      (_stage$programStageDa = stage.programStageDataElements) === null || _stage$programStageDa === void 0 ? void 0 : _stage$programStageDa.forEach(psde => {\n        const de = psde.dataElement;\n        if (de) {\n          dataElementLookup[de.id] = de.displayName || de.name;\n        }\n      });\n    });\n  }\n  return eventsData.events.map(event => {\n    const transformedEvent = {\n      event: event.event || '',\n      status: event.status || '',\n      occurredAt: event.occurredAt || '',\n      createdAt: event.createdAt || '',\n      updatedAt: event.updatedAt || '',\n      project: (program === null || program === void 0 ? void 0 : program.displayName) || (program === null || program === void 0 ? void 0 : program.name) || event.program || '',\n      program: (orgUnit === null || orgUnit === void 0 ? void 0 : orgUnit.displayName) || (orgUnit === null || orgUnit === void 0 ? void 0 : orgUnit.name) || event.orgUnit || '',\n      Males: '',\n      District: '',\n      Females: '',\n      'Total Persons reached': ''\n    };\n\n    // Extract specific data values based on data element names\n    if (event.dataValues && Array.isArray(event.dataValues)) {\n      event.dataValues.forEach(dataValue => {\n        const elementName = dataElementLookup[dataValue.dataElement] || dataValue.dataElement;\n        const value = dataValue.value || '';\n\n        // Map data element names to our expected columns\n        if (elementName.toLowerCase().includes('male') && !elementName.toLowerCase().includes('female')) {\n          transformedEvent.Males = value;\n        } else if (elementName.toLowerCase().includes('female')) {\n          transformedEvent.Females = value;\n        } else if (elementName.toLowerCase().includes('district')) {\n          transformedEvent.District = value;\n        } else if (elementName.toLowerCase().includes('total') && elementName.toLowerCase().includes('person')) {\n          transformedEvent['Total Persons reached'] = value;\n        }\n      });\n    }\n    return transformedEvent;\n  });\n};\n\n// Custom hook to fetch and transform events data\nexport const useEventsData = () => {\n  const engine = useDataEngine();\n  const fetchEventsData = async params => {\n    try {\n      const {\n        selectedOrgUnits,\n        selectedPrograms,\n        programStage,\n        occurredAfter,\n        occurredBefore,\n        includeDeleted,\n        inclusion\n      } = params;\n\n      // Extract just the ID, handling both object format and path format\n      let orgUnit = selectedOrgUnits === null || selectedOrgUnits === void 0 ? void 0 : selectedOrgUnits[0];\n      if (typeof orgUnit === 'object' && orgUnit.id) {\n        orgUnit = orgUnit.id;\n      } else if (typeof orgUnit === 'string' && orgUnit.includes('/')) {\n        // Extract the last part of the path as the ID\n        orgUnit = orgUnit.split('/').pop();\n      }\n      const program = selectedPrograms;\n      if (!orgUnit || !program) {\n        throw new Error('Organization unit and program are required');\n      }\n\n      // Use the DHIS2 data engine query format\n      const EVENTS_QUERY = {\n        events: {\n          resource: 'tracker/events',\n          params: {\n            orgUnit,\n            program,\n            programStage: programStage !== ALL_VALUE ? programStage : undefined,\n            occurredAfter,\n            occurredBefore,\n            ouMode: inclusion || 'SELECTED',\n            includeDeleted: includeDeleted || false,\n            fields: 'event,status,occurredAt,createdAt,updatedAt,orgUnit,program,programStage,dataValues[dataElement,value]',\n            paging: false\n          }\n        },\n        orgUnits: {\n          resource: 'organisationUnits',\n          params: {\n            filter: `id:eq:${orgUnit}`,\n            fields: 'id,displayName,name'\n          }\n        },\n        programs: {\n          resource: 'programs',\n          params: {\n            filter: `id:eq:${program}`,\n            fields: 'id,name,displayName,programStages[id,name,displayName,programStageDataElements[dataElement[id,name,displayName]]]'\n          }\n        }\n      };\n      const data = await engine.query(EVENTS_QUERY);\n      return transformEventsData(data.events, data.orgUnits, data.programs);\n    } catch (error) {\n      console.error('Error fetching events data:', error);\n      throw error;\n    }\n  };\n  return {\n    fetchEventsData\n  };\n};\nconst onExport = (engine, setExportEnabled) => async values => {\n  setExportEnabled(false);\n  try {\n    const {\n      selectedOrgUnits,\n      selectedPrograms,\n      programStage,\n      format,\n      compression,\n      occurredAfter,\n      occurredBefore,\n      includeDeleted,\n      inclusion\n    } = values;\n\n    // Extract just the ID, handling both object format and path format\n    let orgUnit = selectedOrgUnits === null || selectedOrgUnits === void 0 ? void 0 : selectedOrgUnits[0];\n    if (typeof orgUnit === 'object' && orgUnit.id) {\n      orgUnit = orgUnit.id;\n    } else if (typeof orgUnit === 'string' && orgUnit.includes('/')) {\n      // Extract the last part of the path as the ID\n      orgUnit = orgUnit.split('/').pop();\n    }\n    const program = selectedPrograms;\n    if (!orgUnit || !program) {\n      throw new Error('Organization unit and program are required');\n    }\n\n    // Use the DHIS2 data engine query format (same as useEventsData)\n    const EVENTS_QUERY = {\n      events: {\n        resource: 'tracker/events',\n        params: {\n          orgUnit,\n          program,\n          programStage: programStage !== ALL_VALUE ? programStage : undefined,\n          occurredAfter,\n          occurredBefore,\n          ouMode: inclusion || 'SELECTED',\n          includeDeleted: includeDeleted || false,\n          fields: 'event,status,occurredAt,createdAt,updatedAt,orgUnit,program,programStage,dataValues[dataElement,value]',\n          paging: false\n        }\n      },\n      orgUnits: {\n        resource: 'organisationUnits',\n        params: {\n          filter: `id:eq:${orgUnit}`,\n          fields: 'id,displayName,name'\n        }\n      },\n      programs: {\n        resource: 'programs',\n        params: {\n          filter: `id:eq:${program}`,\n          fields: 'id,name,displayName,programStages[id,name,displayName,programStageDataElements[dataElement[id,name,displayName]]]'\n        }\n      }\n    };\n    const data = await engine.query(EVENTS_QUERY);\n\n    // Transform the data\n    const transformedData = transformEventsData(data.events, data.orgUnits, data.programs);\n\n    // Convert to desired format and download\n    let output = '';\n    const headers = ['event', 'status', 'occurredAt', 'createdAt', 'updatedAt', 'project', 'program', 'Males', 'District', 'Females', 'Total Persons reached'];\n    if (format === 'csv') {\n      // CSV format\n      output = headers.join(',') + '\\n';\n      transformedData.forEach(row => {\n        const csvRow = headers.map(header => {\n          const value = row[header] || '';\n          return `\"${value.toString().replace(/\"/g, '\"\"')}\"`;\n        }).join(',');\n        output += csvRow + '\\n';\n      });\n    } else {\n      // JSON format\n      output = JSON.stringify(transformedData, null, 2);\n    }\n\n    // Create download\n    const blob = new Blob([output], {\n      type: format === 'csv' ? 'text/csv' : 'application/json'\n    });\n    const url = window.URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `events.${format}${compression ? `.${compression}` : ''}`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    window.URL.revokeObjectURL(url);\n    console.log('event-export:', {\n      transformedData,\n      format\n    });\n  } catch (error) {\n    console.error('Export failed:', error);\n    alert('Export failed: ' + error.message);\n  } finally {\n    setExportEnabled(true);\n  }\n};\nconst validate = values => ({\n  startDate: DATE_BEFORE_VALIDATOR(values.startDate, values.endDate),\n  endDate: DATE_AFTER_VALIDATOR(values.endDate, values.startDate)\n});\nexport { onExport, validate, transformEventsData };","import { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport React, { useState } from 'react';\nimport { Page, MoreOptions, BasicOptions, SchemeContainer, EventIcon, ValidationSummary } from '../../components/index.js';\nimport { OrgUnitTree, ProgramPicker, Format, defaultFormatOption, Compression, defaultCompressionOption, Dates, StartDate, EndDate, IncludeDeleted, Inclusion, defaultInclusionOption, ExportButton, ProgramStages, DataElementIdScheme, defaultDataElementIdSchemeOption, OrgUnitIdScheme, defaultOrgUnitIdSchemeOption, IdScheme, defaultIdSchemeOption, formatNoXmlOptions } from '../../components/Inputs/index.js';\nimport { jsDateToISO8601 } from '../../utils/helper.js';\nimport { onExport, validate } from './form-helper.js';\nconst {\n  Form\n} = ReactFinalForm;\n\n// PAGE INFO\nexport const PAGE_NAME = i18n.t('Event export');\nexport const PAGE_DESCRIPTION = i18n.t('Export event data for programs, stages and tracked entities to JSON or CSV format.');\nconst PAGE_ICON = /*#__PURE__*/React.createElement(EventIcon, null);\nconst today = new Date();\nconst threeMonthsBeforeToday = new Date(today.getFullYear(), today.getMonth() - 3, today.getDate());\nconst initialValues = {\n  selectedOrgUnits: [],\n  selectedPrograms: '',\n  programStage: undefined,\n  format: defaultFormatOption,\n  compression: defaultCompressionOption,\n  occurredAfter: jsDateToISO8601(threeMonthsBeforeToday),\n  occurredBefore: jsDateToISO8601(today),\n  includeDeleted: false,\n  dataElementIdScheme: defaultDataElementIdSchemeOption,\n  orgUnitIdScheme: defaultOrgUnitIdSchemeOption,\n  idScheme: defaultIdSchemeOption,\n  inclusion: defaultInclusionOption,\n  paging: false,\n  totalPages: false\n};\nconst EventExport = () => {\n  const [exportEnabled, setExportEnabled] = useState(true);\n  const engine = useDataEngine();\n  const onSubmit = onExport(engine, setExportEnabled);\n  return /*#__PURE__*/React.createElement(Page, {\n    title: PAGE_NAME,\n    desc: PAGE_DESCRIPTION,\n    icon: PAGE_ICON,\n    loading: !exportEnabled,\n    dataTest: \"page-export-data\"\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    initialValues: initialValues,\n    validate: validate,\n    subscription: {\n      values: true\n    },\n    render: ({\n      handleSubmit,\n      form,\n      values\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit\n    }, /*#__PURE__*/React.createElement(BasicOptions, null, /*#__PURE__*/React.createElement(OrgUnitTree, {\n      multiSelect: false\n    }), /*#__PURE__*/React.createElement(Inclusion, null), /*#__PURE__*/React.createElement(ProgramPicker, {\n      autoSelectFirst: true,\n      includeEvents: true\n    }), /*#__PURE__*/React.createElement(ProgramStages, {\n      selectedProgram: values.selectedPrograms,\n      form: form\n    }), /*#__PURE__*/React.createElement(Dates, {\n      label: i18n.t('Date range to export data for')\n    }, /*#__PURE__*/React.createElement(StartDate, {\n      name: \"occurredAfter\"\n    }), /*#__PURE__*/React.createElement(EndDate, {\n      name: \"occurredBefore\"\n    })), /*#__PURE__*/React.createElement(Format, {\n      availableFormats: formatNoXmlOptions\n    }), /*#__PURE__*/React.createElement(Compression, null)), /*#__PURE__*/React.createElement(MoreOptions, null, /*#__PURE__*/React.createElement(IncludeDeleted, null), /*#__PURE__*/React.createElement(SchemeContainer, null, /*#__PURE__*/React.createElement(DataElementIdScheme, null), /*#__PURE__*/React.createElement(OrgUnitIdScheme, null), /*#__PURE__*/React.createElement(IdScheme, null))), /*#__PURE__*/React.createElement(ValidationSummary, null), /*#__PURE__*/React.createElement(ExportButton, {\n      label: i18n.t('Export events'),\n      disabled: !exportEnabled\n    }))\n  }));\n};\nexport { EventExport };","import { FORM_ERROR, jobStartedMessage } from '../../utils/final-form.js';\nimport { uploadFile } from '../../utils/helper.js';\n\n// Validate a YYYYMMDD date is a real calendar date\nconst isValidDate = (yyyy, mm, dd) => {\n  const y = parseInt(yyyy, 10);\n  const m = parseInt(mm, 10);\n  const d = parseInt(dd, 10);\n  const date = new Date(y, m - 1, d);\n  return date.getFullYear() === y && date.getMonth() === m - 1 && date.getDate() === d;\n};\n\n// Function to convert period format to DHIS2 format\nconst parsePeriod = period => {\n  if (!period || typeof period !== 'string') {\n    return period;\n  }\n\n  // If already in YYYYMM or YYYYMMDD format, return as is\n  if (/^\\d{6}$/.test(period) || /^\\d{8}$/.test(period)) {\n    return period;\n  }\n  const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\n  // Handle M/D/YYYY or D/M/YYYY format (e.g., \"8/31/2023\" -> \"20230831\")\n  const slashDateMatch = period.match(/^(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})$/);\n  if (slashDateMatch) {\n    const [, first, second, year] = slashDateMatch;\n    let month, day;\n    if (parseInt(second) > 12) {\n      // second can't be a month, so first=month, second=day (M/D/YYYY)\n      month = first.padStart(2, '0');\n      day = second.padStart(2, '0');\n    } else if (parseInt(first) > 12) {\n      // first can't be a month, so first=day, second=month (D/M/YYYY)\n      day = first.padStart(2, '0');\n      month = second.padStart(2, '0');\n    } else {\n      // Ambiguous - assume M/D/YYYY (US format)\n      month = first.padStart(2, '0');\n      day = second.padStart(2, '0');\n    }\n    if (isValidDate(year, month, day)) {\n      return `${year}${month}${day}`;\n    }\n    // Invalid date (e.g. Nov 31)  fall back to monthly period\n    return `${year}${month}`;\n  }\n\n  // Handle \"Month Day, Year\" format (e.g., \"August 16, 2025\" -> \"20250816\")\n  const dayMatch = period.match(/^(\\w+)\\s+(\\d+),\\s+(\\d{4})$/);\n  if (dayMatch) {\n    const [, monthName, day, year] = dayMatch;\n    const monthIndex = monthNames.indexOf(monthName);\n    if (monthIndex !== -1) {\n      const month = (monthIndex + 1).toString().padStart(2, '0');\n      const paddedDay = day.padStart(2, '0');\n      return `${year}${month}${paddedDay}`;\n    }\n  }\n\n  // Handle \"Month Year\" format (e.g., \"July 2025\" -> \"202507\")\n  const monthMatch = period.match(/^(\\w+)\\s+(\\d{4})$/);\n  if (monthMatch) {\n    const [, monthName, year] = monthMatch;\n    const monthIndex = monthNames.indexOf(monthName);\n    if (monthIndex !== -1) {\n      const month = (monthIndex + 1).toString().padStart(2, '0');\n      return `${year}${month}`;\n    }\n  }\n  const monthNames3 = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\n  // Handle \"Mon-YY\" format (e.g., \"Jul-25\" -> \"202507\")\n  const monYYMatch = period.match(/^([A-Za-z]{3})-(\\d{2})$/);\n  if (monYYMatch) {\n    const [, monthName, yearShort] = monYYMatch;\n    const monthIndex = monthNames3.indexOf(monthName);\n    if (monthIndex !== -1) {\n      const month = (monthIndex + 1).toString().padStart(2, '0');\n      const year = `20${yearShort}`;\n      return `${year}${month}`;\n    }\n  }\n\n  // Handle \"DD-Mon-YY\" format (e.g., \"19-Aug-25\" -> \"20250819\")\n  const ddMonYYMatch = period.match(/^(\\d{1,2})-([A-Za-z]{3})-(\\d{2})$/);\n  if (ddMonYYMatch) {\n    const [, day, monthName, yearShort] = ddMonYYMatch;\n    const monthIndex = monthNames3.indexOf(monthName);\n    if (monthIndex !== -1) {\n      const month = (monthIndex + 1).toString().padStart(2, '0');\n      const paddedDay = day.padStart(2, '0');\n      const year = `20${yearShort}`;\n      return `${year}${month}${paddedDay}`;\n    }\n  }\n\n  // Unable to parse period format, using as-is\n  return period;\n};\n\n// Parse CSV line respecting quotes\nconst parseCSVLine = line => {\n  const result = [];\n  let current = '';\n  let inQuotes = false;\n  for (let i = 0; i < line.length; i++) {\n    const char = line[i];\n    if (char === '\"') {\n      if (inQuotes && line[i + 1] === '\"') {\n        current += '\"';\n        i++;\n      } else {\n        inQuotes = !inQuotes;\n      }\n    } else if (char === ',' && !inQuotes) {\n      result.push(current.trim());\n      current = '';\n    } else {\n      current += char;\n    }\n  }\n  result.push(current.trim());\n  return result;\n};\n\n// Function to transform data from human-readable format back to DHIS2 format\nconst transformImportData = async (fileData, format, baseUrl, {\n  programmeArea,\n  period\n} = {}) => {\n  let dataRows = [];\n  let isCustomFormat = false;\n  if (format === 'json') {\n    try {\n      const jsonData = JSON.parse(fileData);\n\n      // Check if it's an array of our custom format objects\n      if (Array.isArray(jsonData) && jsonData.length > 0) {\n        const expectedHeaders = ['dataElement', 'period', 'program', 'value', 'storedBy', 'lastUpdated'];\n        const firstItem = jsonData[0];\n        isCustomFormat = expectedHeaders.every(header => header in firstItem);\n        if (isCustomFormat) {\n          dataRows = jsonData;\n        }\n      }\n      if (!isCustomFormat) {\n        // If not our custom format, return original data\n        return fileData;\n      }\n    } catch (error) {\n      // Error parsing JSON\n      return fileData;\n    }\n  } else if (format === 'csv') {\n    const lines = fileData.split('\\n').filter(line => line.trim());\n    if (lines.length < 2) {\n      throw new Error('CSV file must contain headers and at least one data row');\n    }\n    const headers = parseCSVLine(lines[0]);\n    const expectedHeaders = ['dataElement', 'period', 'program', 'value', 'storedBy', 'lastUpdated'];\n\n    // Check if this is our custom format OR the new pivot format\n    const isPivotFormat = headers[0] === 'Period' && headers.includes('Program');\n    isCustomFormat = expectedHeaders.every(header => headers.includes(header)) || isPivotFormat;\n    if (!isCustomFormat) {\n      // Generic CSV: column headers are data element names\n      // A DATE column provides per-row period values\n      // User provides org unit from the UI via ProjectHierarchy\n      if (!programmeArea) {\n        return fileData;\n      }\n\n      // Detect DATE column (case-insensitive)\n      const dateColIndex = headers.findIndex(h => h.trim().toUpperCase() === 'DATE');\n      // Non-data-element metadata columns to skip\n      const skipColumns = new Set();\n      if (dateColIndex !== -1) skipColumns.add(dateColIndex);\n\n      // Use a fallback period from the UI if no DATE column\n      const fallbackPeriod = period ? parsePeriod(period) : null;\n      if (dateColIndex === -1 && !fallbackPeriod) {\n        return fileData;\n      }\n\n      // Fetch all data elements to build name->ID map\n      const deUrl = `${baseUrl}/api/dataElements.json?fields=id,displayName,name,valueType,aggregationType,categoryCombo[id,categoryOptionCombos[id]]&paging=false`;\n      let dataElementsList = [];\n      try {\n        const resp = await fetch(deUrl, {\n          credentials: 'include'\n        });\n        const data = await resp.json();\n        dataElementsList = data.dataElements || [];\n      } catch (e) {\n        dataElementsList = [];\n      }\n      const deNameToObj = {};\n      dataElementsList.forEach(de => {\n        const displayName = de.displayName || de.name;\n        deNameToObj[displayName] = de;\n        deNameToObj[displayName.toLowerCase()] = de;\n        deNameToObj[de.name] = de;\n        deNameToObj[de.name.toLowerCase()] = de;\n      });\n\n      // Fetch default category option combo\n      let defaultCoc = 'HllvX50cXC0';\n      try {\n        var _cocData$categoryOpti;\n        const cocResp = await fetch(`${baseUrl}/api/categoryOptionCombos.json?filter=name:eq:default&fields=id&paging=false`, {\n          credentials: 'include'\n        });\n        const cocData = await cocResp.json();\n        if (((_cocData$categoryOpti = cocData.categoryOptionCombos) === null || _cocData$categoryOpti === void 0 ? void 0 : _cocData$categoryOpti.length) > 0) {\n          defaultCoc = cocData.categoryOptionCombos[0].id;\n        }\n      } catch (e) {/* use fallback */}\n\n      // Identify data element columns (all columns except DATE)\n      const dataHeaders = headers.filter((_, i) => !skipColumns.has(i));\n\n      // Pre-scan columns to detect which contain non-numeric data\n      const parsedLines = lines.slice(1).filter(l => l.trim()).map(l => parseCSVLine(l));\n      const columnHasText = {};\n      dataHeaders.forEach(header => {\n        const colIdx = headers.indexOf(header);\n        columnHasText[header] = parsedLines.some(vals => {\n          const v = (vals[colIdx] || '').trim();\n          return v !== '' && isNaN(v);\n        });\n      });\n\n      // Update existing data elements from NUMBER to TEXT if the column has text values\n      for (const header of dataHeaders) {\n        if (!columnHasText[header]) continue;\n        const de = deNameToObj[header] || deNameToObj[header.toLowerCase()];\n        if (!de || de.valueType === 'TEXT') continue;\n        try {\n          // Fetch full data element object for PUT update\n          const fullResp = await fetch(`${baseUrl}/api/dataElements/${de.id}.json`, {\n            credentials: 'include'\n          });\n          if (fullResp.ok) {\n            const fullDe = await fullResp.json();\n            fullDe.valueType = 'TEXT';\n            fullDe.aggregationType = 'NONE';\n            await fetch(`${baseUrl}/api/dataElements/${de.id}`, {\n              method: 'PUT',\n              credentials: 'include',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(fullDe)\n            });\n            de.valueType = 'TEXT';\n          }\n        } catch (e) {/* best effort */}\n      }\n\n      // For headers not found, create new data elements\n      const missingHeaders = dataHeaders.filter(h => !deNameToObj[h] && !deNameToObj[h.toLowerCase()]);\n      for (const headerName of missingHeaders) {\n        try {\n          var _ccData$categoryCombo;\n          let defaultCatComboId = null;\n          const ccResp = await fetch(`${baseUrl}/api/categoryCombos.json?filter=name:eq:default&fields=id&paging=false`, {\n            credentials: 'include'\n          });\n          const ccData = await ccResp.json();\n          if (((_ccData$categoryCombo = ccData.categoryCombos) === null || _ccData$categoryCombo === void 0 ? void 0 : _ccData$categoryCombo.length) > 0) {\n            defaultCatComboId = ccData.categoryCombos[0].id;\n          }\n          const hasText = columnHasText[headerName];\n          const newDe = {\n            name: headerName,\n            shortName: headerName.substring(0, 50),\n            domainType: 'AGGREGATE',\n            valueType: hasText ? 'TEXT' : 'NUMBER',\n            aggregationType: hasText ? 'NONE' : 'SUM',\n            categoryCombo: defaultCatComboId ? {\n              id: defaultCatComboId\n            } : undefined\n          };\n          const createResp = await fetch(`${baseUrl}/api/dataElements`, {\n            method: 'POST',\n            credentials: 'include',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(newDe)\n          });\n          if (createResp.ok) {\n            var _createData$response, _createData$response2;\n            const createData = await createResp.json();\n            const createdId = ((_createData$response = createData.response) === null || _createData$response === void 0 ? void 0 : _createData$response.uid) || ((_createData$response2 = createData.response) === null || _createData$response2 === void 0 ? void 0 : _createData$response2.lastImported);\n            if (createdId) {\n              const fetchResp = await fetch(`${baseUrl}/api/dataElements/${createdId}.json?fields=id,displayName,name,categoryCombo[id,categoryOptionCombos[id]]`, {\n                credentials: 'include'\n              });\n              if (fetchResp.ok) {\n                const fullDe = await fetchResp.json();\n                deNameToObj[headerName] = fullDe;\n                deNameToObj[headerName.toLowerCase()] = fullDe;\n              }\n            }\n          }\n        } catch (e) {\n          // Skip headers we can't create\n        }\n      }\n\n      // Aggregate values by dataElement+period+orgUnit key\n      // Sum numeric values, concatenate text values with semicolons\n      const aggregated = {}; // key -> { deId, period, coc, values: [] }\n\n      lines.slice(1).forEach(line => {\n        if (!line.trim()) return;\n        const values = parseCSVLine(line);\n        const rowPeriod = dateColIndex !== -1 ? parsePeriod(values[dateColIndex]) : fallbackPeriod;\n        if (!rowPeriod) return;\n        dataHeaders.forEach(colHeader => {\n          var _de$categoryCombo, _de$categoryCombo$cat, _de$categoryCombo$cat2;\n          const colIndex = headers.indexOf(colHeader);\n          const cellValue = (values[colIndex] || '').trim();\n          if (!cellValue) return;\n          const de = deNameToObj[colHeader] || deNameToObj[colHeader.toLowerCase()];\n          if (!de) return;\n          const coc = ((_de$categoryCombo = de.categoryCombo) === null || _de$categoryCombo === void 0 ? void 0 : (_de$categoryCombo$cat = _de$categoryCombo.categoryOptionCombos) === null || _de$categoryCombo$cat === void 0 ? void 0 : (_de$categoryCombo$cat2 = _de$categoryCombo$cat[0]) === null || _de$categoryCombo$cat2 === void 0 ? void 0 : _de$categoryCombo$cat2.id) || defaultCoc;\n          const key = `${de.id}_${rowPeriod}_${programmeArea}_${coc}`;\n          if (!aggregated[key]) {\n            aggregated[key] = {\n              deId: de.id,\n              period: rowPeriod,\n              coc,\n              values: []\n            };\n          }\n          aggregated[key].values.push(cellValue);\n        });\n      });\n\n      // Build DHIS2 CSV rows from aggregated data\n      const dhis2Headers = ['dataElement', 'period', 'orgUnit', 'categoryOptionCombo', 'attributeOptionCombo', 'value', 'storedBy', 'lastUpdated', 'comment', 'followup'];\n      const csvRows = [];\n      Object.values(aggregated).forEach(({\n        deId,\n        period: p,\n        coc,\n        values: vals\n      }) => {\n        // Check if all values are numeric\n        const allNumeric = vals.every(v => !isNaN(v) && v !== '');\n        let finalValue;\n        if (allNumeric) {\n          finalValue = vals.reduce((sum, v) => sum + parseFloat(v), 0);\n        } else {\n          // Deduplicate text values, then join with semicolons\n          finalValue = [...new Set(vals)].join('; ');\n        }\n\n        // Quote value if it contains commas, semicolons, or quotes\n        const escapedValue = typeof finalValue === 'string' && /[,;\"'\\n]/.test(finalValue) ? `\"${finalValue.replace(/\"/g, '\"\"')}\"` : finalValue;\n        csvRows.push([deId, p, programmeArea, coc, defaultCoc, escapedValue, 'import', new Date().toISOString(), '', 'false'].join(','));\n      });\n      if (csvRows.length === 0) {\n        throw new Error('No data values could be mapped from the CSV. Check that column headers match data element names.');\n      }\n      return dhis2Headers.join(',') + '\\n' + csvRows.join('\\n');\n    }\n    if (isPivotFormat) {\n      // Initialize metadata\n      const metadata = {\n        dataElements: {},\n        orgUnits: {}\n      };\n\n      // Collect unique program names from CSV\n      const programNames = [];\n      lines.slice(1).forEach(line => {\n        if (!line.trim()) {\n          return;\n        }\n        const values = parseCSVLine(line);\n        const programIndex = headers.indexOf('Program');\n        if (programIndex !== -1 && values[programIndex]) {\n          programNames.push(values[programIndex]);\n        }\n      });\n\n      // If no Program column or no program values, use a default org unit\n      if (programNames.length === 0) {\n        // Fetch the root org unit or first available org unit as fallback\n        try {\n          const orgUnitUrl = `${baseUrl}/api/organisationUnits.json?level=1&fields=id,name&paging=false`;\n          const response = await fetch(orgUnitUrl, {\n            credentials: 'include'\n          });\n          const data = await response.json();\n          if (data.organisationUnits && data.organisationUnits.length > 0) {\n            const defaultOrgUnit = data.organisationUnits[0];\n            metadata.orgUnits['default'] = defaultOrgUnit.id;\n          }\n        } catch (e) {\n          // Error fetching default org unit\n        }\n      } else {\n        // Fetch organization units by names from CSV 'program' field\n        for (const orgUnitName of [...new Set(programNames)]) {\n          const orgUnitUrl = `${baseUrl}/api/organisationUnits.json?filter=name:eq:${encodeURIComponent(orgUnitName)}&fields=id,name`;\n          try {\n            const response = await fetch(orgUnitUrl, {\n              credentials: 'include'\n            });\n            const data = await response.json();\n            if (data.organisationUnits && data.organisationUnits.length > 0) {\n              const orgUnit = data.organisationUnits[0];\n              metadata.orgUnits[orgUnitName] = orgUnit.id;\n            } else {/* empty */}\n          } catch (e) {\n            // Error fetching org unit\n          }\n        }\n      }\n\n      // Fetch ALL data elements\n      const dataElementUrl = `${baseUrl}/api/dataElements.json?fields=id,displayName,name,categoryCombo[id,categoryOptionCombos[id]]&paging=false`;\n      try {\n        const response = await fetch(dataElementUrl, {\n          credentials: 'include'\n        });\n        const data = await response.json();\n        if (data.dataElements) {\n          metadata.dataElementsList = data.dataElements;\n        } else {\n          metadata.dataElementsList = [];\n        }\n      } catch (e) {\n        // Error fetching data elements\n        metadata.dataElementsList = [];\n      }\n\n      // Fetch default category option combo\n      const defaultComboUrl = `${baseUrl}/api/categoryOptionCombos.json?filter=name:eq:default&fields=id&paging=false`;\n      try {\n        const response = await fetch(defaultComboUrl, {\n          credentials: 'include'\n        });\n        const data = await response.json();\n        if (data.categoryOptionCombos && data.categoryOptionCombos.length > 0) {\n          metadata.defaultAttributeOptionCombo = data.categoryOptionCombos[0].id;\n        }\n      } catch (e) {\n        // Error fetching default category option combo\n      }\n\n      // Build lookup maps for data elements\n      const dataElementNameToId = {};\n      if (metadata.dataElementsList) {\n        metadata.dataElementsList.forEach(de => {\n          const displayName = de.displayName || de.name;\n          const name = de.name;\n\n          // Map various forms of the name\n          dataElementNameToId[displayName] = de.id;\n          dataElementNameToId[name] = de.id;\n          dataElementNameToId[displayName.toLowerCase()] = de.id;\n          dataElementNameToId[name.toLowerCase()] = de.id;\n\n          // Also map by the actual column headers that might be dates\n          // This is important for matching date columns like \"01/06/2024\"\n          if (name.match(/^\\d{2}\\/\\d{2}\\/\\d{4}$/)) {\n            dataElementNameToId[name] = de.id;\n          }\n        });\n      }\n      const periodIndex = headers.indexOf('Period');\n      const programIndex = headers.indexOf('Program');\n      const storedByIndex = headers.indexOf('StoredBy');\n      const lastUpdatedIndex = headers.indexOf('LastUpdated');\n\n      // Find data element columns (excluding metadata columns)\n      const metadataColumns = ['Period', 'Program', 'StoredBy', 'LastUpdated'];\n      const dataElementColumns = headers.filter(h => !metadataColumns.includes(h));\n      dataRows = [];\n\n      // Process each data row\n      lines.slice(1).forEach(line => {\n        if (!line.trim()) {\n          return;\n        }\n        const values = parseCSVLine(line);\n        const rowPeriod = values[periodIndex];\n        const programName = programIndex !== -1 ? values[programIndex] || '' : '';\n        const storedBy = storedByIndex !== -1 ? values[storedByIndex] || 'import' : 'import';\n        const lastUpdated = lastUpdatedIndex !== -1 ? values[lastUpdatedIndex] || new Date().toISOString() : new Date().toISOString();\n\n        // Map program name to org unit ID, use default if not found\n        const orgUnitId = metadata.orgUnits[programName] || metadata.orgUnits['default'] || Object.values(metadata.orgUnits)[0];\n\n        // Create rows for each data element column that has a value\n        dataElementColumns.forEach(columnHeader => {\n          const columnIndex = headers.indexOf(columnHeader);\n          const value = values[columnIndex];\n          if (value && value.trim() !== '' && value !== '0') {\n            var _columnHeader$toLower;\n            // Map column header to data element ID\n            const dataElementId = dataElementNameToId[columnHeader] || dataElementNameToId[columnHeader === null || columnHeader === void 0 ? void 0 : columnHeader.toLowerCase()] || dataElementNameToId[columnHeader === null || columnHeader === void 0 ? void 0 : (_columnHeader$toLower = columnHeader.toLowerCase()) === null || _columnHeader$toLower === void 0 ? void 0 : _columnHeader$toLower.trim()];\n            if (!dataElementId) {\n              return;\n            }\n\n            // Parse the period to DHIS2 format\n            const finalPeriod = parsePeriod(rowPeriod) || rowPeriod;\n            dataRows.push({\n              dataElementId: dataElementId,\n              period: finalPeriod,\n              orgUnitId: orgUnitId,\n              value: value,\n              storedBy: storedBy,\n              lastUpdated: lastUpdated\n            });\n          }\n        });\n      });\n\n      // Validate data before creating CSV\n      const validationErrors = [];\n      dataRows.forEach((row, index) => {\n        if (!row.dataElementId) {\n          validationErrors.push(`Row ${index + 1}: Missing data element ID`);\n        }\n        if (!row.period) {\n          validationErrors.push(`Row ${index + 1}: Missing period`);\n        }\n        if (!row.orgUnitId) {\n          validationErrors.push(`Row ${index + 1}: Missing org unit ID`);\n        }\n        if (!row.value) {\n          validationErrors.push(`Row ${index + 1}: Missing value`);\n        }\n\n        // Validate period format\n        if (row.period && !/^\\d{6}$/.test(row.period) && !/^\\d{8}$/.test(row.period)) {\n          validationErrors.push(`Row ${index + 1}: Invalid period format \"${row.period}\". Expected YYYYMM or YYYYMMDD`);\n        }\n      });\n      if (validationErrors.length > 0) {\n        throw new Error(`Data validation failed: ${validationErrors.slice(0, 5).join('; ')}${validationErrors.length > 5 ? ` and ${validationErrors.length - 5} more errors` : ''}`);\n      }\n\n      // Create DHIS2 format CSV with actual IDs\n      const defaultAttributeOptionCombo = metadata.defaultAttributeOptionCombo || 'HllvX50cXC0';\n      const dhis2Headers = ['dataElement', 'period', 'orgUnit', 'categoryOptionCombo', 'attributeOptionCombo', 'value', 'storedBy', 'lastUpdated', 'comment', 'followup'];\n      const dhis2Csv = dhis2Headers.join(',') + '\\n' + dataRows.map(row => {\n        var _metadata$dataElement, _dataElement$category, _dataElement$category2, _dataElement$category3;\n        // Get category option combo for this data element\n        const dataElement = (_metadata$dataElement = metadata.dataElementsList) === null || _metadata$dataElement === void 0 ? void 0 : _metadata$dataElement.find(de => de.id === row.dataElementId);\n        const categoryOptionCombo = (dataElement === null || dataElement === void 0 ? void 0 : (_dataElement$category = dataElement.categoryCombo) === null || _dataElement$category === void 0 ? void 0 : (_dataElement$category2 = _dataElement$category.categoryOptionCombos) === null || _dataElement$category2 === void 0 ? void 0 : (_dataElement$category3 = _dataElement$category2[0]) === null || _dataElement$category3 === void 0 ? void 0 : _dataElement$category3.id) || defaultAttributeOptionCombo;\n        return [row.dataElementId, row.period, row.orgUnitId, categoryOptionCombo, defaultAttributeOptionCombo, row.value, row.storedBy, row.lastUpdated, '',\n        // comment\n        'false' // followup\n        ].join(',');\n      }).join('\\n');\n      return dhis2Csv;\n    } else {\n      // Parse regular CSV data (non-pivot format)\n      dataRows = lines.slice(1).map(line => {\n        const values = parseCSVLine(line);\n        const row = {};\n        headers.forEach((header, index) => {\n          row[header] = values[index] || '';\n        });\n        return row;\n      });\n    }\n  } else {\n    // For other formats, return original data\n    return fileData;\n  }\n\n  // If we have dataRows but haven't returned yet, we need to convert them\n  // This handles the regular custom format case\n  if (dataRows.length > 0) {\n    // Convert to DHIS2 CSV format\n    const dhis2Headers = ['dataElement', 'period', 'orgUnit', 'categoryOptionCombo', 'attributeOptionCombo', 'value', 'storedBy', 'lastUpdated', 'comment', 'followup'];\n    const dhis2Csv = dhis2Headers.join(',') + '\\n' + dataRows.map(row => {\n      return [row.dataElement || row.dataElementId, parsePeriod(row.period), row.program || row.orgUnitId, 'HllvX50cXC0',\n      // default category option combo\n      'HllvX50cXC0',\n      // default attribute option combo\n      row.value, row.storedBy || 'import', row.lastUpdated || new Date().toISOString(), '',\n      // comment\n      'false' // followup\n      ].join(',');\n    }).join('\\n');\n    return dhis2Csv;\n  }\n  return fileData;\n};\nconst isAsync = false;\nconst onImport = ({\n  baseUrl,\n  setProgress,\n  addTask,\n  setShowFullSummaryTask\n}) => async values => {\n  const {\n    dryRun,\n    files,\n    strategy,\n    preheatCache,\n    skipAudit,\n    dataElementIdScheme,\n    orgUnitIdScheme,\n    idScheme,\n    skipExistingCheck,\n    format,\n    firstRowIsHeader,\n    programmeArea,\n    period\n  } = values;\n\n  // Build API URL\n  const apiBaseUrl = `${baseUrl}/api/`;\n  const endpoint = 'dataValueSets';\n  const params = [`async=${isAsync}`, `dryRun=${dryRun}`, `strategy=${strategy}`, `preheatCache=${preheatCache}`, `skipAudit=${skipAudit}`, `dataElementIdScheme=${dataElementIdScheme}`, `orgUnitIdScheme=${orgUnitIdScheme}`, `idScheme=${idScheme}`, `skipExistingCheck=${skipExistingCheck}`, format == 'csv' ? `firstRowIsHeader=${firstRowIsHeader}` : ''].filter(s => s != '').join('&');\n  const url = `${apiBaseUrl}${endpoint}?${params}`;\n\n  // Get the original file\n  const originalFile = files[0];\n  let fileToUpload = originalFile;\n  try {\n    // Read the file content\n    const fileContent = await new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = e => resolve(e.target.result);\n      reader.onerror = reject;\n      reader.readAsText(originalFile);\n    });\n\n    // Transform the data\n    const transformedData = await transformImportData(fileContent, format, baseUrl, {\n      programmeArea,\n      period\n    });\n\n    // Check if transformation actually happened\n    if (transformedData !== fileContent) {\n      // Create a new Blob with the transformed data\n      const blob = new Blob([transformedData], {\n        type: 'application/csv'\n      });\n\n      // Create a new File object from the Blob\n      // Important: Keep the same name but ensure it's recognized as CSV\n      const fileName = originalFile.name.endsWith('.csv') ? originalFile.name : `${originalFile.name}.csv`;\n      fileToUpload = new File([blob], fileName, {\n        type: 'application/csv',\n        lastModified: Date.now()\n      });\n    }\n  } catch (error) {\n    // If transformation fails, ensure we still have the original file\n    fileToUpload = originalFile;\n  }\n\n  // Upload the file (either transformed or original)\n  try {\n    if (!fileToUpload) {\n      throw new Error('No file available for upload');\n    }\n    await uploadFile({\n      url,\n      file: fileToUpload,\n      format: format,\n      type: 'DATAVALUE_IMPORT',\n      isAsync: isAsync,\n      setProgress,\n      addEntry: (id, entry) => addTask('data', id, {\n        ...entry,\n        jobDetails: values\n      })\n    });\n    return jobStartedMessage;\n  } catch (e) {\n    // Upload failed\n    const errors = [e];\n    return {\n      [FORM_ERROR]: errors\n    };\n  } finally {\n    setShowFullSummaryTask(true);\n  }\n};\nexport { onImport };","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport React, { useContext, useState, useEffect, useCallback } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Page, WithAuthority, BasicOptions, MoreOptions, SchemeContainer, DataIcon, ValidationSummary, ImportProgress, PHASE_UPLOAD, PHASE_PROCESSING, PHASE_COMPLETE } from '../../components/index.js';\nimport { FileUpload, Format, formatAdxPdfOptions, defaultFormatOption, FirstRowIsHeader, defaultFirstRowIsHeaderOption, Strategy, defaultStrategyOption, PreheatCache, defaultPreheatCacheOption, SkipAudit, defaultSkipAuditOption, SkipExistingCheck, defaultSkipExistingCheckOption, DataElementIdScheme, defaultDataElementIdSchemeOption, IdScheme, defaultIdSchemeOption, OrgUnitIdScheme, defaultOrgUnitIdSchemeOption, ImportButtonStrip, FormAlerts, ProjectHierarchy, defaultThematicArea, defaultProgrammeArea, defaultProjectArea } from '../../components/Inputs/index.js';\nimport { hasAuthorityToSkipAudit } from '../../components/WithAuthority/predicates.js';\nimport { TaskContext, getNewestTask } from '../../contexts/index.js';\nimport { getPrevJobDetails, getInitialBoolValue } from '../../utils/helper.js';\nimport { onImport } from './form-helper.js';\nconst {\n  Form,\n  FormSpy\n} = ReactFinalForm;\n\n// PAGE INFO\nexport const PAGE_NAME = i18n.t('Data import');\nexport const PAGE_DESCRIPTION = i18n.t('Import data values using JSON, CSV, DXF2, ADX, or PDF format.');\nconst PAGE_ICON = /*#__PURE__*/React.createElement(DataIcon, null);\nconst createInitialValues = prevJobDetails => ({\n  files: prevJobDetails.files,\n  format: prevJobDetails.format || defaultFormatOption,\n  strategy: prevJobDetails.strategy || defaultStrategyOption,\n  firstRowIsHeader: getInitialBoolValue(prevJobDetails.firstRowIsHeader, defaultFirstRowIsHeaderOption),\n  preheatCache: getInitialBoolValue(prevJobDetails.preheatCache, defaultPreheatCacheOption),\n  skipAudit: getInitialBoolValue(prevJobDetails.skipAudit, defaultSkipAuditOption),\n  dataElementIdScheme: prevJobDetails.dataElementIdScheme || defaultDataElementIdSchemeOption,\n  orgUnitIdScheme: prevJobDetails.orgUnitIdScheme || defaultOrgUnitIdSchemeOption,\n  idScheme: prevJobDetails.idScheme || defaultIdSchemeOption,\n  skipExistingCheck: getInitialBoolValue(prevJobDetails.skipExistingCheck, defaultSkipExistingCheckOption),\n  thematicArea: prevJobDetails.thematicArea || defaultThematicArea,\n  programmeArea: prevJobDetails.programmeArea || defaultProgrammeArea,\n  projectArea: prevJobDetails.projectArea || defaultProjectArea\n});\nconst DataImport = () => {\n  const {\n    tasks: {\n      data: dataTasks\n    },\n    addTask\n  } = useContext(TaskContext);\n\n  // recreating a previously run job\n  const query = useLocation().query;\n  const prevJobDetails = getPrevJobDetails(query, dataTasks);\n  const initialValues = createInitialValues(prevJobDetails);\n  const [progress, setProgress] = useState(0);\n  const [showFullSummaryTask, setShowFullSummaryTask] = useState(false);\n  const [progressPhase, setProgressPhase] = useState(PHASE_UPLOAD);\n  const [progressMessage, setProgressMessage] = useState('');\n  const [currentTaskId, setCurrentTaskId] = useState(null);\n  const [showProgressModal, setShowProgressModal] = useState(false);\n  const {\n    baseUrl\n  } = useConfig();\n\n  // Get the current task being tracked\n  const currentTask = currentTaskId ? dataTasks[currentTaskId] : null;\n\n  // Track task completion and update phase accordingly\n  useEffect(() => {\n    if (currentTask) {\n      var _currentTask$events;\n      if (currentTask.completed) {\n        setProgressPhase(PHASE_COMPLETE);\n        // Auto-hide modal after completion (with delay)\n        const timer = setTimeout(() => {\n          setShowProgressModal(false);\n          setCurrentTaskId(null);\n          setProgressPhase(PHASE_UPLOAD);\n          setProgressMessage('');\n        }, 2000);\n        return () => clearTimeout(timer);\n      } else if (progress === 0 && ((_currentTask$events = currentTask.events) === null || _currentTask$events === void 0 ? void 0 : _currentTask$events.length) > 0) {\n        // Upload done, now processing\n        setProgressPhase(PHASE_PROCESSING);\n      }\n    }\n  }, [currentTask, progress]);\n\n  // Enhanced setProgress that shows the modal\n  const setProgressWithModal = useCallback(value => {\n    setProgress(value);\n    if (value > 0) {\n      setShowProgressModal(true);\n      setProgressPhase(PHASE_UPLOAD);\n      setProgressMessage(i18n.t('Uploading file...'));\n    }\n  }, []);\n\n  // Enhanced addTask that tracks the current task ID\n  const addTaskWithTracking = useCallback((type, id, entry) => {\n    setCurrentTaskId(id);\n    setProgressPhase(PHASE_PROCESSING);\n    setProgressMessage(i18n.t('Processing import on server...'));\n    addTask(type, id, entry);\n  }, [addTask]);\n  const onSubmit = onImport({\n    baseUrl,\n    setProgress: setProgressWithModal,\n    addTask: addTaskWithTracking,\n    setShowFullSummaryTask\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ImportProgress, {\n    visible: showProgressModal,\n    progress: progress,\n    phase: progressPhase,\n    message: progressMessage,\n    task: currentTask\n  }), /*#__PURE__*/React.createElement(Page, {\n    title: PAGE_NAME,\n    desc: PAGE_DESCRIPTION,\n    icon: PAGE_ICON,\n    dataTest: \"page-import-data\",\n    summaryTask: getNewestTask(dataTasks),\n    showFullSummaryTask: showFullSummaryTask\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    initialValues: initialValues,\n    subscription: {\n      values: true,\n      submitError: true\n    },\n    render: ({\n      handleSubmit,\n      form,\n      values,\n      submitError\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit\n    }, /*#__PURE__*/React.createElement(BasicOptions, null, /*#__PURE__*/React.createElement(FileUpload, {\n      helpText: i18n.t('Supported file types: JSON, CSV, DXF2, ADX, and PDF.', {\n        nsSeparator: '>'\n      })\n    }), /*#__PURE__*/React.createElement(Format, {\n      availableFormats: formatAdxPdfOptions,\n      type: \"import\"\n    }), /*#__PURE__*/React.createElement(FirstRowIsHeader, {\n      show: values.format == 'csv'\n    }), /*#__PURE__*/React.createElement(FormSpy, {\n      subscription: {\n        values: true\n      }\n    }, ({\n      values: spyValues\n    }) => spyValues.format === 'csv' ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ProjectHierarchy, {\n      show: true\n    })) : null), /*#__PURE__*/React.createElement(Strategy, {\n      value: values.strategy\n    }), /*#__PURE__*/React.createElement(PreheatCache, null), /*#__PURE__*/React.createElement(WithAuthority, {\n      pred: hasAuthorityToSkipAudit\n    }, /*#__PURE__*/React.createElement(SkipAudit, null))), /*#__PURE__*/React.createElement(MoreOptions, null, /*#__PURE__*/React.createElement(SchemeContainer, null, /*#__PURE__*/React.createElement(DataElementIdScheme, null), /*#__PURE__*/React.createElement(OrgUnitIdScheme, null), /*#__PURE__*/React.createElement(IdScheme, null)), /*#__PURE__*/React.createElement(SkipExistingCheck, null)), /*#__PURE__*/React.createElement(ValidationSummary, null), /*#__PURE__*/React.createElement(ImportButtonStrip, {\n      form: form\n    }), /*#__PURE__*/React.createElement(FormAlerts, {\n      alerts: submitError\n    }))\n  })));\n};\nexport { DataImport };","// import { useDataEngine } from '@dhis2/app-runtime'\nimport { DATE_BEFORE_VALIDATOR, DATE_AFTER_VALIDATOR } from '../../components/DatePicker/DatePickerField.js';\nimport {\n// locationAssign,\n// compressionToName,\nfileFormatToFileExtension, pathToId } from '../../utils/helper.js';\n\n// Function to convert period format to a standardized readable format\nconst formatPeriod = period => {\n  if (!period) {\n    return period;\n  }\n\n  // Handle YYYYMMDD format (8 digits)\n  if (period.length === 8 && /^\\d{8}$/.test(period)) {\n    const year = period.substring(0, 4);\n    const month = period.substring(4, 6);\n    const day = period.substring(6, 8);\n    const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n    const monthIndex = parseInt(month, 10) - 1;\n    if (monthIndex >= 0 && monthIndex < 12) {\n      return `${monthNames[monthIndex]} ${parseInt(day, 10)}, ${year}`;\n    }\n  }\n\n  // Handle YYYYMM format (6 digits)\n  if (period.length === 6 && /^\\d{6}$/.test(period)) {\n    const year = period.substring(0, 4);\n    const month = period.substring(4, 6);\n    const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n    const monthIndex = parseInt(month, 10) - 1;\n    if (monthIndex >= 0 && monthIndex < 12) {\n      return `${monthNames[monthIndex]} ${year}`;\n    }\n  }\n  return period;\n};\n\n// Function to transform data values into pivot table format\nconst transformDataValuesToPivot = (dataValues, dataElementsLookup, orgUnitsLookup) => {\n  if (!dataValues || !Array.isArray(dataValues)) {\n    return {\n      pivotData: [],\n      dataElements: [],\n      periods: []\n    };\n  }\n\n  // Create maps to store data: period -> dataElement -> {value, storedBy, lastUpdated, orgUnit}\n  const dataMap = new Map();\n  const dataElementsSet = new Set();\n  const periodsSet = new Set();\n\n  // Process each data value\n  dataValues.forEach(dataValue => {\n    const dataElementName = dataElementsLookup[dataValue.dataElement] || dataValue.dataElement;\n    const formattedPeriod = formatPeriod(dataValue.period);\n    const orgUnitName = orgUnitsLookup[dataValue.orgUnit] || dataValue.orgUnit;\n    dataElementsSet.add(dataElementName);\n    periodsSet.add(formattedPeriod);\n    if (!dataMap.has(formattedPeriod)) {\n      dataMap.set(formattedPeriod, new Map());\n    }\n    dataMap.get(formattedPeriod).set(dataElementName, {\n      value: dataValue.value,\n      storedBy: dataValue.storedBy,\n      lastUpdated: dataValue.lastUpdated,\n      program: orgUnitName\n    });\n  });\n\n  // Convert sets to sorted arrays\n  const dataElements = Array.from(dataElementsSet).sort();\n  const periods = Array.from(periodsSet).sort();\n\n  // Create pivot table data with metadata columns\n  const pivotData = periods.map(period => {\n    const periodMap = dataMap.get(period);\n    const firstDataEntry = periodMap ? Array.from(periodMap.values())[0] : null;\n    const row = {\n      Period: period,\n      Program: (firstDataEntry === null || firstDataEntry === void 0 ? void 0 : firstDataEntry.program) || '',\n      StoredBy: (firstDataEntry === null || firstDataEntry === void 0 ? void 0 : firstDataEntry.storedBy) || '',\n      LastUpdated: (firstDataEntry === null || firstDataEntry === void 0 ? void 0 : firstDataEntry.lastUpdated) || ''\n    };\n    dataElements.forEach(dataElement => {\n      const dataEntry = periodMap && periodMap.has(dataElement) ? periodMap.get(dataElement) : null;\n      row[dataElement] = dataEntry ? dataEntry.value : '';\n    });\n    return row;\n  });\n  return {\n    pivotData,\n    dataElements,\n    periods\n  };\n};\n\n// Function to transform data values to original flat format (for non-CSV formats)\nconst transformDataValuesFlat = (dataValues, dataElementsLookup, orgUnitsLookup) => {\n  if (!dataValues || !Array.isArray(dataValues)) {\n    return [];\n  }\n  return dataValues.map(dataValue => {\n    const dataElementName = dataElementsLookup[dataValue.dataElement] || dataValue.dataElement;\n    const orgUnitName = orgUnitsLookup[dataValue.orgUnit] || dataValue.orgUnit;\n    const formattedPeriod = formatPeriod(dataValue.period);\n    return {\n      dataElement: dataElementName,\n      period: formattedPeriod,\n      program: orgUnitName,\n      value: dataValue.value,\n      storedBy: dataValue.storedBy,\n      lastUpdated: dataValue.lastUpdated\n    };\n  });\n};\n\n// const valuesToParams = (\n//     {\n//         selectedOrgUnits,\n//         includeChildren,\n//         selectedDataSets,\n//         format,\n//         compression,\n//         startDate,\n//         endDate,\n//         includeDeleted,\n//         dataElementIdScheme,\n//         orgUnitIdScheme,\n//         idScheme,\n//     },\n//     filename\n// ) =>\n//     [\n//         `dataElementIdScheme=${dataElementIdScheme}`,\n//         `orgUnitIdScheme=${orgUnitIdScheme}`,\n//         `idScheme=${idScheme}`,\n//         `includeDeleted=${includeDeleted}`,\n//         `children=${includeChildren}`,\n//         `startDate=${startDate}`,\n//         `endDate=${endDate}`,\n//         `orgUnit=${selectedOrgUnits.map((o) => pathToId(o))}`,\n//         `dataSet=${selectedDataSets}`,\n//         `format=${encodeURIComponent(format)}`,\n//         compression ? `compression=${compressionToName(compression)}` : '',\n//         `attachment=${filename}`,\n//     ]\n//         .filter((s) => s != '')\n//         .join('&')\n\nconst onExport = (engine, setExportEnabled) => async values => {\n  setExportEnabled(false);\n  try {\n    var _data$dataElements, _data$orgUnitsMetadat;\n    const {\n      selectedOrgUnits,\n      includeChildren,\n      selectedDataSets,\n      format,\n      compression,\n      startDate,\n      endDate,\n      includeDeleted,\n      dataElementIdScheme,\n      orgUnitIdScheme,\n      idScheme\n    } = values;\n\n    // Build org unit list\n    const orgUnits = selectedOrgUnits.map(ou => pathToId(ou));\n\n    // Build query to fetch data with metadata\n    const DATA_QUERY = {\n      dataValues: {\n        resource: 'dataValueSets',\n        params: {\n          dataElementIdScheme,\n          orgUnitIdScheme,\n          idScheme,\n          includeDeleted,\n          children: includeChildren,\n          startDate,\n          endDate,\n          orgUnit: orgUnits,\n          dataSet: selectedDataSets,\n          format: 'json' // Always fetch as JSON for transformation\n        }\n      },\n      dataElements: {\n        resource: 'dataElements',\n        params: {\n          fields: 'id,displayName,name',\n          filter: selectedDataSets.map(ds => `dataSetElements.dataSet.id:eq:${ds}`),\n          paging: false\n        }\n      },\n      orgUnitsMetadata: {\n        resource: 'organisationUnits',\n        params: {\n          fields: 'id,displayName,name',\n          filter: orgUnits.map(ou => `id:eq:${ou}`),\n          paging: false\n        }\n      }\n    };\n    const data = await engine.query(DATA_QUERY);\n\n    // Create lookup maps\n    const dataElementsLookup = {};\n    if ((_data$dataElements = data.dataElements) !== null && _data$dataElements !== void 0 && _data$dataElements.dataElements) {\n      data.dataElements.dataElements.forEach(de => {\n        dataElementsLookup[de.id] = de.displayName || de.name;\n      });\n    }\n    const orgUnitsLookup = {};\n    if ((_data$orgUnitsMetadat = data.orgUnitsMetadata) !== null && _data$orgUnitsMetadat !== void 0 && _data$orgUnitsMetadat.organisationUnits) {\n      data.orgUnitsMetadata.organisationUnits.forEach(ou => {\n        orgUnitsLookup[ou.id] = ou.displayName || ou.name;\n      });\n    }\n\n    // Create output based on format\n    let output = '';\n    if (format === 'csv') {\n      var _data$dataValues;\n      // Transform data to pivot table format for CSV\n      const {\n        pivotData,\n        dataElements\n      } = transformDataValuesToPivot((_data$dataValues = data.dataValues) === null || _data$dataValues === void 0 ? void 0 : _data$dataValues.dataValues, dataElementsLookup, orgUnitsLookup);\n\n      // CSV format with pivot table structure including metadata columns\n      const headers = ['Period', 'Program', ...dataElements, 'StoredBy', 'LastUpdated'];\n      output = headers.join(',') + '\\n';\n      pivotData.forEach(row => {\n        const csvRow = headers.map(header => {\n          const value = row[header] || '';\n          return `\"${value.toString().replace(/\"/g, '\"\"')}\"`;\n        }).join(',');\n        output += csvRow + '\\n';\n      });\n    } else {\n      var _data$dataValues2;\n      // For non-CSV formats, use flat structure\n      const transformedData = transformDataValuesFlat((_data$dataValues2 = data.dataValues) === null || _data$dataValues2 === void 0 ? void 0 : _data$dataValues2.dataValues, dataElementsLookup, orgUnitsLookup);\n      output = JSON.stringify(transformedData, null, 2);\n    }\n\n    // Create download\n    const blob = new Blob([output], {\n      type: format === 'csv' ? 'text/csv' : 'application/json'\n    });\n    const url = window.URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    const fileExtension = compression ? `${fileFormatToFileExtension(format)}.${compression}` : fileFormatToFileExtension(format);\n    link.download = `dataValueSets.${fileExtension}`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    window.URL.revokeObjectURL(url);\n    console.log('data-export:', {\n      format\n    });\n  } catch (error) {\n    console.error('Export failed:', error);\n    alert('Export failed: ' + error.message);\n  } finally {\n    setExportEnabled(true);\n  }\n};\nconst validate = values => ({\n  startDate: DATE_BEFORE_VALIDATOR(values.startDate, values.endDate),\n  endDate: DATE_AFTER_VALIDATOR(values.endDate, values.startDate)\n});\nexport { onExport, validate };","import { useConfig, useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport React, { useState } from 'react';\nimport { Page, MoreOptions, BasicOptions, SchemeContainer, DataIcon, ValidationSummary } from '../../components/index.js';\nimport { OrgUnitTree, IncludeChildren, DataSetPicker, Format, formatAdxXMLOptions, defaultFormatOption, Compression, defaultCompressionOption, Dates, StartDate, EndDate, IncludeDeleted, DataElementIdScheme, defaultDataElementIdSchemeOption, IdScheme, defaultIdSchemeOption, OrgUnitIdScheme, defaultOrgUnitIdSchemeOption, ExportButton, FormAlerts } from '../../components/Inputs/index.js';\nimport { jsDateToISO8601 } from '../../utils/helper.js';\nimport { onExport, validate } from './form-helper.js';\nconst {\n  Form\n} = ReactFinalForm;\n\n// PAGE INFO\nexport const PAGE_NAME = i18n.t('Data export');\nexport const PAGE_DESCRIPTION = i18n.t('Export metadata, such as data elements and organisation units, to JSON, CSV, DXF2, or ADX format.');\nconst PAGE_ICON = /*#__PURE__*/React.createElement(DataIcon, null);\nconst today = new Date();\nconst threeMonthsBeforeToday = new Date(today.getFullYear(), today.getMonth() - 3, today.getDate());\nconst initialValues = {\n  selectedOrgUnits: [],\n  includeChildren: true,\n  selectedDataSets: [],\n  format: defaultFormatOption,\n  compression: defaultCompressionOption,\n  startDate: jsDateToISO8601(threeMonthsBeforeToday),\n  endDate: jsDateToISO8601(today),\n  includeDeleted: false,\n  dataElementIdScheme: defaultDataElementIdSchemeOption,\n  orgUnitIdScheme: defaultOrgUnitIdSchemeOption,\n  idScheme: defaultIdSchemeOption\n};\nconst DataExport = () => {\n  const [exportEnabled, setExportEnabled] = useState(true);\n  const {\n    baseUrl\n  } = useConfig();\n  const engine = useDataEngine();\n  const onSubmit = onExport(engine, setExportEnabled);\n  return /*#__PURE__*/React.createElement(Page, {\n    title: PAGE_NAME,\n    desc: PAGE_DESCRIPTION,\n    icon: PAGE_ICON,\n    loading: !exportEnabled,\n    dataTest: \"page-export-data\"\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    initialValues: initialValues,\n    validate: validate,\n    subscription: {\n      values: true,\n      submitError: true\n    },\n    render: ({\n      handleSubmit,\n      submitError\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit\n    }, /*#__PURE__*/React.createElement(BasicOptions, null, /*#__PURE__*/React.createElement(OrgUnitTree, null), /*#__PURE__*/React.createElement(IncludeChildren, null), /*#__PURE__*/React.createElement(DataSetPicker, null), /*#__PURE__*/React.createElement(Dates, {\n      label: i18n.t('Date range to export data for')\n    }, /*#__PURE__*/React.createElement(StartDate, null), /*#__PURE__*/React.createElement(EndDate, null)), /*#__PURE__*/React.createElement(Format, {\n      availableFormats: formatAdxXMLOptions\n    }), /*#__PURE__*/React.createElement(Compression, null)), /*#__PURE__*/React.createElement(MoreOptions, null, /*#__PURE__*/React.createElement(IncludeDeleted, null), /*#__PURE__*/React.createElement(SchemeContainer, null, /*#__PURE__*/React.createElement(DataElementIdScheme, null), /*#__PURE__*/React.createElement(OrgUnitIdScheme, null), /*#__PURE__*/React.createElement(IdScheme, null))), /*#__PURE__*/React.createElement(ValidationSummary, null), /*#__PURE__*/React.createElement(ExportButton, {\n      label: i18n.t('Export data'),\n      disabled: !exportEnabled\n    }), /*#__PURE__*/React.createElement(FormAlerts, {\n      alerts: submitError\n    }))\n  }));\n};\nexport { DataExport };","import i18n from '@dhis2/d2-i18n';\nimport { DATE_BEFORE_VALIDATOR, DATE_AFTER_VALIDATOR } from '../../components/DatePicker/DatePickerField.js';\nimport { OU_MODE_MANUAL_VALUE } from '../../components/Inputs/index.js';\nimport { locationAssign, pathToId } from '../../utils/helper.js';\n\n// calculate minimum set of parameters based on given filters\nconst valuesToParams = ({\n  selectedOrgUnits,\n  selectedUsers,\n  selectedPrograms,\n  selectedTETypes,\n  ouMode,\n  inclusion,\n  format,\n  includeDeleted,\n  dataElementIdScheme,\n  eventIdScheme,\n  orgUnitIdScheme,\n  idScheme,\n  assignedUserModeFilter,\n  assignedUserMode,\n  teiTypeFilter,\n  programStatus,\n  followUp,\n  enrollmentEnrolledAfter,\n  enrollmentEnrolledBefore,\n  lastUpdatedFilter,\n  updatedAfter,\n  updatedBefore,\n  updatedWithin\n}, filename) => {\n  const minParams = {\n    ouMode: ouMode,\n    format: format,\n    includeDeleted: includeDeleted.toString(),\n    dataElementIdScheme: dataElementIdScheme,\n    eventIdScheme: eventIdScheme,\n    orgUnitIdScheme: orgUnitIdScheme,\n    idScheme: idScheme,\n    attachment: filename,\n    paging: false,\n    totalPages: false\n  };\n\n  // include selected org.units only when manual selection is selected\n  // ouMode is then stored in the `inclusion` field\n  if (ouMode === OU_MODE_MANUAL_VALUE) {\n    minParams.orgUnits = selectedOrgUnits.map(o => pathToId(o)).join(',');\n    minParams.ouMode = inclusion;\n  }\n  if (assignedUserModeFilter) {\n    minParams.assignedUserMode = assignedUserMode;\n    if (assignedUserMode == 'PROVIDED') {\n      minParams.assignedUsers = selectedUsers.join(',');\n    }\n  }\n  if (teiTypeFilter == 'PROGRAM') {\n    minParams.program = selectedPrograms;\n    if (programStatus) {\n      // programStatus = ALL is now the same\n      // as not providing a value for this param at all\n      minParams.programStatus = programStatus;\n    }\n    if (followUp !== 'ALL') {\n      minParams.followUp = followUp;\n    }\n    if (enrollmentEnrolledAfter) {\n      minParams.enrollmentEnrolledAfter = enrollmentEnrolledAfter;\n    }\n    if (enrollmentEnrolledBefore) {\n      minParams.enrollmentEnrolledBefore = enrollmentEnrolledBefore;\n    }\n  }\n  if (teiTypeFilter == 'TE') {\n    minParams.trackedEntityType = selectedTETypes;\n  }\n  if (lastUpdatedFilter == 'DATE') {\n    if (updatedAfter) {\n      minParams.updatedAfter = updatedAfter;\n    }\n    if (updatedBefore) {\n      minParams.updatedBefore = updatedBefore;\n    }\n  }\n  if (lastUpdatedFilter == 'DURATION') {\n    minParams.updatedWithin = updatedWithin;\n  }\n  return Object.keys(minParams).map(param => `${param}=${minParams[param]}`).join('&');\n};\nconst onExport = (baseUrl, setExportEnabled) => async values => {\n  setExportEnabled(false);\n  const {\n    format\n  } = values;\n\n  // generate URL and redirect\n  const apiBaseUrl = `${baseUrl}/api/tracker/`;\n  const endpoint = `trackedEntities`;\n  const filename = `${endpoint}.${format}`;\n  const downloadUrlParams = valuesToParams(values, filename);\n  const url = `${apiBaseUrl}${endpoint}.${format}?${downloadUrlParams}`;\n  locationAssign(url);\n  setExportEnabled(true);\n\n  // log for debugging purposes\n  console.log('tei-export:', {\n    url,\n    params: downloadUrlParams\n  });\n};\nconst validate = values => {\n  const errors = {};\n  if (values.teiTypeFilter == 'PROGRAM' && values.enrollmentEnrolledAfter && values.enrollmentEnrolledBefore) {\n    errors.enrollmentEnrolledAfter = DATE_BEFORE_VALIDATOR(values.enrollmentEnrolledAfter, values.enrollmentEnrolledBefore);\n    errors.enrollmentEnrolledBefore = DATE_AFTER_VALIDATOR(values.enrollmentEnrolledBefore, values.enrollmentEnrolledAfter);\n  }\n  if (values.lastUpdatedFilter == 'DATE' && values.updatedAfter && values.updatedBefore) {\n    errors.updatedAfter = DATE_BEFORE_VALIDATOR(values.updatedAfter, values.updatedBefore);\n    errors.updatedBefore = DATE_AFTER_VALIDATOR(values.updatedBefore, values.updatedAfter);\n  }\n  if (values.lastUpdatedFilter == 'DATE' && !values.updatedAfter && !values.updatedBefore) {\n    errors.updatedBefore = i18n.t(\"At least one of the 'last updated' date fields must be specified\");\n  }\n  return errors;\n};\nexport { onExport, validate };","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport React, { useState } from 'react';\nimport { Page, MoreOptions, BasicOptions, SchemeContainer, TEIIcon, ValidationSummary } from '../../components/index.js';\nimport { Format, defaultFormatOption, OrgUnitMode, defaultOrgUnitSelectionModeOption, defaultInclusionOption, TEITypeFilter, defaultTEITypeFilterOption, ProgramStatus, defaultProgramStatusOption, FollowUpStatus, defaultFollowUpStatusOption, Dates, ProgramStartDate, ProgramEndDate, ProgramPicker, TETypePicker, LastUpdatedFilter, defaultLastUpdatedFilterOption, LastUpdatedStartDate, LastUpdatedEndDate, LastUpdatedDuration, AssignedUserMode, defaultAssignedUserModeOption, IncludeDeleted, DataElementIdScheme, defaultDataElementIdSchemeOption, EventIdScheme, defaultEventIdSchemeOption, IdScheme, defaultIdSchemeOption, OrgUnitIdScheme, defaultOrgUnitIdSchemeOption, ExportButton, FormAlerts, formatNoXmlOptions } from '../../components/Inputs/index.js';\nimport { onExport, validate } from './form-helper.js';\nconst {\n  Form\n} = ReactFinalForm;\n\n// PAGE INFO\nexport const PAGE_NAME = i18n.t('Tracked entities export');\nexport const PAGE_DESCRIPTION = i18n.t('Export tracked entities in JSON or CSV format.');\nconst PAGE_ICON = /*#__PURE__*/React.createElement(TEIIcon, null);\nconst initialValues = {\n  selectedOrgUnits: [],\n  selectedPrograms: [],\n  selectedTETypes: [],\n  selectedUsers: [],\n  format: defaultFormatOption,\n  ouMode: defaultOrgUnitSelectionModeOption,\n  inclusion: defaultInclusionOption,\n  teiTypeFilter: defaultTEITypeFilterOption,\n  programStatus: defaultProgramStatusOption,\n  followUp: defaultFollowUpStatusOption,\n  enrollmentEnrolledAfter: '',\n  enrollmentEnrolledBefore: '',\n  compression: '',\n  // disable compression until it is properly implemented in the backend\n  lastUpdatedFilter: defaultLastUpdatedFilterOption,\n  updatedAfter: '',\n  updatedBefore: '',\n  updatedWithin: '',\n  assignedUserModeFilter: false,\n  assignedUserMode: defaultAssignedUserModeOption,\n  includeDeleted: false,\n  dataElementIdScheme: defaultDataElementIdSchemeOption,\n  eventIdScheme: defaultEventIdSchemeOption,\n  orgUnitIdScheme: defaultOrgUnitIdSchemeOption,\n  idScheme: defaultIdSchemeOption\n};\nconst TEIExport = () => {\n  const [exportEnabled, setExportEnabled] = useState(true);\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onExport(baseUrl, setExportEnabled);\n  return /*#__PURE__*/React.createElement(Page, {\n    title: PAGE_NAME,\n    desc: PAGE_DESCRIPTION,\n    icon: PAGE_ICON,\n    loading: !exportEnabled,\n    dataTest: \"page-export-tei\"\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    initialValues: initialValues,\n    validate: validate,\n    subscription: {\n      values: true,\n      submitError: true\n    },\n    render: ({\n      handleSubmit,\n      values,\n      submitError\n    }) => {\n      const showProgramFilters = values.teiTypeFilter == 'PROGRAM';\n      const showTEFilters = values.teiTypeFilter == 'TE';\n      const showLUDates = values.lastUpdatedFilter == 'DATE';\n      const showLUDuration = values.lastUpdatedFilter == 'DURATION';\n      return /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: handleSubmit\n      }, /*#__PURE__*/React.createElement(BasicOptions, null, /*#__PURE__*/React.createElement(OrgUnitMode, {\n        value: values.ouMode\n      }), /*#__PURE__*/React.createElement(TEITypeFilter, null), /*#__PURE__*/React.createElement(ProgramPicker, {\n        label: i18n.t('Program to export from'),\n        show: showProgramFilters\n      }), /*#__PURE__*/React.createElement(ProgramStatus, {\n        show: showProgramFilters\n      }), /*#__PURE__*/React.createElement(FollowUpStatus, {\n        show: showProgramFilters\n      }), /*#__PURE__*/React.createElement(Dates, {\n        label: i18n.t('Enrollment date range'),\n        show: showProgramFilters\n      }, /*#__PURE__*/React.createElement(ProgramStartDate, {\n        show: showProgramFilters\n      }), /*#__PURE__*/React.createElement(ProgramEndDate, {\n        show: showProgramFilters\n      })), /*#__PURE__*/React.createElement(TETypePicker, {\n        show: showTEFilters\n      }), /*#__PURE__*/React.createElement(Format, {\n        availableFormats: formatNoXmlOptions\n      })), /*#__PURE__*/React.createElement(MoreOptions, null, /*#__PURE__*/React.createElement(LastUpdatedFilter, null), /*#__PURE__*/React.createElement(Dates, {\n        show: showLUDates\n      }, /*#__PURE__*/React.createElement(LastUpdatedStartDate, {\n        show: showLUDates\n      }), /*#__PURE__*/React.createElement(LastUpdatedEndDate, {\n        show: showLUDates\n      })), /*#__PURE__*/React.createElement(LastUpdatedDuration, {\n        show: showLUDuration\n      }), /*#__PURE__*/React.createElement(AssignedUserMode, null), /*#__PURE__*/React.createElement(IncludeDeleted, null), /*#__PURE__*/React.createElement(SchemeContainer, null, /*#__PURE__*/React.createElement(DataElementIdScheme, null), /*#__PURE__*/React.createElement(EventIdScheme, null), /*#__PURE__*/React.createElement(OrgUnitIdScheme, null), /*#__PURE__*/React.createElement(IdScheme, null))), /*#__PURE__*/React.createElement(ValidationSummary, null), /*#__PURE__*/React.createElement(ExportButton, {\n        label: i18n.t('Export tracked entities'),\n        disabled: !exportEnabled\n      }), /*#__PURE__*/React.createElement(FormAlerts, {\n        alerts: submitError\n      }));\n    }\n  }));\n};\nexport { TEIExport };","import { FORM_ERROR, jobStartedMessage } from '../../utils/final-form.js';\nimport { uploadFile } from '../../utils/helper.js';\nconst onImport = ({\n  baseUrl,\n  setProgress,\n  addTask,\n  setShowFullSummaryTask\n}) => async values => {\n  const {\n    dryRun,\n    files,\n    format,\n    identifier,\n    importReportMode,\n    preheatMode,\n    strategy,\n    atomicMode,\n    mergeMode,\n    flushMode,\n    skipSharing,\n    skipValidation,\n    inclusionStrategy,\n    isAsync,\n    dataElementIdScheme,\n    orgUnitIdScheme,\n    eventIdScheme,\n    idScheme\n  } = values;\n\n  // send xhr\n  const apiBaseUrl = `${baseUrl}/api/tracker/`;\n  const params = [`importMode=${dryRun ? 'VALIDATE' : 'COMMIT'}`, `identifier=${identifier}`, `importReportMode=${importReportMode}`, `preheatMode=${preheatMode}`, `strategy=${strategy}`, `atomicMode=${atomicMode}`, `mergeMode=${mergeMode}`, `flushMode=${flushMode}`, `skipSharing=${skipSharing}`, `skipValidation=${skipValidation}`, `inclusionStrategy=${inclusionStrategy}`, `async=${isAsync}`, `format=${format}`, `dataElementIdScheme=${dataElementIdScheme}`, `orgUnitIdScheme=${orgUnitIdScheme}`, `eventIdScheme=${eventIdScheme}`, `idScheme=${idScheme}`].filter(s => s != '').join('&');\n  const url = `${apiBaseUrl}?${params}`;\n  try {\n    await uploadFile({\n      url,\n      file: files[0],\n      format: format,\n      type: 'TRACKER_IMPORT_JOB',\n      isAsync: isAsync,\n      setProgress,\n      addEntry: (id, entry) => {\n        addTask('tei', id, {\n          ...entry,\n          jobDetails: values\n        });\n      }\n    });\n    return jobStartedMessage;\n  } catch (e) {\n    const formErrors = validate(values);\n    const allErrors = {\n      [FORM_ERROR]: [e],\n      ...formErrors\n    };\n    return allErrors;\n  } finally {\n    setShowFullSummaryTask(true);\n  }\n};\nconst validate = () => {\n  return {};\n};\nexport { onImport, validate };","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport React, { useContext, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Page, TEIIcon, MoreOptions, SchemeContainer, BasicOptions, ValidationSummary } from '../../components/index.js';\nimport { FileUpload, Format, defaultFormatOption, Identifier, defaultIdentifierOption, ImportReportMode, defaultImportReportModeOption, PreheatMode, defaultPreheatModeOption, Strategy, defaultStrategyOption, AtomicMode, defaultAtomicModeOption, MergeMode, defaultMergeModeOption, FlushMode, defaultFlushModeOption, SkipSharing, defaultSkipSharingOption, SkipValidation, defaultSkipValidationOption, InclusionStrategy, defaultInclusionStrategyOption, ImportButtonStrip, FormAlerts, DataElementIdScheme, defaultDataElementIdSchemeOption, EventIdScheme, defaultEventIdSchemeOption, IdScheme, defaultIdSchemeOption, OrgUnitIdScheme, defaultOrgUnitIdSchemeOption, formatNoXmlNoCsvOptions } from '../../components/Inputs/index.js';\nimport { TaskContext, getNewestTask } from '../../contexts/index.js';\nimport { getPrevJobDetails, getInitialBoolValue } from '../../utils/helper.js';\nimport { onImport } from './form-helper.js';\nconst {\n  Form\n} = ReactFinalForm;\n\n// PAGE INFO\nexport const PAGE_NAME = i18n.t('Tracked entities import');\nexport const PAGE_DESCRIPTION = i18n.t('Import tracked entities using JSON format.');\nconst PAGE_ICON = /*#__PURE__*/React.createElement(TEIIcon, null);\nconst createInitialValues = prevJobDetails => ({\n  files: prevJobDetails.files,\n  format: prevJobDetails.format || defaultFormatOption,\n  identifier: prevJobDetails.identifier || defaultIdentifierOption,\n  importReportMode: prevJobDetails.importReportMode || defaultImportReportModeOption,\n  preheatMode: prevJobDetails.preheatMode || defaultPreheatModeOption,\n  strategy: prevJobDetails.strategy || defaultStrategyOption,\n  atomicMode: prevJobDetails.atomicMode || defaultAtomicModeOption,\n  mergeMode: prevJobDetails.mergeMode || defaultMergeModeOption,\n  flushMode: prevJobDetails.flushMode || defaultFlushModeOption,\n  inclusionStrategy: prevJobDetails.inclusionStrategy || defaultInclusionStrategyOption,\n  skipSharing: getInitialBoolValue(prevJobDetails.skipSharing, defaultSkipSharingOption),\n  skipValidation: getInitialBoolValue(prevJobDetails.skipValidation, defaultSkipValidationOption),\n  isAsync: true,\n  dataElementIdScheme: prevJobDetails.dataElementIdScheme || defaultDataElementIdSchemeOption,\n  orgUnitIdScheme: prevJobDetails.orgUnitIdScheme || defaultOrgUnitIdSchemeOption,\n  eventIdScheme: prevJobDetails.eventIdScheme || defaultEventIdSchemeOption,\n  idScheme: prevJobDetails.idScheme || defaultIdSchemeOption\n});\nconst TEIImport = () => {\n  const {\n    tasks: {\n      tei: teiTasks\n    },\n    addTask\n  } = useContext(TaskContext);\n\n  // recreating a previously run job\n  const query = useLocation().query;\n  const prevJobDetails = getPrevJobDetails(query, teiTasks);\n  const initialValues = createInitialValues(prevJobDetails);\n  const [progress, setProgress] = useState(0);\n  const [showFullSummaryTask, setShowFullSummaryTask] = useState(false);\n  const {\n    baseUrl\n  } = useConfig();\n  const onSubmit = onImport({\n    baseUrl,\n    setProgress,\n    addTask,\n    setShowFullSummaryTask\n  });\n  return /*#__PURE__*/React.createElement(Page, {\n    title: PAGE_NAME,\n    desc: PAGE_DESCRIPTION,\n    icon: PAGE_ICON,\n    loading: progress,\n    dataTest: \"page-import-tei\",\n    summaryTask: getNewestTask(teiTasks),\n    showFullSummaryTask: showFullSummaryTask\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    initialValues: initialValues,\n    subscription: {\n      values: true,\n      submitError: true\n    },\n    render: ({\n      handleSubmit,\n      values,\n      form,\n      submitError\n    }) => /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit\n    }, /*#__PURE__*/React.createElement(BasicOptions, null, /*#__PURE__*/React.createElement(FileUpload, {\n      helpText: i18n.t('Supported file types: JSON.', {\n        nsSeparator: '>'\n      })\n    }), /*#__PURE__*/React.createElement(Format, {\n      availableFormats: formatNoXmlNoCsvOptions,\n      type: \"import\"\n    }), /*#__PURE__*/React.createElement(Identifier, null), /*#__PURE__*/React.createElement(ImportReportMode, null), /*#__PURE__*/React.createElement(PreheatMode, null), /*#__PURE__*/React.createElement(Strategy, {\n      value: values.strategy\n    }), /*#__PURE__*/React.createElement(AtomicMode, null), /*#__PURE__*/React.createElement(MergeMode, null)), /*#__PURE__*/React.createElement(MoreOptions, null, /*#__PURE__*/React.createElement(FlushMode, null), /*#__PURE__*/React.createElement(SkipSharing, null), /*#__PURE__*/React.createElement(SkipValidation, null), /*#__PURE__*/React.createElement(InclusionStrategy, null), /*#__PURE__*/React.createElement(SchemeContainer, null, /*#__PURE__*/React.createElement(DataElementIdScheme, null), /*#__PURE__*/React.createElement(EventIdScheme, null), /*#__PURE__*/React.createElement(OrgUnitIdScheme, null), /*#__PURE__*/React.createElement(IdScheme, null))), /*#__PURE__*/React.createElement(ValidationSummary, null), /*#__PURE__*/React.createElement(ImportButtonStrip, {\n      form: form\n    }), /*#__PURE__*/React.createElement(FormAlerts, {\n      alerts: submitError\n    }))\n  }));\n};\nexport { TEIImport };","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from './HomeCard.module.css';\nconst HomeCard = ({\n  titleText,\n  bodyText,\n  linkText,\n  to\n}) => {\n  return /*#__PURE__*/React.createElement(Link, {\n    className: styles.link,\n    to: to\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.title\n  }, titleText), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.body\n  }, bodyText), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.linkText\n  }, linkText)));\n};\nHomeCard.propTypes = {\n  bodyText: PropTypes.string.isRequired,\n  linkText: PropTypes.string.isRequired,\n  titleText: PropTypes.string.isRequired,\n  to: PropTypes.string.isRequired\n};\nexport { HomeCard };","import i18n from '@dhis2/d2-i18n';\n// export pages\nimport { PAGE_NAME as DATA_EXPORT_PAGE_NAME, PAGE_DESCRIPTION as DATA_EXPORT_DESCRIPTION } from '../DataExport/DataExport.js';\nimport { PAGE_NAME as DATA_IMPORT_PAGE_NAME, PAGE_DESCRIPTION as DATA_IMPORT_DESCRIPTION } from '../DataImport/DataImport.js';\nimport { PAGE_NAME as EARTH_ENGINE_IMPORT_PAGE_NAME, PAGE_DESCRIPTION as EARTH_ENGINE_IMPORT_DESCRIPTION } from '../EarthEngineImport/EarthEngineImport.js';\nimport { PAGE_NAME as EVENT_EXPORT_PAGE_NAME, PAGE_DESCRIPTION as EVENT_EXPORT_DESCRIPTION } from '../EventExport/EventExport.js';\nimport { PAGE_NAME as EVENT_IMPORT_PAGE_NAME, PAGE_DESCRIPTION as EVENT_IMPORT_DESCRIPTION } from '../EventImport/EventImport.js';\nimport { PAGE_NAME as GEOMETRY_IMPORT_PAGE_NAME, PAGE_DESCRIPTION as GEOMETRY_IMPORT_DESCRIPTION } from '../GeometryImport/GeometryImport.js';\nimport { PAGE_NAME as METADATA_DEPENDENCY_EXPORT_PAGE_NAME, PAGE_DESCRIPTION as METADATA_DEPENDENCY_EXPORT_DESCRIPTION } from '../MetadataDependencyExport/MetadataDependencyExport.js';\nimport { PAGE_NAME as METADATA_EXPORT_PAGE_NAME, PAGE_DESCRIPTION as METADATA_EXPORT_DESCRIPTION } from '../MetadataExport/MetadataExport.js';\nimport { PAGE_NAME as METADATA_IMPORT_PAGE_NAME, PAGE_DESCRIPTION as METADATA_IMPORT_DESCRIPTION } from '../MetadataImport/MetadataImport.js';\nimport { PAGE_NAME as TEI_EXPORT_PAGE_NAME, PAGE_DESCRIPTION as TEI_EXPORT_DESCRIPTION } from '../TEIExport/TEIExport.js';\n// import pages\nimport { PAGE_NAME as TEI_IMPORT_PAGE_NAME, PAGE_DESCRIPTION as TEI_IMPORT_DESCRIPTION } from '../TEIImport/TEIImport.js';\nconst capitalizeFirstLetter = string => string.charAt(0).toUpperCase() + string.slice(1);\nconst capitalizeName = name => name.split(' ').map(capitalizeFirstLetter).join(' ');\nconst capitalizePages = pages => pages.map(p => ({\n  ...p,\n  name: capitalizeName(p.name)\n}));\nconst exportPages = capitalizePages([{\n  name: DATA_EXPORT_PAGE_NAME,\n  description: DATA_EXPORT_DESCRIPTION,\n  linkText: i18n.t('Export data'),\n  to: '/export/data'\n}, {\n  name: EVENT_EXPORT_PAGE_NAME,\n  description: EVENT_EXPORT_DESCRIPTION,\n  linkText: i18n.t('Export events'),\n  to: '/export/event'\n}, {\n  name: METADATA_DEPENDENCY_EXPORT_PAGE_NAME,\n  description: METADATA_DEPENDENCY_EXPORT_DESCRIPTION,\n  linkText: i18n.t('Export metadata dependencies'),\n  to: '/export/metadata-dependency'\n}, {\n  name: METADATA_EXPORT_PAGE_NAME,\n  description: METADATA_EXPORT_DESCRIPTION,\n  linkText: i18n.t('Export metadata'),\n  to: '/export/metadata'\n}, {\n  name: TEI_EXPORT_PAGE_NAME,\n  description: TEI_EXPORT_DESCRIPTION,\n  linkText: i18n.t('Export tracked entities'),\n  to: '/export/tei'\n}]);\nconst importPages = capitalizePages([{\n  name: DATA_IMPORT_PAGE_NAME,\n  description: DATA_IMPORT_DESCRIPTION,\n  linkText: i18n.t('Import data'),\n  to: '/import/data'\n}, {\n  name: EVENT_IMPORT_PAGE_NAME,\n  description: EVENT_IMPORT_DESCRIPTION,\n  linkText: i18n.t('Import events'),\n  to: '/import/event'\n}, {\n  name: EARTH_ENGINE_IMPORT_PAGE_NAME,\n  description: EARTH_ENGINE_IMPORT_DESCRIPTION,\n  linkText: i18n.t('Import Earth Engine'),\n  to: '/import/earthengine'\n}, {\n  name: GEOMETRY_IMPORT_PAGE_NAME,\n  description: GEOMETRY_IMPORT_DESCRIPTION,\n  linkText: i18n.t('Import GeoJSON'),\n  to: '/import/geometry'\n}, {\n  name: METADATA_IMPORT_PAGE_NAME,\n  description: METADATA_IMPORT_DESCRIPTION,\n  linkText: i18n.t('Import metadata'),\n  to: '/import/metadata'\n}, {\n  name: TEI_IMPORT_PAGE_NAME,\n  description: TEI_IMPORT_DESCRIPTION,\n  linkText: i18n.t('Import tracked entities'),\n  to: '/import/tei'\n}]);\nexport { exportPages, importPages };","import PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nexport const ScrollToTop = ({\n  children\n}) => {\n  const history = useHistory();\n  useEffect(() => {\n    const unlisten = history.listen(() => {\n      var _document$getElements;\n      (_document$getElements = document.getElementsByClassName('app-shell-app')[0]) === null || _document$getElements === void 0 ? void 0 : _document$getElements.scrollTo(0, 0);\n    });\n    return () => {\n      unlisten();\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n};\nScrollToTop.propTypes = {\n  children: PropTypes.node\n};","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { Page } from '../../components/index.js';\nimport styles from './Home.module.css';\nimport { HomeCard } from './HomeCard.js';\nimport { importPages, exportPages } from './pages.js';\n\n// PAGE INFO\nconst PAGE_NAME = i18n.t('Overview: Import/Export', {\n  nsSeparator: '>'\n});\nconst PAGE_DESCRIPTION = i18n.t('Import or export DHIS2 data.');\nconst Home = () => /*#__PURE__*/React.createElement(Page, {\n  title: PAGE_NAME,\n  desc: PAGE_DESCRIPTION,\n  dataTest: \"page-overview\",\n  transparent: true\n}, /*#__PURE__*/React.createElement(\"h2\", {\n  className: styles.categoryTitle\n}, i18n.t('Import')), /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.grid\n}, importPages.map(({\n  name,\n  description,\n  linkText,\n  to\n}, i) => /*#__PURE__*/React.createElement(HomeCard, {\n  key: i,\n  titleText: name,\n  bodyText: description,\n  linkText: linkText,\n  to: to\n}))), /*#__PURE__*/React.createElement(\"h2\", {\n  className: styles.categoryTitle\n}, i18n.t('Export')), /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.grid\n}, exportPages.map(({\n  name,\n  description,\n  linkText,\n  to\n}, i) => /*#__PURE__*/React.createElement(HomeCard, {\n  key: i,\n  titleText: name,\n  bodyText: description,\n  linkText: linkText,\n  to: to\n}))));\nexport { Home };","import React from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport { DataImport, DataExport, EventExport, EventImport, EarthEngineImport, GeometryImport, GMLImport, MetadataDependencyExport, MetadataExport, MetadataImport, TEIExport, TEIImport, JobOverview, Home } from '../../pages/index.js';\nimport { ScrollToTop } from '../Router/ScrollToTop.js';\nconst Router = () => {\n  return /*#__PURE__*/React.createElement(ScrollToTop, null, /*#__PURE__*/React.createElement(Switch, null, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: DataImport\n  }, /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/import/data\"\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/import/data\",\n    component: DataImport\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/import/event\",\n    component: EventImport\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/import/earthengine\",\n    component: EarthEngineImport\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/import/geometry\",\n    component: GeometryImport\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/import/gml\",\n    component: GMLImport\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/import/metadata\",\n    component: MetadataImport\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/import/tei\",\n    component: TEIImport\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/export/data\",\n    component: DataExport\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/export/event\",\n    component: EventExport\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/export/metadata-dependency\",\n    component: MetadataDependencyExport\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/export/metadata\",\n    component: MetadataExport\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/export/tei\",\n    component: TEIExport\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/utils/job-overview\",\n    component: JobOverview\n  }), /*#__PURE__*/React.createElement(Redirect, {\n    from: \"*\",\n    to: \"/\"\n  })));\n};\nexport { Router };","/**\n * Group and sort schemas\n * ======================\n */\nconst groupSchemas = schemas => schemas.reduce((groups, schema) => {\n  const {\n    group\n  } = schema;\n  return {\n    ...groups,\n    // add schema to \"group\" collection if existing,\n    // otherwise create new collection with schema as first entry\n    [group]: groups[group] ? [...groups[group], schema] : [schema]\n  };\n}, {});\nconst combineSingleItemGroups = groups => {\n  const groupNames = Object.keys(groups);\n  return groupNames.reduce((combinedGroups, groupName) => {\n    const group = groups[groupName];\n    if (group.length === 1) {\n      return {\n        ...combinedGroups,\n        other: [...combinedGroups.other, group[0]]\n      };\n    }\n    return {\n      ...combinedGroups,\n      [groupName]: group\n    };\n  }, {\n    other: []\n  });\n};\n\n/**\n * Get group label helpers\n * =======================\n */\n\n/**\n * This function will loop through all schemas and\n * compare the the lower case groupKey with\n * the schemas' name.\n * If a match is found, that match will be returned\n */\nfunction findLabelByLowerCaseComparison(groupKey, schemas) {\n  const isGroupKeyMatchingLowerCaseSchemaName = schemaName => groupKey === schemaName.toLowerCase();\n  return schemas.reduce((foundLabel, {\n    name: schemaName,\n    displayName\n  }) => {\n    // do not try to compare anything if a label already\n    // has been found\n    if (foundLabel) {\n      return foundLabel;\n    }\n    if (isGroupKeyMatchingLowerCaseSchemaName(schemaName)) {\n      return displayName;\n    }\n    return foundLabel;\n  }, '');\n}\nconst ucFirst = str => str[0].toUpperCase() + str.substr(1);\n\n/**\n * This function will go through all schemas\n * and will compare the scheme name with the\n * lower case group key at position 0 of the schema key.\n * Once a match is found, the match will be extracted,\n * spaces will be inserted before all capital letters\n * and the result returned\n */\nfunction findKeyByCamelCaseComparison(groupKey, schemas) {\n  const isGroupKeyInSchemaName = schemaName => schemaName.includes(groupKey) && schemaName.indexOf(groupKey) === 0;\n\n  // Will return either a label or an empty string\n  // if no match for the groupKey was found\n  return schemas.reduce((foundLabel, {\n    name: schemaName\n  }) => {\n    // do not try to compare anything if a label already\n    // has been found\n    if (foundLabel) {\n      return foundLabel;\n    }\n    const lowerCaseSchemaName = schemaName.toLowerCase();\n    if (isGroupKeyInSchemaName(lowerCaseSchemaName)) {\n      return ucFirst(schemaName\n      // extract part that matches the groupKey\n      .substr(0, groupKey.length)\n      // insert space before capital letters\n      .replace(/([A-Z]+)/g, ' $1'));\n    }\n    return foundLabel;\n  }, '');\n}\nfunction extractGroupLabelFromSchemas(groupKey, schemas) {\n  const lowerCaseGroupKey = groupKey.toLowerCase();\n  if (lowerCaseGroupKey === 'oauth2' || lowerCaseGroupKey === 'other') {\n    return groupKey;\n  }\n  const label = findLabelByLowerCaseComparison(lowerCaseGroupKey, schemas) || findKeyByCamelCaseComparison(lowerCaseGroupKey, schemas) || groupKey[0].toUpperCase() + groupKey.substr(1);\n\n  // Replace 'Organisation Unit' with 'Project' in the group label\n  return label.replace(/Organisation Unit/gi, 'Project');\n}\nconst getSchemaGroups = schemas => {\n  const groups = groupSchemas(schemas);\n  const combinedGroups = combineSingleItemGroups(groups);\n  return combinedGroups;\n};\nconst getGroupLabels = schemaGroups => {\n  return Object.entries(schemaGroups).reduce((groupLabels, [groupKey, schemas]) => {\n    const label = extractGroupLabelFromSchemas(groupKey, schemas);\n    return {\n      ...groupLabels,\n      [groupKey]: label\n    };\n  }, {});\n};\nconst getGroupOrder = schemas => {\n  const groupKeys = Object.keys(schemas);\n  groupKeys.sort();\n  return groupKeys;\n};\nconst filterOutExcludedSchemas = (excludedSchemas, schemas) => schemas.filter(schema => schema.metadata && !excludedSchemas.has(schema.collectionName));\nconst groupName = klass => {\n  const group = klass.split('.');\n  group.pop();\n  if (!klass.includes('.dhis')) {\n    group.pop();\n  }\n  let name = group[group.length - 1].replace(/(.)([A-Z])/g, '$1 $2');\n  // Replace 'Organisation Unit' with 'Project' in the group name\n  return name === 'Organisation Unit' ? 'Project' : name;\n};\nconst formatSchemas = (schemas, checkedByDefault) => schemas.map(schema => {\n  // Replace 'Organisation Unit' with 'Project' in the display name\n  const displayName = schema.displayName.replace(/Organisation Unit/gi, 'Project');\n  return {\n    checked: checkedByDefault,\n    label: displayName,\n    name: schema.collectionName,\n    group: groupName(schema.klass)\n  };\n});\nexport { filterOutExcludedSchemas, groupName, formatSchemas, getSchemaGroups, getGroupLabels, getGroupOrder };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Schemas_container__fMPx1\",\"group\":\"Schemas_group__8CcRy\",\"schema\":\"Schemas_schema__NPcQF\",\"control\":\"Schemas_control__kwIeQ\",\"formLabel\":\"Schemas_formLabel__Ls0Qp\",\"formControl\":\"Schemas_formControl__0pPgY\"};","import { Checkbox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './Schemas.module.css';\nconst SchemaGroup = ({\n  label,\n  schemas,\n  toggleSchema,\n  dataTest\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.group,\n  \"data-test\": dataTest\n}, /*#__PURE__*/React.createElement(\"span\", {\n  className: styles.formLabel\n}, label), /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.schema\n}, schemas.map((schema, ind) => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.control,\n  key: schema.name\n}, /*#__PURE__*/React.createElement(Checkbox, {\n  label: schema.label,\n  name: `schemas.${schema.name}`,\n  value: `schemas.${schema.name}`,\n  checked: schema.checked,\n  onChange: () => toggleSchema(ind)\n})))));\nSchemaGroup.propTypes = {\n  label: PropTypes.string.isRequired,\n  schemas: PropTypes.arrayOf(PropTypes.exact({\n    checked: PropTypes.bool.isRequired,\n    label: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    group: PropTypes.string.isRequired\n  })).isRequired,\n  toggleSchema: PropTypes.func.isRequired,\n  dataTest: PropTypes.string\n};\nexport { SchemaGroup };","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip, CircularLoader, Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { filterOutExcludedSchemas, formatSchemas, getSchemaGroups, getGroupLabels, getGroupOrder } from './helper.js';\nimport { SchemaGroup } from './SchemaGroup.js';\nimport styles from './Schemas.module.css';\nconst schemaQuery = {\n  schemas: {\n    resource: 'schemas',\n    params: {\n      fields: ['metadata', 'collectionName', 'displayName', 'klass']\n    }\n  }\n};\nconst Schemas = ({\n  excludeSchemas,\n  setCheckedSchemas,\n  meta,\n  checkedByDefault,\n  dataTest\n}) => {\n  const [schemaGroups, setSchemaGroups] = useState(undefined);\n  const [schemaGroupLabels, setSchemaGroupLabels] = useState(undefined);\n  const [schemaGroupOrder, setSchemaGroupOrder] = useState([]);\n  const {\n    error,\n    fetching,\n    data\n  } = useDataQuery(schemaQuery, {\n    onError: console.error\n  });\n  useEffect(() => {\n    if (!fetching && data) {\n      const schemas = data.schemas.schemas;\n      const filteredSchemas = filterOutExcludedSchemas(excludeSchemas, schemas);\n      const formattedSchemas = formatSchemas(filteredSchemas, checkedByDefault);\n      const groups = getSchemaGroups(formattedSchemas);\n      setSchemaGroups(groups);\n      setSchemaGroupOrder(getGroupOrder(groups));\n      setSchemaGroupLabels(getGroupLabels(groups));\n      propagateCheckedSchemas(groups);\n    }\n  }, [fetching, data]);\n  const propagateCheckedSchemas = updatedSchemaGroups => {\n    setCheckedSchemas(Object.keys(updatedSchemaGroups).reduce((acc, groupName) => [...acc, ...updatedSchemaGroups[groupName].filter(s => s.checked).map(s => s.name)], []));\n  };\n  const onSelectGeneric = val => () => {\n    const updatedSchemaGroups = Object.keys(schemaGroups).reduce((acc, groupName) => ({\n      ...acc,\n      [groupName]: schemaGroups[groupName].reduce((grAcc, group) => [...grAcc, {\n        ...group,\n        checked: val\n      }], [])\n    }), {});\n    setSchemaGroups(updatedSchemaGroups);\n    propagateCheckedSchemas(updatedSchemaGroups);\n  };\n  const toggleSchema = schemaGroup => ind => {\n    const updatedGroup = [...schemaGroups[schemaGroup]];\n    updatedGroup[ind] = {\n      ...updatedGroup[ind],\n      checked: !updatedGroup[ind].checked\n    };\n    const updatedSchemaGroups = {\n      ...schemaGroups,\n      [schemaGroup]: updatedGroup\n    };\n    setSchemaGroups(updatedSchemaGroups);\n    propagateCheckedSchemas(updatedSchemaGroups);\n  };\n  const showSchemas = !fetching && !error;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    \"data-test\": dataTest\n  }, fetching && /*#__PURE__*/React.createElement(CircularLoader, {\n    dataTest: `${dataTest}-loading`\n  }), error && /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": `${dataTest}-error`\n  }, /*#__PURE__*/React.createElement(\"p\", null, i18n.t('Something went wrong when loading the schemas!')), /*#__PURE__*/React.createElement(\"p\", null, error.message)), showSchemas && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    small: true,\n    onClick: onSelectGeneric(true),\n    dataTest: `${dataTest}-select-all`\n  }, i18n.t('Select All')), /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    small: true,\n    onClick: onSelectGeneric(false),\n    dataTest: `${dataTest}-select-none`\n  }, i18n.t('Select None'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.formControl\n  }, schemaGroupOrder.map(groupKey => {\n    const label = schemaGroupLabels[groupKey];\n    return /*#__PURE__*/React.createElement(SchemaGroup, {\n      key: label,\n      label: label,\n      schemas: schemaGroups[groupKey],\n      toggleSchema: toggleSchema(groupKey)\n    });\n  })), (meta.touched || !meta.pristine) && meta.error && /*#__PURE__*/React.createElement(Help, {\n    error: true\n  }, meta.error)));\n};\nSchemas.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  excludeSchemas: PropTypes.object.isRequired,\n  meta: PropTypes.object.isRequired,\n  setCheckedSchemas: PropTypes.func.isRequired,\n  checkedByDefault: PropTypes.bool\n};\nexport { Schemas };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { ReactFinalForm } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Select } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta,\n  inputName,\n  ...rest\n}) => /*#__PURE__*/React.createElement(Select, _extends({\n  name: inputName,\n  meta: meta,\n  selected: value || undefined,\n  setValue: onChange\n}, rest));\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.any,\n    onChange: PropTypes.func\n  }).isRequired,\n  inputName: PropTypes.string.isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\nconst SelectField = ({\n  name,\n  ...rest\n}) => {\n  return /*#__PURE__*/React.createElement(Field, _extends({\n    component: Wrapper,\n    name: name,\n    inputName: name\n  }, rest));\n};\nSelectField.propTypes = {\n  name: PropTypes.string.isRequired\n};\nexport { SelectField };","// extracted by mini-css-extract-plugin\nexport default {\"sectionTitle\":\"MenuSectionHeader_sectionTitle__USxPJ\",\"label\":\"MenuSectionHeader_label__r2EFL\",\"icon\":\"MenuSectionHeader_icon__5Q6S4\"};","import { MenuSectionHeader as UIHeader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './MenuSectionHeader.module.css';\nconst MenuSectionHeader = ({\n  label,\n  children\n}) => /*#__PURE__*/React.createElement(UIHeader, {\n  className: styles.sectionTitle,\n  label: /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.label\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.icon\n  }, children), label),\n  hideDivider: true\n});\nMenuSectionHeader.propTypes = {\n  children: PropTypes.node.isRequired,\n  label: PropTypes.string.isRequired\n};\nexport { MenuSectionHeader };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { ExportIcon } from '../index.js';\nimport { MenuSectionHeader } from './MenuSectionHeader.js';\nconst ExportMenuSectionHeader = () => /*#__PURE__*/React.createElement(MenuSectionHeader, {\n  label: i18n.t('Export')\n}, /*#__PURE__*/React.createElement(ExportIcon, null));\nexport { ExportMenuSectionHeader };","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { ImportIcon } from '../index.js';\nimport { MenuSectionHeader } from './MenuSectionHeader.js';\nconst ImportMenuSectionHeader = () => /*#__PURE__*/React.createElement(MenuSectionHeader, {\n  label: i18n.t('Import')\n}, /*#__PURE__*/React.createElement(ImportIcon, null));\nexport { ImportMenuSectionHeader };","// extracted by mini-css-extract-plugin\nexport default {\"Menu\":\"Sidebar_Menu__gtpA0\",\"sidebarItem\":\"Sidebar_sidebarItem__gxB78\",\"sidebarItemActive\":\"Sidebar_sidebarItemActive__gx1KZ\",\"jobOverview\":\"Sidebar_jobOverview__G+3LG\"};","import i18n from '@dhis2/d2-i18n';\nimport { Divider, Menu, MenuItem } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { DataIcon, EventIcon, GeometryIcon, MetadataDependencyExportIcon, MetadataExportIcon, MetadataImportIcon, TEIIcon, TasksIcon } from '../index.js';\nimport { ExportMenuSectionHeader } from './ExportMenuSectionHeader.js';\nimport { ImportMenuSectionHeader } from './ImportMenuSectionHeader.js';\nimport styles from './Sidebar.module.css';\nconst dataImportPage = {\n  //  name: i18n.t('Data import'),\n  name: \"Spreadsheets Import\",\n  code: 'data-import',\n  icon: /*#__PURE__*/React.createElement(DataIcon, null),\n  path: '/import/data'\n};\nconst eventImportPage = {\n  //   name: i18n.t('Event import'),\n  name: \"Forms Data Import\",\n  code: 'event-import',\n  icon: /*#__PURE__*/React.createElement(EventIcon, null),\n  path: '/import/event'\n};\n/*\nconst eeImportPage = {\n    name: i18n.t('Earth Engine import'),\n    code: 'earthengine-import',\n    icon: <DataIcon />,\n    path: '/import/earthengine',\n}\n\nconst geometryImportPage = {\n    name: i18n.t('Org unit geometry import'),\n    code: 'geometry-import',\n    icon: <GeometryIcon />,\n    path: '/import/geometry',\n}\n*/\nconst metadataImportPage = {\n  name: i18n.t('Metadata import'),\n  code: 'metadata-import',\n  path: '/import/metadata',\n  icon: /*#__PURE__*/React.createElement(MetadataImportIcon, null)\n};\n/*\nconst teiImportPage = {\n    name: i18n.t('Tracked entity import'),\n    code: 'tei-import',\n    path: '/import/tei',\n    icon: <TEIIcon />,\n}\n*/\nconst dataExportPage = {\n  //   name: i18n.t('Data export'),\n  name: \"Spreadsheets Export\",\n  code: 'data-export',\n  path: '/export/data',\n  icon: /*#__PURE__*/React.createElement(DataIcon, null)\n};\nconst eventExportPage = {\n  //   name: i18n.t('Event export'),\n  name: \"Forms Data Export\",\n  code: 'event-export',\n  path: '/export/event',\n  icon: /*#__PURE__*/React.createElement(EventIcon, null)\n};\n/*\nconst metadataDependencyExportPage = {\n    name: i18n.t('Metadata dependency export'),\n    code: 'metadata-dependency-export',\n    path: '/export/metadata-dependency',\n    icon: <MetadataDependencyExportIcon />,\n}\n*/\nconst metadataExportPage = {\n  name: i18n.t('Metadata export'),\n  code: 'metadata-export',\n  path: '/export/metadata',\n  icon: /*#__PURE__*/React.createElement(MetadataExportIcon, null)\n};\n/*\nconst teiExportPage = {\n    name: i18n.t('Tracked entity export'),\n    code: 'tei-export',\n    path: '/export/tei',\n    icon: <TEIIcon />,\n}\n*/\nconst importPages = [dataImportPage, eventImportPage,\n// eeImportPage,\n// geometryImportPage,\nmetadataImportPage\n// teiImportPage,\n];\nconst exportPages = [dataExportPage, eventExportPage,\n// metadataDependencyExportPage,\nmetadataExportPage\n// teiExportPage,\n];\n/*\nconst jobOverviewPage = {\n    name: i18n.t('Job overview'),\n    code: 'job-overview',\n    path: '/utils/job-overview',\n    icon: <TasksIcon />,\n}\n*/\nconst SidebarItem = ({\n  name,\n  path,\n  code,\n  active,\n  className\n}) => {\n  const history = useHistory();\n  const navigateToPath = () => history.push(path);\n  const href = history.createHref({\n    pathname: path,\n    search: '',\n    hash: ''\n  });\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    active: active,\n    href: href,\n    onClick: navigateToPath,\n    label: name,\n    className: cx(className, {\n      [styles.sidebarItem]: !active,\n      [styles.sidebarItemActive]: active\n    }),\n    dataTest: `sidebar-link-${code}`\n  });\n};\nSidebarItem.propTypes = {\n  active: PropTypes.bool.isRequired,\n  code: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  className: PropTypes.string\n};\nconst Sidebar = () => {\n  const location = useLocation();\n  const pathname = location.pathname;\n  return /*#__PURE__*/React.createElement(Menu, {\n    className: styles.Menu\n  }, /*#__PURE__*/React.createElement(ImportMenuSectionHeader, null), importPages.map(({\n    icon,\n    name,\n    code,\n    path\n  }) => {\n    const active = pathname == path || pathname === '/import/gml' && path === '/import/geometry';\n    return /*#__PURE__*/React.createElement(SidebarItem, {\n      name: name,\n      path: path,\n      code: code,\n      icon: icon,\n      active: active,\n      key: path\n    });\n  }), /*#__PURE__*/React.createElement(ExportMenuSectionHeader, null), exportPages.map(({\n    icon,\n    name,\n    code,\n    path\n  }) => {\n    const active = pathname == path;\n    return /*#__PURE__*/React.createElement(SidebarItem, {\n      name: name,\n      path: path,\n      code: code,\n      icon: icon,\n      active: active,\n      key: path\n    });\n  }));\n};\nexport { Sidebar };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, Switch as SwitchUI } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { FormField } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst Wrapper = ({\n  input,\n  meta,\n  ...rest\n}) => /*#__PURE__*/React.createElement(SwitchUI, _extends({\n  input: input,\n  meta: meta,\n  label: input.value ? i18n.t('Yes') : i18n.t('No')\n}, rest));\nWrapper.propTypes = {\n  input: PropTypes.object.isRequired,\n  meta: PropTypes.object.isRequired\n};\nconst Switch = ({\n  name,\n  label,\n  help,\n  dataTest\n}) => {\n  return /*#__PURE__*/React.createElement(FormField, {\n    label: label,\n    dataTest: dataTest\n  }, /*#__PURE__*/React.createElement(Field, {\n    component: Wrapper,\n    name: name,\n    helpText: help,\n    dataTest: `${dataTest}-sf`\n  }));\n};\nSwitch.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  help: PropTypes.string\n};\nexport { Switch };","import PropTypes from 'prop-types';\nimport { useContext } from 'react';\nimport { UserContext } from '../../contexts/index.js';\nconst WithAuthority = ({\n  pred,\n  children\n}) => {\n  const user = useContext(UserContext);\n  if (!user) {\n    return null;\n  }\n  return pred(user.authorities) ? children : null;\n};\nWithAuthority.propTypes = {\n  children: PropTypes.node,\n  pred: PropTypes.func\n};\nexport { WithAuthority };","const dataSetQuery = {\n  dataSets: {\n    resource: 'dataSets',\n    params: {\n      fields: 'id,displayName',\n      paging: 'false'\n    }\n  }\n};\nconst programQuery = {\n  programs: {\n    resource: 'programs',\n    params: {\n      fields: 'id,displayName',\n      filter: 'programType:eq:WITH_REGISTRATION',\n      paging: 'false'\n    }\n  }\n};\nconst programWithEventsQuery = {\n  programs: {\n    resource: 'programs',\n    params: {\n      fields: 'id,displayName',\n      paging: 'false'\n    }\n  }\n};\nconst TETypeQuery = {\n  trackedEntityTypes: {\n    resource: 'trackedEntityTypes',\n    params: {\n      fields: 'id,displayName',\n      paging: 'false'\n    }\n  }\n};\nconst userQuery = {\n  users: {\n    resource: 'users',\n    params: {\n      fields: 'id,displayName',\n      paging: 'false'\n    }\n  }\n};\nconst geojsonAttributesQuery = {\n  attributes: {\n    resource: 'attributes',\n    params: {\n      fields: 'id,displayName',\n      filter: ['valueType:eq:GEOJSON', 'organisationUnitAttribute:eq:true'],\n      paging: 'false'\n    }\n  }\n};\nexport { dataSetQuery, programQuery, programWithEventsQuery, TETypeQuery, userQuery, geojsonAttributesQuery };","// extracted by mini-css-extract-plugin\nexport default {\"selectedLabel\":\"ResourcePicker_selectedLabel__RvQf3\"};","import { useDataQuery } from '@dhis2/app-runtime';\nimport { ReactFinalForm, SingleSelectFieldFF, Transfer, CircularLoader, Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { FormField } from '../index.js';\nimport { dataSetQuery, programQuery, TETypeQuery, userQuery, geojsonAttributesQuery, programWithEventsQuery } from './queries.js';\nimport styles from './ResourcePicker.module.css';\nimport { resourceTypes } from './resourceTypes.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst resourceToQuery = resourceType => {\n  if (resourceType == resourceTypes.DATASET) {\n    return {\n      resourceName: 'dataSets',\n      query: dataSetQuery\n    };\n  } else if (resourceType == resourceTypes.PROGRAM) {\n    return {\n      resourceName: 'programs',\n      query: programQuery\n    };\n  } else if (resourceType == resourceTypes.PROGRAM_WITH_EVENTS) {\n    return {\n      resourceName: 'programs',\n      query: programWithEventsQuery\n    };\n  } else if (resourceType == resourceTypes.TETYPE) {\n    return {\n      resourceName: 'trackedEntityTypes',\n      query: TETypeQuery\n    };\n  } else if (resourceType == resourceTypes.USER) {\n    return {\n      resourceName: 'users',\n      query: userQuery\n    };\n  } else if (resourceType == resourceTypes.GEOJSON_ATTRIBUTE) {\n    return {\n      resourceName: 'attributes',\n      query: geojsonAttributesQuery\n    };\n  }\n  return {\n    error: `Unkown resource type: ${resourceType}`\n  };\n};\nconst ResourcePicker = ({\n  label,\n  resourceType,\n  selected,\n  setSelected,\n  meta,\n  multiSelect,\n  withFilter,\n  autoSelectFirst,\n  dataTest,\n  listName,\n  filterLabel,\n  selectedLabel,\n  errorMessage\n}) => {\n  const [list, setList] = useState([]);\n  const [error, setError] = useState(undefined);\n  const {\n    error: resourceError,\n    resourceName,\n    query\n  } = resourceToQuery(resourceType);\n  const {\n    fetching,\n    called,\n    refetch\n  } = useDataQuery(query, {\n    onComplete: data => {\n      const elements = data[resourceName][resourceName];\n      const list = elements.map(({\n        id,\n        displayName\n      }) => ({\n        value: id,\n        label: displayName\n      }));\n      setList(list);\n      if (autoSelectFirst && list.length) {\n        setSelected({\n          selected: multiSelect ? [list[0].value] : list[0].value\n        });\n      }\n    },\n    onError: error => {\n      setError(error);\n      console.error(`ResourcePicker(${resourceName}) error: `, error);\n    },\n    lazy: true\n  });\n  useEffect(() => {\n    if (!resourceError) {\n      refetch();\n    }\n  }, [refetch, resourceError]);\n  if (resourceError) {\n    console.error(`ResourePicker: ${resourceError}`);\n    return null;\n  }\n  const showList = called && !fetching && !error && list.length > 0;\n  return /*#__PURE__*/React.createElement(FormField, {\n    label: label,\n    dataTest: dataTest\n  }, fetching && /*#__PURE__*/React.createElement(CircularLoader, {\n    dataTest: `${dataTest}-loading`\n  }), error && /*#__PURE__*/React.createElement(Help, {\n    error: true,\n    \"data-test\": `${dataTest}-error`\n  }, /*#__PURE__*/React.createElement(\"p\", null, errorMessage), /*#__PURE__*/React.createElement(\"p\", null, error.message)), showList && (multiSelect ? /*#__PURE__*/React.createElement(Transfer, {\n    name: listName,\n    label: filterLabel,\n    selected: selected,\n    onChange: setSelected,\n    options: list,\n    filterable: withFilter,\n    filterPlaceholder: filterLabel,\n    rightHeader: /*#__PURE__*/React.createElement(\"p\", {\n      className: styles.selectedLabel\n    }, selectedLabel),\n    dataTest: `${dataTest}-list`,\n    loading: fetching\n  }) : /*#__PURE__*/React.createElement(Field, {\n    component: SingleSelectFieldFF,\n    name: listName,\n    options: list,\n    filterable: withFilter,\n    dataTest: `${dataTest}-select`,\n    loading: fetching\n  })), (meta.touched || !meta.pristine) && meta.error && /*#__PURE__*/React.createElement(Help, {\n    error: true\n  }, meta.error));\n};\nResourcePicker.propTypes = {\n  dataTest: PropTypes.string.isRequired,\n  errorMessage: PropTypes.string.isRequired,\n  filterLabel: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  listName: PropTypes.string.isRequired,\n  meta: PropTypes.object.isRequired,\n  resourceType: PropTypes.number.isRequired,\n  selected: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]).isRequired,\n  selectedLabel: PropTypes.string.isRequired,\n  setSelected: PropTypes.func.isRequired,\n  autoSelectFirst: PropTypes.bool,\n  multiSelect: PropTypes.bool,\n  withFilter: PropTypes.bool\n};\nResourcePicker.defaultProps = {\n  multiSelect: true,\n  withFilter: true\n};\nexport { ResourcePicker };","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport { ReactFinalForm } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { ResourcePicker } from '../index.js';\nconst {\n  Field\n} = ReactFinalForm;\nconst Wrapper = ({\n  input: {\n    value,\n    onChange\n  },\n  meta,\n  ...rest\n}) => /*#__PURE__*/React.createElement(ResourcePicker, _extends({\n  meta: meta,\n  selected: value,\n  setSelected: ({\n    selected\n  }) => onChange(selected)\n}, rest));\nWrapper.propTypes = {\n  input: PropTypes.shape({\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]).isRequired,\n    onChange: PropTypes.func\n  }).isRequired,\n  meta: PropTypes.shape({\n    error: PropTypes.string,\n    pristine: PropTypes.bool,\n    touched: PropTypes.bool\n  }).isRequired\n};\nconst ResourcePickerField = ({\n  name,\n  validator,\n  ...rest\n}) => {\n  return /*#__PURE__*/React.createElement(Field, _extends({\n    component: Wrapper,\n    name: name,\n    validate: validator\n  }, rest));\n};\nResourcePickerField.propTypes = {\n  name: PropTypes.string.isRequired,\n  validator: PropTypes.func\n};\nexport { ResourcePickerField };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"BasicOptions_container__xZ42W\",\"label\":\"BasicOptions_label__Wz81J\",\"header\":\"BasicOptions_header__6GAxP\"};","import i18n from '@dhis2/d2-i18n';\nimport { Divider } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './BasicOptions.module.css';\nconst LABEL = i18n.t('Basic options');\nconst BasicOptions = ({\n  children\n}) => {\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: styles.header\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.label\n  }, LABEL), /*#__PURE__*/React.createElement(Divider, null)), children);\n};\nBasicOptions.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired\n};\nexport { BasicOptions };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"SchemeContainer_container__Q3Nx5\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './SchemeContainer.module.css';\nconst SchemeContainer = ({\n  children\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.container\n}, children);\nSchemeContainer.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport { SchemeContainer };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"StyledField_container__2UMbS\"};","import { ReactFinalForm } from '@dhis2/ui';\nimport React from 'react';\nimport styles from './StyledField.module.css';\nconst {\n  Field\n} = ReactFinalForm;\nconst StyledField = props => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.container\n}, /*#__PURE__*/React.createElement(Field, props));\nexport { StyledField };","// extracted by mini-css-extract-plugin\nexport default {\"span\":\"Tooltip_span__Yrzwt\",\"disabled\":\"Tooltip_disabled__aU5RZ\"};","import { Tooltip as UiTooltip } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './Tooltip.module.css';\nconst Tooltip = ({\n  disabled,\n  content,\n  children\n}) => /*#__PURE__*/React.createElement(UiTooltip, {\n  content: content,\n  openDelay: 200,\n  closeDelay: 100,\n  placement: \"right\"\n}, ({\n  onMouseOver,\n  onMouseOut,\n  ref\n}) => /*#__PURE__*/React.createElement(\"span\", {\n  className: cx(styles.span, disabled && styles.disabled),\n  onMouseOver: () => disabled && onMouseOver(),\n  onMouseOut: () => disabled && onMouseOut(),\n  ref: ref\n}, children));\nTooltip.propTypes = {\n  children: PropTypes.node,\n  content: PropTypes.string,\n  disabled: PropTypes.bool\n};\nexport { Tooltip };","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ValidationSummary_container__KZaFF\",\"errors\":\"ValidationSummary_errors__E+-eH\"};","import i18n from '@dhis2/d2-i18n';\nimport { ReactFinalForm, NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './ValidationSummary.module.css';\nconst {\n  useFormState\n} = ReactFinalForm;\nconst transformErrors = errors => Object.entries(errors).map(([key, value]) => ({\n  name: key,\n  label: value\n})).filter(error => error.label);\nconst Error = ({\n  label\n}) => /*#__PURE__*/React.createElement(\"li\", null, label);\nError.propTypes = {\n  label: PropTypes.string.isRequired\n};\nconst ValidationSummary = () => {\n  const {\n    errors,\n    submitFailed\n  } = useFormState();\n  const errorList = transformErrors(errors);\n  if (!submitFailed || !errorList.length) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(NoticeBox, {\n    title: i18n.t('There are errors on this page'),\n    className: styles.container,\n    error: true\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.errors\n  }, errorList.map(({\n    name,\n    label\n  }) => /*#__PURE__*/React.createElement(Error, {\n    key: name,\n    label: label\n  }))));\n};\nexport { ValidationSummary };","import i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport React from 'react';\nconst mergeOperation = 'REPLACE';\nconst MERGE_NOTICE_TITLE = i18n.t('All existing property values will be replaced');\nconst MERGE_NOTICE_TEXT = i18n.t('Values will be overwritten, even if the new value is null');\nconst MergeOperationNotice = () => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: '80%'\n    }\n  }, /*#__PURE__*/React.createElement(NoticeBox, {\n    dataTest: 'merge-operation-notice',\n    title: MERGE_NOTICE_TITLE\n  }, MERGE_NOTICE_TEXT));\n};\nexport { mergeOperation, MergeOperationNotice };","// extracted by mini-css-extract-plugin\nexport default {\"overlay\":\"ImportProgress_overlay__bt3mc\",\"container\":\"ImportProgress_container__QBbKl\",\"header\":\"ImportProgress_header__f-qnp\",\"title\":\"ImportProgress_title__oC3V1\",\"tags\":\"ImportProgress_tags__AwsN8\",\"progressSection\":\"ImportProgress_progressSection__KdOdO\",\"progressBar\":\"ImportProgress_progressBar__q5wid\",\"progressText\":\"ImportProgress_progressText__+De8U\",\"processingIndicator\":\"ImportProgress_processingIndicator__LA2nX\",\"processingText\":\"ImportProgress_processingText__hBbPy\",\"completeIndicator\":\"ImportProgress_completeIndicator__RwR4H\",\"successIcon\":\"ImportProgress_successIcon__0UGrz\",\"errorIcon\":\"ImportProgress_errorIcon__+gsLu\",\"success\":\"ImportProgress_success__KyPdR\",\"scaleIn\":\"ImportProgress_scaleIn__fIr+3\",\"error\":\"ImportProgress_error__vwR0w\",\"messageSection\":\"ImportProgress_messageSection__B7W7f\",\"message\":\"ImportProgress_message__2QLJd\",\"errorMessage\":\"ImportProgress_errorMessage__QGclf\",\"eventsSection\":\"ImportProgress_eventsSection__bntps\",\"eventsTitle\":\"ImportProgress_eventsTitle__fTloX\",\"eventsList\":\"ImportProgress_eventsList__WcvPo\",\"eventItem\":\"ImportProgress_eventItem__eSr0j\",\"eventTime\":\"ImportProgress_eventTime__-VZgX\",\"eventText\":\"ImportProgress_eventText__KaZvC\",\"errorEvent\":\"ImportProgress_errorEvent__j1B+8\"};","import i18n from '@dhis2/d2-i18n';\nimport { LinearLoader, CircularLoader, Tag } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './ImportProgress.module.css';\nconst PHASE_UPLOAD = 'upload';\nconst PHASE_PROCESSING = 'processing';\nconst PHASE_COMPLETE = 'complete';\nconst ImportProgress = ({\n  progress = 0,\n  message = '',\n  phase = PHASE_UPLOAD,\n  task = null,\n  visible = false\n}) => {\n  var _task$events;\n  if (!visible) {\n    return null;\n  }\n  const isUploading = phase === PHASE_UPLOAD && progress > 0;\n  const isProcessing = phase === PHASE_PROCESSING;\n  const isComplete = phase === PHASE_COMPLETE;\n\n  // Get latest event message from task if available\n  const latestEvent = task === null || task === void 0 ? void 0 : (_task$events = task.events) === null || _task$events === void 0 ? void 0 : _task$events[task.events.length - 1];\n  const displayMessage = message || (latestEvent === null || latestEvent === void 0 ? void 0 : latestEvent.text) || '';\n\n  // Determine status\n  const hasError = task === null || task === void 0 ? void 0 : task.error;\n  const isTaskComplete = task === null || task === void 0 ? void 0 : task.completed;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.overlay\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.header\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: styles.title\n  }, isComplete ? i18n.t('Import Complete') : isProcessing ? i18n.t('Processing Import') : i18n.t('Uploading File')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tags\n  }, isTaskComplete ? hasError ? /*#__PURE__*/React.createElement(Tag, {\n    negative: true,\n    bold: true\n  }, i18n.t('Error')) : /*#__PURE__*/React.createElement(Tag, {\n    positive: true\n  }, i18n.t('Completed')) : /*#__PURE__*/React.createElement(Tag, {\n    neutral: true\n  }, i18n.t('In progress')))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.progressSection\n  }, isUploading && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.progressBar\n  }, /*#__PURE__*/React.createElement(LinearLoader, {\n    amount: progress\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.progressText\n  }, i18n.t('Uploading: {{progress}}%', {\n    progress: Math.round(progress)\n  }))), isProcessing && !isTaskComplete && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.processingIndicator\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.processingText\n  }, i18n.t('Server is processing your data...'))), isComplete && /*#__PURE__*/React.createElement(\"div\", {\n    className: `${styles.completeIndicator} ${hasError ? styles.error : styles.success}`\n  }, hasError ? /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.errorIcon\n  }, \"\\u2715\") : /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.successIcon\n  }, \"\\u2713\"))), displayMessage && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.messageSection\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${styles.message} ${hasError ? styles.errorMessage : ''}`\n  }, displayMessage)), (task === null || task === void 0 ? void 0 : task.events) && task.events.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.eventsSection\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.eventsTitle\n  }, i18n.t('Progress Log')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.eventsList\n  }, task.events.slice(-5).map((event, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: event.id || index,\n    className: `${styles.eventItem} ${event.level === 'ERROR' ? styles.errorEvent : ''}`\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.eventTime\n  }, event.date ? new Date(event.date).toLocaleTimeString() : ''), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.eventText\n  }, event.text)))))));\n};\nImportProgress.propTypes = {\n  message: PropTypes.string,\n  phase: PropTypes.oneOf([PHASE_UPLOAD, PHASE_PROCESSING, PHASE_COMPLETE]),\n  progress: PropTypes.number,\n  task: PropTypes.shape({\n    completed: PropTypes.bool,\n    error: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n    events: PropTypes.arrayOf(PropTypes.shape({\n      date: PropTypes.oneOfType([PropTypes.instanceOf(Date), PropTypes.string]),\n      id: PropTypes.string,\n      level: PropTypes.string,\n      text: PropTypes.string\n    }))\n  }),\n  visible: PropTypes.bool\n};\nexport { ImportProgress, PHASE_UPLOAD, PHASE_PROCESSING, PHASE_COMPLETE };","import i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, ButtonStrip, Button } from '@dhis2/ui';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nconst DataElementConfirmationModal = ({\n  missingDataElements,\n  onConfirm,\n  onCancel\n}) => {\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onCancel,\n    small: true\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Missing Data Elements Detected')), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t('The following CSV columns do not match any existing data elements in the program:')), missingDataElements.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: '16px',\n      maxHeight: '300px',\n      overflowY: 'auto'\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    style: {\n      margin: 0,\n      paddingLeft: '20px'\n    }\n  }, missingDataElements.map((element, index) => /*#__PURE__*/React.createElement(\"li\", {\n    key: index,\n    style: {\n      marginBottom: '4px'\n    }\n  }, typeof element === 'string' ? element : element.name)))), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      marginTop: '16px',\n      color: '#666'\n    }\n  }, i18n.t('Do you want to create these as new data elements and add them to the program? They will be created with TEXT value type.'))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onCancel\n  }, i18n.t('Cancel Import')), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: onConfirm\n  }, i18n.t('Create and Continue')))));\n};\nDataElementConfirmationModal.propTypes = {\n  missingDataElements: PropTypes.arrayOf(PropTypes.string).isRequired,\n  onConfirm: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired\n};\nexport { DataElementConfirmationModal };","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport es_419Translations from './es_419/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport neTranslations from './ne/translations.json';\nimport nlTranslations from './nl/translations.json';\nimport orTranslations from './or/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport roTranslations from './ro/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport siTranslations from './si/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport uz_UZ_CyrlTranslations from './uz_UZ_Cyrl/translations.json';\nimport uz_UZ_LatnTranslations from './uz_UZ_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('es_419', namespace, es_419Translations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('ne', namespace, neTranslations);\ni18n.addResources('nl', namespace, nlTranslations);\ni18n.addResources('or', namespace, orTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ro', namespace, roTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('si', namespace, siTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('uz_UZ_Cyrl', namespace, uz_UZ_CyrlTranslations);\ni18n.addResources('uz_UZ_Latn', namespace, uz_UZ_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import { CssVariables, CssReset, CircularLoader, ComponentCover } from '@dhis2/ui';\nimport React from 'react';\nimport { HashRouter } from 'react-router-dom';\nimport styles from './App.module.css';\nimport { Sidebar, Router } from './components/index.js';\nimport { UserContext, TaskContext } from './contexts/index.js';\nimport { useUser, useTasks } from './hooks/index.js';\nimport i18n from './locales/index.js';\nconst App = () => {\n  const {\n    tasks,\n    addTask,\n    jobOverview,\n    updateJobOverview\n  } = useTasks();\n  const {\n    loading,\n    error,\n    user\n  } = useUser();\n  const showApp = !loading && !error;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CssReset, null), /*#__PURE__*/React.createElement(CssVariables, {\n    spacers: true,\n    colors: true\n  }), loading && /*#__PURE__*/React.createElement(ComponentCover, {\n    dataTest: \"app-screen-cover\"\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    dataTest: \"app-loader\"\n  })), error && /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"app-error\"\n  }, /*#__PURE__*/React.createElement(\"p\", null, i18n.t('Something went wrong when loading the current user!')), /*#__PURE__*/React.createElement(\"p\", null, error.message)), showApp && /*#__PURE__*/React.createElement(HashRouter, null, /*#__PURE__*/React.createElement(UserContext.Provider, {\n    value: user\n  }, /*#__PURE__*/React.createElement(TaskContext.Provider, {\n    value: {\n      tasks,\n      addTask,\n      jobOverview,\n      updateJobOverview\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.sidebar\n  }, /*#__PURE__*/React.createElement(Sidebar, null)), /*#__PURE__*/React.createElement(\"main\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(Router, null)))))));\n};\nexport default App;","// Cache version - increment this when you want to force a cache clear\nconst CACHE_VERSION = '1';\nconst VERSION_PARAM = 'cv';\nasync function clearCaches() {\n  if ('caches' in window) {\n    try {\n      const cacheNames = await caches.keys();\n      const cachePromises = cacheNames.filter(name => name.includes('import-export-app')).map(name => caches.delete(name));\n      await Promise.all(cachePromises);\n      console.log('Caches cleared');\n    } catch (error) {\n      console.warn('Error clearing caches:', error);\n    }\n  }\n}\nasync function unregisterServiceWorkers() {\n  if ('serviceWorker' in navigator) {\n    try {\n      const registrations = await navigator.serviceWorker.getRegistrations();\n      for (const registration of registrations) {\n        await registration.unregister();\n      }\n      console.log('Service workers unregistered');\n    } catch (error) {\n      console.warn('Error unregistering service workers:', error);\n    }\n  }\n}\nfunction clearStorages() {\n  try {\n    // Only clear storage items that might cause conflicts\n    const clearKeys = [];\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key && key.startsWith('dhis2')) {\n        clearKeys.push(key);\n      }\n    }\n    clearKeys.forEach(key => localStorage.removeItem(key));\n\n    // Clear session storage\n    sessionStorage.clear();\n  } catch (error) {\n    console.warn('Error clearing storage:', error);\n  }\n}\n\n// Main initialization\nexport async function initialize() {\n  // Skip in development\n  if (process.env.NODE_ENV !== 'production') {\n    return;\n  }\n  const url = new URL(window.location.href);\n  const currentVersion = url.searchParams.get(VERSION_PARAM);\n\n  // If version in URL doesn't match current version, update it\n  if (currentVersion !== CACHE_VERSION) {\n    // Store the current scroll position\n    sessionStorage.setItem('scrollPosition', window.scrollY);\n\n    // Update the version in URL without reloading if it's the first time\n    if (!currentVersion) {\n      url.searchParams.set(VERSION_PARAM, CACHE_VERSION);\n      window.history.replaceState({}, '', url);\n    } else {\n      // If version exists but doesn't match, do a hard reload\n      url.searchParams.set(VERSION_PARAM, CACHE_VERSION);\n      window.location.replace(url.toString());\n      return;\n    }\n  }\n\n  // Clear caches in the background if needed\n  if (!sessionStorage.getItem(`cacheCleared_${CACHE_VERSION}`)) {\n    sessionStorage.setItem(`cacheCleared_${CACHE_VERSION}`, 'true');\n    Promise.all([clearCaches(), unregisterServiceWorkers(), new Promise(resolve => {\n      setTimeout(() => {\n        clearStorages();\n        resolve();\n      }, 1000);\n    })]).catch(console.error);\n  }\n\n  // If we get here, we're on the correct version\n  console.log('Cache buster: Running version', CACHE_VERSION);\n}\nexport default {\n  initialize,\n  CACHE_VERSION,\n  VERSION_PARAM\n};","import { UserOutlined, SettingOutlined, LogoutOutlined, FormOutlined, DownloadOutlined, FileTextOutlined, AreaChartOutlined, MonitorOutlined, ImportOutlined, TeamOutlined, CheckCircleOutlined, BarsOutlined, MenuOutlined, EyeOutlined, ApartmentOutlined, HomeOutlined } from '@ant-design/icons';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport { Button, Layout, Menu, Dropdown, Avatar } from 'antd';\nimport React, { useState, useEffect } from 'react';\nimport App from './App.js';\nimport classes from './App.module.css';\nconst {\n  Sider,\n  Content\n} = Layout;\nconst ME_QUERY = {\n  me: {\n    resource: 'me',\n    params: {\n      fields: ['firstName', 'surname', 'email']\n    }\n  }\n};\nimport cacheBuster from './utils/cacheBuster';\nconst Main = () => {\n  // Initialize cache buster when component mounts\n  useEffect(() => {\n    cacheBuster.initialize();\n  }, []);\n  const [collapsed, setCollapsed] = useState(false);\n  const [openKeys, setOpenKeys] = useState(['3']);\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(ME_QUERY);\n  if (loading || error) return null;\n  const {\n    firstName,\n    surname,\n    email: userEmail\n  } = data.me;\n  const fullName = `${firstName} ${surname}`;\n  const initials = `${(firstName === null || firstName === void 0 ? void 0 : firstName[0]) || ''}${(surname === null || surname === void 0 ? void 0 : surname[0]) || ''}`;\n  const profileMenu = /*#__PURE__*/React.createElement(Menu, null, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"profile-settings\",\n    icon: /*#__PURE__*/React.createElement(SettingOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-user-profile/#/profile\"\n  }, \"Settings\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"account\",\n    icon: /*#__PURE__*/React.createElement(UserOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-user-profile/#/account\"\n  }, \"Account\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"logout\",\n    icon: /*#__PURE__*/React.createElement(LogoutOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/dhis-web-commons-security/logout.action\"\n  }, \"Logout\")));\n  const dataCreationItems = [{\n    key: '2.1',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/list/organisationUnitSection/organisationUnit\"\n    }, \"Thematic Areas\")\n  }, {\n    key: '2.2',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/list/programSection/program\"\n    }, \"Projects\")\n  }, {\n    key: '2.3',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/list/dataElementSection/dataElement\"\n    }, \"Data Elements\")\n  }, {\n    key: '2.4',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/list/dataSetSection/dataSet\"\n    }, \"Data Sets\")\n  }];\n  const adminCentreItems = [{\n    key: '5.1',\n    icon: /*#__PURE__*/React.createElement(MonitorOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-usage-analytics/\"\n    }, \"Usage Analytics\")\n  }, {\n    key: '5.2',\n    icon: /*#__PURE__*/React.createElement(TeamOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-user/\"\n    }, \"User Management\")\n  }, {\n    key: '5.3',\n    icon: /*#__PURE__*/React.createElement(SettingOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-settings/\"\n    }, \"System Settings\")\n  }, {\n    key: '5.4',\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null),\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-maintenance/#/organisationUnitSection/hierarchy\"\n    }, \"Hierarchy Operations\")\n  }];\n  const dataCollectionItems = [{\n    key: '3.1',\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-capture/\"\n    }, \"Forms\"),\n    icon: /*#__PURE__*/React.createElement(FormOutlined, null)\n  }, {\n    key: '3.2',\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-aggregate-data-entry/\"\n    }, \"Spreadsheets\"),\n    icon: /*#__PURE__*/React.createElement(FileTextOutlined, null)\n  }, {\n    key: '3.3',\n    label: /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/sims-web-import-export/\"\n    }, \"Data Import & Export\"),\n    icon: /*#__PURE__*/React.createElement(DownloadOutlined, null)\n  }];\n  const onOpenChange = keys => {\n    const rootSubmenuKeys = ['2', '5']; // Top-level submenu keys\n    const latestOpenKey = keys.find(key => !openKeys.includes(key));\n    if (rootSubmenuKeys.includes(latestOpenKey)) {\n      setOpenKeys(latestOpenKey ? [latestOpenKey] : []);\n    } else {\n      setOpenKeys(keys);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layout, {\n    style: {\n      height: '100vh'\n    }\n  }, /*#__PURE__*/React.createElement(Sider, {\n    trigger: null,\n    collapsible: true,\n    width: \"20%\",\n    collapsedWidth: 80,\n    collapsed: collapsed,\n    onCollapse: collapsedState => setCollapsed(collapsedState),\n    breakpoint: \"lg\",\n    onBreakpoint: broken => setCollapsed(broken),\n    className: classes.sidebar,\n    style: {\n      padding: '10px 0',\n      transition: 'width 0.2s',\n      background: '#003D8F',\n      borderRight: '1px solid #d9d9d9',\n      overflow: 'hidden'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      background: '#003D8F',\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      gap: '10px',\n      flexShrink: 0\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.logo,\n    style: {\n      flexDirection: collapsed && 'column-reverse'\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"text\",\n    className: \"\",\n    icon: /*#__PURE__*/React.createElement(MenuOutlined, {\n      fontSize: \"medium\"\n    }),\n    onClick: () => setCollapsed(!collapsed),\n    style: {\n      width: '16px',\n      height: '16px',\n      color: '#fff'\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"img\", {\n    src: process.env.PUBLIC_URL + \"/sims-sidebar-logo.png\",\n    alt: \"SIMS\",\n    style: {\n      width: collapsed ? '30px' : '40px',\n      height: collapsed ? '30px' : '40px',\n      objectFit: 'cover',\n      transition: 'all 0.2s',\n      filter: \"brightness(0) invert(1)\"\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      overflowY: 'auto',\n      overflowX: 'hidden',\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(Menu, {\n    selectedKeys: ['3.3'],\n    openKeys: openKeys,\n    onOpenChange: onOpenChange,\n    style: {\n      height: '100%',\n      overflowY: 'auto'\n    },\n    className: classes.menu,\n    mode: \"inline\",\n    inlineCollapsed: collapsed\n  }, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"1\",\n    icon: /*#__PURE__*/React.createElement(HomeOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-app/\"\n  }, \"Home\")), /*#__PURE__*/React.createElement(Menu.Divider, null), /*#__PURE__*/React.createElement(Menu.SubMenu, {\n    key: \"2\",\n    icon: /*#__PURE__*/React.createElement(CheckCircleOutlined, null),\n    title: \"Activation\"\n  }, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.1\",\n    title: \"Thematic Areas\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/organisationUnitSection/organisationUnit\"\n  }, \"Thematic Areas\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.2\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/organisationUnitSection/programsHierarchy\"\n  }, \"Programs\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.3\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/programSection/program\"\n  }, \"Projects\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.4\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/dataElementSection/dataElement\"\n  }, \"Data Elements\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"2.5\",\n    icon: /*#__PURE__*/React.createElement(BarsOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-maintenance/#/list/dataSetSection/dataSet\"\n  }, \"Data Sets\"))), /*#__PURE__*/React.createElement(Menu.Divider, null), /*#__PURE__*/React.createElement(Menu.SubMenu, {\n    key: '3',\n    icon: /*#__PURE__*/React.createElement(ImportOutlined, null),\n    title: \"Data Collection\"\n  }, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"3.1\",\n    icon: /*#__PURE__*/React.createElement(FormOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-capture/\"\n  }, \"Forms\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"3.2\",\n    icon: /*#__PURE__*/React.createElement(FileTextOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-aggregate-data-entry/\"\n  }, \"Spreadsheets\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"3.3\",\n    icon: /*#__PURE__*/React.createElement(DownloadOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-import-export/\"\n  }, \"Data Import & Export\"))), /*#__PURE__*/React.createElement(Menu.Divider, null), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"4\",\n    icon: /*#__PURE__*/React.createElement(AreaChartOutlined, null)\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sims-web-dashboard/\"\n  }, \"Visualization\")), /*#__PURE__*/React.createElement(Menu.Divider, null), /*#__PURE__*/React.createElement(Menu.SubMenu, {\n    key: '5',\n    icon: /*#__PURE__*/React.createElement(UserOutlined, null),\n    title: \"Admin Centre\",\n    style: {\n      marginTop: 'auto'\n    }\n  }, adminCentreItems.map(item => /*#__PURE__*/React.createElement(Menu.Item, {\n    key: item.key,\n    icon: item.icon\n  }, item.label))))), /*#__PURE__*/React.createElement(\"div\", null, profileMenu))), /*#__PURE__*/React.createElement(Layout, {\n    style: {\n      padding: 15,\n      height: '100vh'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundColor: '#F9FAFB',\n      borderRadius: '8px',\n      padding: '10px 16px'\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      gap: '12px'\n    }\n  }, /*#__PURE__*/React.createElement(ImportOutlined, {\n    style: {\n      fontSize: 16,\n      color: '#5DA9E9'\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    className: classes.heading\n  }, \"Import / Export\")), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: '13px',\n      marginTop: 4,\n      color: '#606060'\n    }\n  }, \"Upload or export data elements, programs, and datasets with ease.\")), /*#__PURE__*/React.createElement(Content, {\n    style: {\n      margin: '16px 0',\n      display: 'flex',\n      flexDirection: 'column',\n      padding: '16px'\n    }\n  }, /*#__PURE__*/React.createElement(App, null))));\n};\nexport default Main;","import i18n from '@dhis2/d2-i18n';\nimport { getUploadXHR } from './xhr.js';\nconst trimString = (length, string) => string.length > length ? string.substring(0, length - 3) + '...' : string;\nconst pathToId = path => {\n  const pathSplit = path.split('/');\n  const orgId = pathSplit[pathSplit.length - 1];\n  return orgId;\n};\nconst jsDateToISO8601 = date => `${date.getFullYear().toString()}-${(date.getMonth() + 1).toString().padStart(2, 0)}-${date.getDate().toString().padStart(2, 0)}`;\nconst jsDateToString = date => `${jsDateToISO8601(date)} ${date.getHours().toString().padStart(2, 0)}:${date.getMinutes().toString().padStart(2, 0)}:${date.getSeconds().toString().padStart(2, 0)}\n`;\n// some parameters take the long version of the compression type\nconst compressionToName = compression => {\n  if (compression === 'gz') {\n    return 'gzip';\n  }\n  return compression;\n};\nconst fileFormatToFileExtension = format => {\n  if (format === 'adx+xml') {\n    return 'xml';\n  }\n  return format;\n};\nconst fetchAttributes = async (apiBaseUrl, attribute) => {\n  const fetcher = url => fetch(url, {\n    credentials: 'include'\n  }).then(resp => {\n    if (resp.status >= 200 && resp.status < 300) {\n      return Promise.resolve(resp.json());\n    } else {\n      throw resp;\n    }\n  }).catch(resp => {\n    const error = new Error(resp.statusText || resp.status);\n    console.error(`fetchAttributes ${attribute} fetch error: `, error);\n    return Promise.reject(error);\n  });\n  const fields = 'id,displayName';\n  const filters = `unique:eq:true&filter=${attribute}:eq:true`;\n  const url = `${apiBaseUrl}attributes.json?paging=false&fields=${fields}&filter=${filters}`;\n  const json = await fetcher(url).catch(error => Promise.reject(error));\n  return json.attributes.map(({\n    id,\n    displayName\n  }) => ({\n    value: `ATTRIBUTE:${id}`,\n    label: displayName\n  }));\n};\nexport const genericErrorMessage = i18n.t('An unknown error occurred. Please try again later');\nconst errorGenerator = setProgress => message => {\n  const timestamp = new Date().getTime();\n  setProgress(0);\n  return {\n    id: `xhr-${timestamp}`,\n    critical: true,\n    message: message ? message : genericErrorMessage\n  };\n};\nconst uploadFile = ({\n  url,\n  file,\n  format,\n  type,\n  isAsync,\n  setProgress,\n  addEntry\n}) => {\n  setProgress(1);\n  const errF = errorGenerator(setProgress);\n  return new Promise((resolve, reject) => {\n    try {\n      const xhr = getUploadXHR({\n        url,\n        upload: file,\n        type,\n        onResponse: response => {\n          const {\n            error,\n            id,\n            msg,\n            typeReports\n          } = response;\n          let entry;\n          if (!isAsync) {\n            // we are done\n            entry = {\n              id: new Date().getTime(),\n              level: 'INFO',\n              created: new Date(),\n              lastUpdated: new Date(),\n              completed: true,\n              events: [msg],\n              summary: typeReports,\n              error: error,\n              importType: type\n            };\n          } else if (error && msg) {\n            // error but we have a message\n            entry = {\n              id: new Date().getTime(),\n              level: 'ERROR',\n              created: new Date(),\n              lastUpdated: new Date(),\n              completed: true,\n              events: [msg],\n              summary: typeReports,\n              error: true,\n              importType: type\n            };\n          } else if (error) {\n            // error with no message\n            entry = {\n              id: new Date().getTime(),\n              level: 'ERROR',\n              created: new Date(),\n              lastUpdated: new Date(),\n              completed: true,\n              summary: undefined,\n              error: true,\n              importType: type\n            };\n          } else {\n            // success\n            entry = {\n              id: id,\n              level: 'INFO',\n              created: new Date(),\n              lastUpdated: new Date(),\n              completed: false,\n              events: [{\n                ...msg,\n                date: new Date()\n              }],\n              // this is a workaround for the initial message date coming as invalid\n\n              summary: undefined,\n              error: false,\n              importType: type\n            };\n          }\n          addEntry(entry.id, entry);\n          if (error) {\n            reject(errF(msg && msg.text));\n          }\n          setProgress(0);\n          resolve({});\n        },\n        onError: ev => {\n          let message;\n          try {\n            const response = JSON.parse(ev.target.response);\n            message = response.message;\n          } catch (e2) {\n            message = ev;\n          }\n          console.error('sendFile error', message);\n          reject(errF(message));\n        },\n        setProgress,\n        format\n      });\n      xhr.send(file);\n    } catch (e) {\n      // xhr.send can throw an exception\n      reject(errorGenerator(e));\n    }\n  });\n};\n\n// call stub function if available\nconst locationAssign = url => {\n  if (window.locationAssign) {\n    window.locationAssign(url);\n  } else {\n    try {\n      const downloadUrl = url.startsWith('..') ? new URL(url, document.baseURI).href : url;\n      const urlFilePart = new URL(downloadUrl).pathname.split('/').pop();\n      const [, filename] = urlFilePart.match(/(^[^.]+)(\\..+$)/);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = filename;\n      link.target = '_blank';\n      link.click();\n      return link;\n    } catch (err) {\n      console.error(err);\n      window.open(url, '_blank');\n    }\n  }\n};\nconst getPrevJobDetails = (query, tasks) => {\n  if (!query || !query.id) {\n    return {};\n  }\n  const job = tasks[query.id];\n  if (!job) {\n    return {};\n  }\n  return job.jobDetails;\n};\nconst getInitialBoolValue = (prevValue, defaultValue) => {\n  if (prevValue === null || prevValue === undefined) {\n    return defaultValue;\n  }\n  return prevValue;\n};\nexport { fetchAttributes, getPrevJobDetails, getInitialBoolValue, locationAssign, jsDateToISO8601, jsDateToString, pathToId, trimString, uploadFile, compressionToName, fileFormatToFileExtension };","const mapping = {\n  json: 'application/json',\n  xml: 'application/xml',\n  csv: 'application/csv',\n  gml: 'application/xml',\n  geojson: 'application/json',\n  adx: 'application/adx+xml',\n  pdf: 'application/pdf'\n};\nexport const getMimeType = format => mapping[format] || null;","import { getMimeType } from './mime.js';\nconst getUploadXHR = ({\n  url,\n  upload,\n  type,\n  onResponse,\n  onError,\n  setProgress,\n  format\n}) => {\n  const xhr = new XMLHttpRequest();\n  const contentType = getMimeType(format);\n  xhr.withCredentials = true;\n  xhr.open('POST', url, true);\n  xhr.setRequestHeader('Content-Type', contentType);\n  xhr.setRequestHeader('Content-Disposition', 'attachment filename=\"' + upload.name + '\"');\n  xhr.onreadystatechange = onReadyStateChange({\n    xhr,\n    type,\n    onResponse,\n    onError\n  });\n  xhr.upload.onprogress = onProgress(setProgress);\n  return xhr;\n};\nconst onReadyStateChange = ({\n  xhr,\n  type,\n  onResponse,\n  onError\n}) => {\n  return e => {\n    const status = Math.floor(xhr.status / 100);\n    if (xhr.readyState === 4 && status === 2) {\n      try {\n        const data = JSON.parse(xhr.responseText);\n        const idAndMsg = extractIdAndMessage(data);\n        onResponse({\n          ...idAndMsg,\n          type: type\n        });\n      } catch (parseError) {\n        onError(parseError);\n      }\n    } else if (xhr.readyState === 4) {\n      onError(e);\n    }\n  };\n};\nexport const extractIdAndMessage = data => {\n  const {\n    message,\n    status,\n    typeReports,\n    response\n  } = data;\n  if (status && status === 'ERROR') {\n    if (Array.isArray(typeReports) && Array.isArray(typeReports[0].objectReports) && Array.isArray(typeReports[0].objectReports[0].errorReports)) {\n      return {\n        error: true,\n        msg: {\n          id: 'init',\n          text: typeReports[0].objectReports[0].errorReports[0].message,\n          date: new Date()\n        },\n        typeReports: data\n      };\n    }\n  }\n  if (typeof response !== 'undefined') {\n    if (response.id) {\n      // the response will contain an `id` if the import was asynchronous\n      return {\n        id: response.id,\n        msg: {\n          id: 'init',\n          text: message,\n          date: new Date(response.created)\n        }\n      };\n    } else {\n      // the response will contain a report inside the response if the\n      // import was synchronous\n      return {\n        msg: {\n          id: 'completed',\n          text: 'Import:Done',\n          date: new Date()\n        },\n        typeReports: response\n      };\n    }\n  }\n\n  // sync metadata import\n  if (typeReports) {\n    if (Array.isArray(typeReports) && typeReports[0] && Array.isArray(typeReports[0].objectReports) && typeReports[0].objectReports[0] && Array.isArray(typeReports[0].objectReports[0].errorReports)) {\n      return {\n        error: true,\n        msg: {\n          id: 'init',\n          text: typeReports[0].objectReports[0].errorReports[0].message,\n          date: new Date()\n        },\n        typeReports: data\n      };\n    }\n    return {\n      msg: {\n        id: 'completed',\n        text: 'Import:Done',\n        date: new Date()\n      },\n      typeReports: data\n    };\n  }\n  return {\n    error: true\n  };\n};\nconst onProgress = setProgress => evt => {\n  if (evt.lengthComputable) {\n    const percentComplete = parseInt(evt.loaded / evt.total * 100);\n    setProgress(Math.max(1, percentComplete));\n  }\n};\nexport { getUploadXHR };"],"names":["FORM_ERROR","jobStartedMessage","id","info","message","i18n","t","parseCSVLine","line","result","current","inQuotes","i","length","char","push","trim","parseDateToISO","dateString","Date","toISOString","parts","split","day","month","part1","parseInt","part2","year","Error","monthStr","toString","padStart","dayStr","testDate","UTC","getUTCFullYear","getUTCMonth","getUTCDate","console","warn","date","isNaN","getTime","error","createColumnMapping","headers","dataElementMap","mapping","matchedCount","dataElements","unknown","ciLookup","lookup","name","Object","entries","replace","toLowerCase","originalName","createCaseInsensitiveLookup","forEach","header","index","normalizedHeader","lowerHeader","match","type","convertRowToEvent","rowValues","columnMapping","programId","programStageId","orgUnitId","dataValues","occurredAt","emailRegex","value","column","trimmedValue","dataElement","columnNameLower","includes","test","program","programStage","orgUnit","status","isAsync","normalizeDataElementName","toUpperCase","createMissingDataElements","async","missingDataElements","baseUrl","onProgress","createdElements","defaultCatComboId","_ccData$categoryCombo","ccResp","fetch","credentials","ccData","json","categoryCombos","e","createdDataElementIds","total","valueType","percent","Math","round","newDe","shortName","substring","domainType","aggregationType","categoryCombo","undefined","createResp","method","body","JSON","stringify","ok","_createData$response","_createData$response2","createData","createdId","response","uid","lastImported","fetchResp","fullDe","errorText","text","psResp","psData","existingPSDEs","programStageDataElements","updatedPSDEs","deId","some","psde","_psde$dataElement","compulsory","displayInReports","programStageSections","allSectionDeIds","Set","section","de","add","missingFromSections","filter","has","targetSection","find","s","log","updateResp","fetchProgramMetadata","programIdOrName","cleanInput","pop","programData","url","errorMsg","statusText","catch","searchUrl","encodeURIComponent","searchResult","programs","nameSearchUrl","nameResponse","nameSearchResult","programStages","Array","isArray","stage","displayName","onImport","Symbol","setProgress","addTask","setShowFullSummaryTask","setLoadingMessage","setMissingDataElements","setShowDataElementModal","setPendingImport","values","preReadContent","skipAnalysis","dryRun","files","format","dataElementIdScheme","orgUnitIdScheme","idScheme","projectArea","programmeArea","thematicArea","fileToUpload","uploadFormat","csvText","Promise","resolve","reject","reader","FileReader","onload","target","onerror","readAsText","analysis","fileContent","lines","dataElementColumns","existingDataElements","cleanHeaders","map","h","parsedLines","slice","l","columnValueTypes","colIdx","indexOf","vals","v","deUrl","dataElementsList","resp","normalizedDisplay","normalizedName","normalized","analyzeCSVForDataElements","deResp","allDataElements","d","dataElementIds","existingDeIds","_psde$dataElement2","Boolean","missingFromProgramStage","needsSectionUpdate","trackerPayload","convertCsvToTrackerFormat","formData","keys","events","event","jsonBlob","jsonString","Blob","convertPayloadToFile","File","join","uploadFile","file","addEntry","entry","jobDetails","errors","createStyle","width","height","display","fill","color","userSelect","MetadataImportIcon","React","viewBox","style","MetadataExportIcon","MetadataDependencyExportIcon","DataIcon","EventIcon","GeometryIcon","TasksIcon","TEIIcon","ImportIcon","ExportIcon","optionPropType","PropTypes","isRequired","label","DataElementIdScheme","dataElementIdSchemeOptions","dataTest","useConfig","loading","setLoading","useState","schemes","setSchemes","setError","useEffect","fetchAttributes","then","attributes","finally","validationText","options","StyledField","component","SingleSelectFieldFF","DatePicker","onChange","InputField","onChangeHelper","inputWidth","_extends","assign","bind","n","arguments","r","hasOwnProperty","call","apply","Field","ReactFinalForm","OPTIONAL_DATE_VALIDATOR","DATE_VALIDATOR","DATE_BEFORE_VALIDATOR","date1","date2","DATE_AFTER_VALIDATOR","Wrapper","input","meta","inputName","rest","DatePickerField","validator","validate","EventIdScheme","eventIdSchemeOptions","FileUpload","initialValue","required","helpText","accept","FormField","FileInputFieldFF","FormAlerts","alerts","AlertStack","a","AlertBar","key","warning","critical","success","duration","children","className","styles","IdScheme","idSchemeOptions","err","dataElementAttributes","organisationUnitAttributes","sharedAttributes","reduce","shared","attribute","foundInOrgUnits","attributeFoundIn","collection","f","DRYRUN_HELPTEXT","ImportButtonStrip","dryRunDataTest","importDataTest","form","ButtonStrip","Button","primary","onClick","change","secondary","Help","UserContext","TaskContext","getNewestTask","tasks","k","sort","b","created","categoryTypes","importType","icon","allCategories","ChipContainer","categoryTypesObj","acc","cur","jobToPath","job","_categoryTypesObj$job","pathname","query","MenuLabel","task","completed","Tag","positive","jsDateToString","JobOverview","activeTypes","setActiveTypes","selectedJob","setSelectedJob","useContext","allTasks","flat","createdAt","filteredTasks","Menu","Chip","dense","onChipClick","selected","MenuItem","active","JobSummary","showFileDetails","showJobDetails","Link","to","valueToString","Details","details","Table","TableHead","TableRowHead","TableCellHead","TableBody","TableRow","TableCell","Log","statsPropTypeObj","deleted","ignored","updated","imported","getClassName","c","SingleStatusTable","property","description","SingleSummary","importCount","conflicts","validationReport","_ref","_importCount$imported","_validationReport$err","errorReports","_c$warningCode","object","rel","href","warningCode","errorCode","trackerType","indexes","Messages","messages","m","TypeCount","stats","TypeReportSummary","overviewStats","extractStats","summary","responseType","Summary","typeReports","report","allStats","allMessages","klass","objectReports","mainKlass","errorProperty","typeReportParse","overviewSummary","allSummaries","importSummaries","Header","_jobDetails$files","title","taskDetails","Tags","tags","neutral","negative","bold","container","Divider","MiniJobSummary","MoreOptions","noBottomMargin","initiallyVisible","hidden","setHidden","hasOpened","setHasOpened","cx","onToggle","IconChevronRight24","defaultProps","OrgUnitIdScheme","orgUnitIdSchemeOptions","rootQuery","roots","resource","params","fields","paging","SINGLE_ORG_VALIDATOR","selectedOrgUnits","SINGLE_EXACT_ORG_VALIDATOR","multiSelect","data","useDataQuery","CircularLoader","OrganisationUnitTree","organisationUnits","ou","singleSelection","touched","pristine","OrgUnitTreeField","Page","desc","summaryTask","showFullSummaryTask","limitWidth","transparent","loadingEl","LinearLoader","amount","Card","ComponentCover","translucent","CenteredContent","jobEventQuery","taskId","jobSummaryQuery","trackerEventQuery","trackerSummaryQuery","defaultTasks","gml","earthengine","geojson","metadata","tei","defaultJobOverview","useTasks","engine","useDataEngine","setTasks","jobOverview","setJobOverview","fetchSummary","createFetchSummary","newTask","variables","fetchEvents","createFetchEvents","newEvents","te","level","time","errorEvent","reverse","lastUpdated","timeSinceCreated","setTimeout","createAddTask","updateJobOverview","val","createUpdateJobOverview","userQuery","user","programStageQuery","ALL_VALUE","ALL_LABEL","classKeyQuery","ProgramStages","selectedProgram","programStagesLoading","programStagesError","programStagesValidationText","useProgramStages","setSelected","stages","setStages","onComplete","formattedList","onError","Label","prefix","RadioGroup","checked","setValue","vertical","o","Radio","help","RadioGroupField","LABEL","VALIDATOR","FileUploadGeneric","ImportButtonStripGeneric","FormAlertsGeneric","formatOptions","formatNoXmlOptions","formatNoXmlNoCsvOptions","formatAdxOptions","formatAdxXMLOptions","formatAdxPdfOptions","defaultFormatOption","IMPORT_LABEL","EXPORT_LABEL","typeToLabel","Format","availableFormats","defaultFirstRowIsHeaderOption","DATATEST","SHORT_LABEL","HELPTEXT","FirstRowIsHeader","show","CheckboxFieldFF","NAME","ClassKey","prevValue","classKeysLoading","classKeysError","classKeysValidationText","classKeys","useClassKeys","setClassKeys","classData","filterable","strategyOptions","defaultStrategyOption","DELETE_WARNING_TITLE","DELETE_WARNING","Strategy","NoticeBox","PreheatCache","SkipAudit","SkipExistingCheck","identifierOptions","defaultIdentifierOption","Identifier","importReportModeOptions","defaultImportReportModeOption","ImportReportMode","preheatModeOptions","defaultPreheatModeOption","PreheatMode","importStrategyOptions","defaultImportStrategyOption","ImportStrategy","atomicModeOptions","defaultAtomicModeOption","AtomicMode","mergeModeOptions","defaultMergeModeOption","MergeMode","flushModeOptions","defaultFlushModeOption","FlushMode","inclusionStrategyOptions","defaultInclusionStrategyOption","InclusionStrategy","defaultSkipSharingOption","SkipSharing","defaultSkipValidationOption","SkipValidation","IsAsync","OrgUnitTree","orgValidator","composeValidators","hasValue","resourceTypes","FILTERLABEL","SELECTEDLABEL","ERRORMESSAGE","RESOURCETYPE","SINGLE_DATASET_VALIDATOR","selectedDataSets","SINGLE_EXACT_DATASET_VALIDATOR","DataSetPicker","dataSetValidator","ResourcePickerField","resourceType","errorMessage","listName","filterLabel","selectedLabel","PROGRAM_RESOURCE_TYPE","PROGRAM_WITH_EVENTS_RESOURCE_TYPE","SINGLE_PROGRAM_VALIDATOR","selectedPrograms","SINGLE_EXACT_PROGRAM_VALIDATOR","ProgramPicker","includeEvents","programValidator","maxWidth","autoSelectFirst","IncludeChildren","IncludeDeleted","compressionOptions","defaultCompressionOption","Compression","inclusionOptions","defaultInclusionOption","Inclusion","StartDate","EndDate","ExportButton","disabledLabel","disabled","marginBottom","props","ProgramStagesGeneric","Schemas","setCheckedSchemas","SchemasField","checkedSchemas","EXCLUDE_SCHEMAS","excludeSchemas","checkedByDefault","objectTypeOptions","defaultObjectTypeOption","ObjectType","filled","initialFocus","Objects","objectType","objectsLoading","objectsError","objectsValidationText","objects","useObjects","setObjects","defaultDataElementIdSchemeOption","DataElementIdSchemeGeneric","defaultEventIdSchemeOption","EventIdSchemeGeneric","defaultIdSchemeOption","IdSchemeGeneric","defaultOrgUnitIdSchemeOption","OrgUnitIdSchemeGeneric","OrgUnitIdSchemeCore","hasAuthorityToSkipAudit","authorities","OU_MODE_MANUAL_VALUE","orgUnitSelectionModeOptions","defaultOrgUnitSelectionModeOption","OrgUnitMode","teiTypeFilterOptions","defaultTEITypeFilterOption","TEITypeFilter","programStatusOptions","defaultProgramStatusOption","ProgramStatus","followUpStatusOptions","defaultFollowUpStatusOption","FollowUpStatus","ProgramStartDate","ProgramEndDate","SINGLE_TETYPE_VALIDATOR","selectedTypes","SINGLE_EXACT_TETYPE_VALIDATOR","TETypePicker","teTypeValidator","withActions","lastUpdatedFilterOptions","defaultLastUpdatedFilterOption","LastUpdatedFilter","LastUpdatedStartDate","LastUpdatedEndDate","durationRegex","formatHelpText","placeholder","DurationField","LastUpdatedDuration","useField","assignedUserModeOptions","defaultAssignedUserModeOption","FILTER_NAME","FILTER_DATATEST","FILTER_SHORT_LABEL","FILTER_LABEL","AssignedUserMode","filterInput","showOptions","userInput","userMode","showUserPicker","marginLeft","marginTop","UserPicker","SINGLE_USER_VALIDATOR","selectedUsers","SINGLE_EXACT_USER_VALIDATOR","userValidator","Dates","requireValue","hierarchyQuery","thematicAreas","programmeAreas","projectAreas","ProjectHierarchy","_data$thematicAreas","_data$thematicAreas$o","_data$programmeAreas","_data$programmeAreas$","_data$projectAreas","_data$projectAreas$pr","refetch","called","lazy","padding","alignItems","small","backgroundColor","border","borderRadius","nsSeparator","thematicAreaOptions","programmeAreaOptions","projectAreaOptions","classKey","classKeyValidator","Form","PAGE_NAME","PAGE_DESCRIPTION","PAGE_ICON","MetadataImport","metadataTasks","useLocation","prevJobDetails","getPrevJobDetails","initialValues","identifier","importReportMode","importStrategy","firstRowIsHeader","getInitialBoolValue","atomicMode","mergeMode","mergeOperation","flushMode","inclusionStrategy","skipSharing","skipValidation","createInitialValues","progress","onSubmit","formErrors","subscription","submitError","render","handleSubmit","BasicOptions","MergeOperationNotice","ValidationSummary","compression","MetadataExport","exportEnabled","setExportEnabled","onExport","apiBaseUrl","endpointExtension","downloadUrlParams","locationAssign","MetadataDependencyExport","JobOverviewComponent","types","geometryFormats","path","GeometryFormat","history","useHistory","SegmentedControl","MATCH_PROPERTY_NAME","MATCH_PROPERTY_LABEL","GeometryPropertyMatch","matchProperty","InputFieldFF","USE_ATTRIBUTE_NAME","USE_ATTRIBUTE_LABEL","selectedAttributes","GeometryAttributePicker","withFilter","checkbox","useAttribute","Function","prototype","GeometryImport","geojsonTasks","geojsonProperty","orgUnitIdSchemeCore","geojsonAttribute","apiUrl","geoJsonId","geoJsonProperty","orgUnitProperty","attributeId","GMLImport","gmlTasks","FormSpy","EventImport","eventTasks","eventIdScheme","progressPhase","setProgressPhase","PHASE_UPLOAD","progressMessage","setProgressMessage","currentTaskId","setCurrentTaskId","showProgressModal","setShowProgressModal","showDataElementModal","pendingImport","currentTask","_currentTask$events","PHASE_COMPLETE","timer","clearTimeout","PHASE_PROCESSING","addTaskWithTracking","useCallback","setProgressWithModal","setLoadingMessageWithProgress","handleCancelCreateDataElements","handleConfirmCreateDataElements","createDE","progressInfo","DataElementConfirmationModal","onConfirm","onCancel","ImportProgress","visible","phase","formHandleSubmit","SchemeContainer","CachedDataQueryCtx","createContext","NO_DATA","CachedDataQueryProvider","dataTransformation","setData","dt","Layer","fallbackMsg","Provider","useCachedDataQuery","EARTH_ENGINE_ID","PERIOD","ORGANISATION_UNITS","ROUNDING","DATA_ELEMENT_ID","BAND_COCS","NO_ASSOCIATED_GEOMETRY","AssociatedGeometry","associatedGeometry","defaultValue","POPULATION_TOTAL_EE_ID","POPULATION_AGE_GROUPS_EE_ID","POPULATION_AGE_GROUPS_DATASET_ID","SOURCE_NAME","SOURCE_URL","earthEngines","earthEngineId","datasetId","source","sourceUrl","img","defaultAggregations","periodType","bandReducer","band","filters","mosaic","min","max","palette","bands","multiple","NO_BANDS","getEarthEngineBands","eeId","_earthEngines$eeId","useFormState","useForm","BandCocMappingTable","cocs","setCocs","dataElementId","bandCocs","dataSetBands","newCocs","categoryOptionCombos","getProbableCocMatch","bandId","probableCoc","coc","code","catComboOptions","getCatComboOptions","unavailableCocs","bcoc","FieldArray","clearable","noMatchText","DataElements","useFetchCurrentValues","period","currentValues","setCurrentValues","fetchCurrVals","fetcher","fetchCurrentValues","cv","ouQueryParams","hasLevelPrefix","ouIdHelper","concat","missingParams","NO_ROWS","PopulationAgegroupsDataPreview","eeData","pointOuRows","rowsPerPage","onRowsPerPageChanged","tableData","setTableData","page","setPage","tableRef","useRef","bandCocMap","setBandCocMap","bcocMap","curr","cocMap","useMemo","_dataElements$find$ca","newArr","_bandCocMap$d$id","_cocMap$cocId","cocId","ouId","categoryOptionCombo","parentName","ouParentName","ouName","isNoValue","_tableRef$current","scrollIntoView","behavior","visibleRows","start","end","getNumPages","ceil","isLastPage","ref","DataTable","table","DataTableHead","DataTableRow","DataTableColumnHeader","DataTableBody","DataTableCell","parentOuName","DataTableFoot","staticStyle","colSpan","Pagination","onPageChange","onPageSizeChange","rows","pageSize","pageSizeSelectText","pageLength","pageCount","pageSummaryText","firstItem","lastItem","PopulationDataPreview","DataPreview","modifiedSinceLastSubmit","setRowsPerPage","content","EarthEngineId","formatList","items","Intl","ListFormat","language","OrgUnitDimension","onSelect","ouLevels","setOuLevels","dataEngine","apiFetchOrganisationUnitLevels","doFetchOuLevels","onLevelChange","ids","addLevelPrefix","dimensionId","DIMENSION_ID_ORGUNIT","initiallyExpanded","item","lastIndexOf","selectedItem","MultiSelect","removePrefix","MultiSelectOption","getSummary","numberOfOrgUnits","numberOfLevels","count","defaultValue_plural","keySeparator","commaSeparatedListOfOrganisationUnits","clearSelection","rootOrgUnits","showUserOrgUnits","AT_LEAST_ONE_ORG_VALIDATOR","OrganisationUnits","hasIntlSupport","global","DateTimeFormat","formatLocaleDate","locale","substr","fallbackDateFormat","getStartEndDate","formatStartEndDate","startDate","endDate","workerPromise","getWorkerInstance","EarthEngineWorker","loadEarthEngineWorker","getAuthToken","getPeriods","eeWorker","features","periods","getPeriod","properties","getFullYear","String","p","googleTokenQuery","token","token_type","usePeriods","setPeriods","asyncGetPeriods","Periods","Tooltip","loadingText","empty","roundings","defaultRoundingOption","Rounding","toGeoJson","sortByLevel","orgUnits","le","coord","parse","co","gpid","gppg","ty","pg","arr","resIndex","compact","geometry","coordinates","na","hasCoordinatesDown","hcd","hasCoordinatesUp","hcu","grandParentParentGraph","grandParentId","parentGraph","parentId","pi","pn","dimensions","earthEngineParams","ALL_AGGREGATION_TYPES","OU_ID","OU_PARENT_NAME","OU_NAME","BAND_ID","VALUE","getStructuredData","selectedBandCocs","ouIdNameMap","rounding","getValueWithPrecision","numDecimals","decimals","pow","getPrecisionFn","valueSet","groupId","rawValue","useEeData","setEeData","setPointOuRows","setErrorMessage","fetchEeData","bc","_config$data","config","pointOrgUnits","ouIds","previousValue","currentValue","coordinateField","geoFeatures","polygonFeatures","gf","getGeoFeaturesQuery","cfg","tileScale","fromEntries","getEarthEngineConfig","getAggregations","structuredData","msg","EarthEngineImportForm","earthengineTasks","hiddenTopElRef","previewIsAllowed","valid","_values$bandCocs","bandsValid","onImportInternal","mutation","mutate","extractIdAndMessage","currentDate","genericErrorMessage","_hiddenTopElRef$curre","getAlerts","internalErrors","keepDirtyOnReinitialize","mutators","arrayMutators","mappingTableShouldDisplay","userDataViewFallback","providerDataTransformation","_rootOrgUnits$organis","ag","EarthEngineImport","transformEventsData","eventsData","orgUnitsData","programsData","_orgUnitsData$organis","_programsData$program","dataElementLookup","_stage$programStageDa","transformedEvent","updatedAt","project","Males","District","Females","dataValue","elementName","today","threeMonthsBeforeToday","getMonth","getDate","occurredAfter","jsDateToISO8601","occurredBefore","includeDeleted","inclusion","totalPages","EventExport","EVENTS_QUERY","ouMode","transformedData","output","row","csvRow","blob","window","URL","createObjectURL","link","document","createElement","download","appendChild","click","removeChild","revokeObjectURL","alert","parsePeriod","monthNames","slashDateMatch","first","second","isValidDate","yyyy","mm","dd","y","dayMatch","monthName","monthIndex","monthMatch","monthNames3","monYYMatch","yearShort","ddMonYYMatch","strategy","preheatCache","skipAudit","skipExistingCheck","originalFile","fileData","dataRows","isCustomFormat","jsonData","expectedHeaders","every","isPivotFormat","dateColIndex","findIndex","skipColumns","fallbackPeriod","deNameToObj","defaultCoc","_cocData$categoryOpti","cocResp","cocData","dataHeaders","_","columnHasText","fullResp","missingHeaders","headerName","hasText","aggregated","rowPeriod","colHeader","_de$categoryCombo","_de$categoryCombo$cat","_de$categoryCombo$cat2","colIndex","cellValue","dhis2Headers","csvRows","finalValue","sum","parseFloat","escapedValue","programNames","programIndex","orgUnitUrl","defaultOrgUnit","orgUnitName","dataElementUrl","defaultComboUrl","defaultAttributeOptionCombo","dataElementNameToId","periodIndex","storedByIndex","lastUpdatedIndex","metadataColumns","programName","storedBy","columnHeader","columnIndex","_columnHeader$toLower","finalPeriod","validationErrors","_metadata$dataElement","_dataElement$category","_dataElement$category2","_dataElement$category3","transformImportData","fileName","endsWith","lastModified","now","DataImport","dataTasks","spyValues","WithAuthority","pred","formatPeriod","_data$dataElements","_data$orgUnitsMetadat","includeChildren","pathToId","DATA_QUERY","dataSet","ds","orgUnitsMetadata","dataElementsLookup","orgUnitsLookup","_data$dataValues","pivotData","transformDataValuesToPivot","dataMap","Map","dataElementsSet","periodsSet","dataElementName","formattedPeriod","set","get","from","periodMap","firstDataEntry","Period","Program","StoredBy","LastUpdated","dataEntry","_data$dataValues2","transformDataValuesFlat","fileExtension","fileFormatToFileExtension","DataExport","endpoint","valuesToParams","selectedTETypes","assignedUserModeFilter","assignedUserMode","teiTypeFilter","programStatus","followUp","enrollmentEnrolledAfter","enrollmentEnrolledBefore","lastUpdatedFilter","updatedAfter","updatedBefore","updatedWithin","filename","minParams","attachment","assignedUsers","trackedEntityType","param","TEIExport","showProgramFilters","showTEFilters","showLUDates","showLUDuration","TEIImport","teiTasks","preheatMode","capitalizeFirstLetter","string","charAt","capitalizePages","pages","ScrollToTop","DATA_EXPORT_PAGE_NAME","DATA_EXPORT_DESCRIPTION","linkText","EVENT_EXPORT_PAGE_NAME","EVENT_EXPORT_DESCRIPTION","METADATA_DEPENDENCY_EXPORT_PAGE_NAME","METADATA_DEPENDENCY_EXPORT_DESCRIPTION","METADATA_EXPORT_PAGE_NAME","METADATA_EXPORT_DESCRIPTION","TEI_EXPORT_PAGE_NAME","TEI_EXPORT_DESCRIPTION","DATA_IMPORT_PAGE_NAME","DATA_IMPORT_DESCRIPTION","EVENT_IMPORT_PAGE_NAME","EVENT_IMPORT_DESCRIPTION","EARTH_ENGINE_IMPORT_PAGE_NAME","EARTH_ENGINE_IMPORT_DESCRIPTION","GEOMETRY_IMPORT_PAGE_NAME","GEOMETRY_IMPORT_DESCRIPTION","METADATA_IMPORT_PAGE_NAME","METADATA_IMPORT_DESCRIPTION","TEI_IMPORT_PAGE_NAME","TEI_IMPORT_DESCRIPTION","unlisten","listen","_document$getElements","getElementsByClassName","scrollTo","Router","Switch","Route","exact","Redirect","findLabelByLowerCaseComparison","groupKey","schemas","foundLabel","schemaName","isGroupKeyMatchingLowerCaseSchemaName","findKeyByCamelCaseComparison","isGroupKeyInSchemaName","str","getSchemaGroups","groups","schema","group","groupSchemas","combinedGroups","groupName","other","combineSingleItemGroups","getGroupLabels","schemaGroups","groupLabels","lowerCaseGroupKey","extractGroupLabelFromSchemas","SchemaGroup","toggleSchema","ind","Checkbox","schemaQuery","setSchemaGroups","schemaGroupLabels","setSchemaGroupLabels","schemaGroupOrder","setSchemaGroupOrder","fetching","filteredSchemas","filterOutExcludedSchemas","excludedSchemas","collectionName","formattedSchemas","formatSchemas","groupKeys","getGroupOrder","propagateCheckedSchemas","updatedSchemaGroups","onSelectGeneric","grAcc","showSchemas","schemaGroup","updatedGroup","MenuSectionHeader","UIHeader","hideDivider","ExportMenuSectionHeader","ImportMenuSectionHeader","dataImportPage","eventImportPage","metadataImportPage","dataExportPage","eventExportPage","metadataExportPage","importPages","exportPages","SidebarItem","createHref","search","hash","navigateToPath","Sidebar","propTypes","dataSetQuery","dataSets","programQuery","programWithEventsQuery","TETypeQuery","trackedEntityTypes","users","geojsonAttributesQuery","ResourcePicker","list","setList","resourceError","resourceName","resourceToQuery","showList","Transfer","filterPlaceholder","rightHeader","UiTooltip","openDelay","closeDelay","placement","onMouseOver","onMouseOut","submitFailed","errorList","transformErrors","MERGE_NOTICE_TITLE","MERGE_NOTICE_TEXT","_task$events","isUploading","isProcessing","isComplete","latestEvent","displayMessage","hasError","isTaskComplete","toLocaleTimeString","Modal","onClose","ModalTitle","ModalContent","maxHeight","overflowY","margin","paddingLeft","element","ModalActions","namespace","addResources","arTranslations","ar_IQTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","es_419Translations","frTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","neTranslations","nlTranslations","orTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","roTranslations","ruTranslations","siTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uz_CyrlTranslations","uz_LatnTranslations","uz_UZ_CyrlTranslations","uz_UZ_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","App","useUser","showApp","CssReset","CssVariables","spacers","colors","HashRouter","CACHE_VERSION","VERSION_PARAM","clearCaches","cachePromises","caches","delete","all","unregisterServiceWorkers","navigator","registrations","serviceWorker","getRegistrations","registration","unregister","initialize","location","currentVersion","searchParams","sessionStorage","setItem","scrollY","replaceState","getItem","clearKeys","localStorage","startsWith","removeItem","clear","clearStorages","Sider","Content","Layout","ME_QUERY","me","Main","cacheBuster","collapsed","setCollapsed","openKeys","setOpenKeys","firstName","surname","email","userEmail","profileMenu","Item","SettingOutlined","UserOutlined","LogoutOutlined","adminCentreItems","BarsOutlined","MonitorOutlined","TeamOutlined","FormOutlined","FileTextOutlined","DownloadOutlined","trigger","collapsible","collapsedWidth","onCollapse","collapsedState","breakpoint","onBreakpoint","broken","classes","transition","background","borderRight","overflow","flexDirection","gap","flexShrink","MenuOutlined","fontSize","src","process","alt","objectFit","overflowX","selectedKeys","onOpenChange","latestOpenKey","mode","inlineCollapsed","HomeOutlined","SubMenu","CheckCircleOutlined","ImportOutlined","AreaChartOutlined","pathSplit","getHours","getMinutes","getSeconds","errorGenerator","timestamp","errF","getUploadXHR","upload","onResponse","ev","e2","send","downloadUrl","baseURI","urlFilePart","open","xml","csv","adx","pdf","xhr","XMLHttpRequest","contentType","getMimeType","withCredentials","setRequestHeader","onreadystatechange","onReadyStateChange","onprogress","floor","readyState","responseText","idAndMsg","parseError","evt","lengthComputable","percentComplete","loaded"],"ignoreList":[],"sourceRoot":""}